var Qv=Object.defineProperty;var Wv=t=>{throw TypeError(t)};var Jv=(t,e,a)=>e in t?Qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var wt=(t,e,a)=>Jv(t,typeof e!="symbol"?e+"":e,a);var Fr=(t,e,a)=>e.has(t)?Wv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a);import{R as et,r as q,j as ne,a as ug,b as $v,c as e_,g as Hd,d as $p,e as t_,f as dg,u as hg,h as Pn,S as n_,D as sd,i as fg,k as lt,l as pg,m as i_,n as a_,o as r_,w as s_,t as e0}from"./index-DYrUb8sG.js";function o_(t,e){for(var a=0;a<e.length;a++){const r=e[a];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function mg(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=mg(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function gg(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=mg(t))&&(r&&(r+=" "),r+=e);return r}const t0=t=>Symbol.iterator in t,n0=t=>"entries"in t,i0=(t,e)=>{const a=t instanceof Map?t:new Map(t.entries()),r=e instanceof Map?e:new Map(e.entries());if(a.size!==r.size)return!1;for(const[s,o]of a)if(!Object.is(o,r.get(s)))return!1;return!0},l_=(t,e)=>{const a=t[Symbol.iterator](),r=e[Symbol.iterator]();let s=a.next(),o=r.next();for(;!s.done&&!o.done;){if(!Object.is(s.value,o.value))return!1;s=a.next(),o=r.next()}return!!s.done&&!!o.done};function c_(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:t0(t)&&t0(e)?n0(t)&&n0(e)?i0(t,e):l_(t,e):i0({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function yg(t){const e=et.useRef(void 0);return a=>{const r=t(a);return c_(e.current,r)?e.current:e.current=r}}function u_(t,e){const a=q.createContext(e),r=o=>{const{children:c,...u}=o,h=q.useMemo(()=>u,Object.values(u));return ne.jsx(a.Provider,{value:h,children:c})};r.displayName=t+"Provider";function s(o){const c=q.useContext(a);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function vg(t,e=[]){let a=[];function r(o,c){const u=q.createContext(c),h=a.length;a=[...a,c];const f=b=>{var O;const{scope:y,children:g,...v}=b,C=((O=y==null?void 0:y[t])==null?void 0:O[h])||u,E=q.useMemo(()=>v,Object.values(v));return ne.jsx(C.Provider,{value:E,children:g})};f.displayName=o+"Provider";function p(b,y){var C;const g=((C=y==null?void 0:y[t])==null?void 0:C[h])||u,v=q.useContext(g);if(v)return v;if(c!==void 0)return c;throw new Error(`\`${b}\` must be used within \`${o}\``)}return[f,p]}const s=()=>{const o=a.map(c=>q.createContext(c));return function(u){const h=(u==null?void 0:u[t])||o;return q.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,d_(s,...e)]}function d_(...t){const e=t[0];if(t.length===1)return e;const a=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const b=h(o)[`__scope${f}`];return{...u,...b}},{});return q.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return a.scopeName=e.scopeName,a}function a0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function _g(...t){return e=>{let a=!1;const r=t.map(s=>{const o=a0(s,e);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():a0(t[s],null)}}}}function ai(...t){return q.useCallback(_g(...t),t)}function ni(t,e,{checkForDefaultPrevented:a=!0}={}){return function(s){if(t==null||t(s),a===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var zs=globalThis!=null&&globalThis.document?q.useLayoutEffect:()=>{},h_=ug[" useId ".trim().toString()]||(()=>{}),f_=0;function Mu(t){const[e,a]=q.useState(h_());return zs(()=>{a(r=>r??String(f_++))},[t]),t||(e?`radix-${e}`:"")}var p_=ug[" useInsertionEffect ".trim().toString()]||zs;function m_({prop:t,defaultProp:e,onChange:a=()=>{},caller:r}){const[s,o,c]=g_({defaultProp:e,onChange:a}),u=t!==void 0,h=u?t:s;{const p=q.useRef(t!==void 0);q.useEffect(()=>{const b=p.current;b!==u&&console.warn(`${r} is changing from ${b?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,r])}const f=q.useCallback(p=>{var b;if(u){const y=y_(p)?p(t):p;y!==t&&((b=c.current)==null||b.call(c,y))}else o(p)},[u,t,o,c]);return[h,f]}function g_({defaultProp:t,onChange:e}){const[a,r]=q.useState(t),s=q.useRef(a),o=q.useRef(e);return p_(()=>{o.current=e},[e]),q.useEffect(()=>{var c;s.current!==a&&((c=o.current)==null||c.call(o,a),s.current=a)},[a,s]),[a,r,o]}function y_(t){return typeof t=="function"}function qd(t){const e=__(t),a=q.forwardRef((r,s)=>{const{children:o,...c}=r,u=q.Children.toArray(o),h=u.find(S_);if(h){const f=h.props.children,p=u.map(b=>b===h?q.Children.count(f)>1?q.Children.only(null):q.isValidElement(f)?f.props.children:null:b);return ne.jsx(e,{...c,ref:s,children:q.isValidElement(f)?q.cloneElement(f,void 0,p):null})}return ne.jsx(e,{...c,ref:s,children:o})});return a.displayName=`${t}.Slot`,a}var v_=qd("Slot");function __(t){const e=q.forwardRef((a,r)=>{const{children:s,...o}=a;if(q.isValidElement(s)){const c=x_(s),u=C_(o,s.props);return s.type!==q.Fragment&&(u.ref=r?_g(r,c):c),q.cloneElement(s,u)}return q.Children.count(s)>1?q.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bg=Symbol("radix.slottable");function b_(t){const e=({children:a})=>ne.jsx(ne.Fragment,{children:a});return e.displayName=`${t}.Slottable`,e.__radixId=bg,e}function S_(t){return q.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bg}function C_(t,e){const a={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?a[r]=(...u)=>{const h=o(...u);return s(...u),h}:s&&(a[r]=s):r==="style"?a[r]={...s,...o}:r==="className"&&(a[r]=[s,o].filter(Boolean).join(" "))}return{...t,...a}}function x_(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,a=e&&"isReactWarning"in e&&e.isReactWarning;return a?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,a=e&&"isReactWarning"in e&&e.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var E_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gn=E_.reduce((t,e)=>{const a=qd(`Primitive.${e}`),r=q.forwardRef((s,o)=>{const{asChild:c,...u}=s,h=c?a:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ne.jsx(h,{...u,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function T_(t,e){t&&$v.flushSync(()=>t.dispatchEvent(e))}function Us(t){const e=q.useRef(t);return q.useEffect(()=>{e.current=t}),q.useMemo(()=>(...a)=>{var r;return(r=e.current)==null?void 0:r.call(e,...a)},[])}function R_(t,e=globalThis==null?void 0:globalThis.document){const a=Us(t);q.useEffect(()=>{const r=s=>{s.key==="Escape"&&a(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[a,e])}var M_="DismissableLayer",od="dismissableLayer.update",A_="dismissableLayer.pointerDownOutside",O_="dismissableLayer.focusOutside",r0,Sg=q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cg=q.forwardRef((t,e)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...h}=t,f=q.useContext(Sg),[p,b]=q.useState(null),y=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=q.useState({}),v=ai(e,G=>b(G)),C=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),O=C.indexOf(E),x=p?C.indexOf(p):-1,_=f.layersWithOutsidePointerEventsDisabled.size>0,T=x>=O,M=k_(G=>{const R=G.target,N=[...f.branches].some(P=>P.contains(R));!T||N||(s==null||s(G),c==null||c(G),G.defaultPrevented||u==null||u())},y),k=P_(G=>{const R=G.target;[...f.branches].some(P=>P.contains(R))||(o==null||o(G),c==null||c(G),G.defaultPrevented||u==null||u())},y);return R_(G=>{x===f.layers.size-1&&(r==null||r(G),!G.defaultPrevented&&u&&(G.preventDefault(),u()))},y),q.useEffect(()=>{if(p)return a&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(r0=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),s0(),()=>{a&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=r0)}},[p,y,a,f]),q.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),s0())},[p,f]),q.useEffect(()=>{const G=()=>g({});return document.addEventListener(od,G),()=>document.removeEventListener(od,G)},[]),ne.jsx(Gn.div,{...h,ref:v,style:{pointerEvents:_?T?"auto":"none":void 0,...t.style},onFocusCapture:ni(t.onFocusCapture,k.onFocusCapture),onBlurCapture:ni(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ni(t.onPointerDownCapture,M.onPointerDownCapture)})});Cg.displayName=M_;var N_="DismissableLayerBranch",D_=q.forwardRef((t,e)=>{const a=q.useContext(Sg),r=q.useRef(null),s=ai(e,r);return q.useEffect(()=>{const o=r.current;if(o)return a.branches.add(o),()=>{a.branches.delete(o)}},[a.branches]),ne.jsx(Gn.div,{...t,ref:s})});D_.displayName=N_;function k_(t,e=globalThis==null?void 0:globalThis.document){const a=Us(t),r=q.useRef(!1),s=q.useRef(()=>{});return q.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let h=function(){xg(A_,a,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,a]),{onPointerDownCapture:()=>r.current=!0}}function P_(t,e=globalThis==null?void 0:globalThis.document){const a=Us(t),r=q.useRef(!1);return q.useEffect(()=>{const s=o=>{o.target&&!r.current&&xg(O_,a,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,a]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function s0(){const t=new CustomEvent(od);document.dispatchEvent(t)}function xg(t,e,a,{discrete:r}){const s=a.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});e&&s.addEventListener(t,e,{once:!0}),r?T_(s,o):s.dispatchEvent(o)}var Au="focusScope.autoFocusOnMount",Ou="focusScope.autoFocusOnUnmount",o0={bubbles:!1,cancelable:!0},w_="FocusScope",Eg=q.forwardRef((t,e)=>{const{loop:a=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...c}=t,[u,h]=q.useState(null),f=Us(s),p=Us(o),b=q.useRef(null),y=ai(e,C=>h(C)),g=q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;q.useEffect(()=>{if(r){let C=function(_){if(g.paused||!u)return;const T=_.target;u.contains(T)?b.current=T:Oi(b.current,{select:!0})},E=function(_){if(g.paused||!u)return;const T=_.relatedTarget;T!==null&&(u.contains(T)||Oi(b.current,{select:!0}))},O=function(_){if(document.activeElement===document.body)for(const M of _)M.removedNodes.length>0&&Oi(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",E);const x=new MutationObserver(O);return u&&x.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",E),x.disconnect()}}},[r,u,g.paused]),q.useEffect(()=>{if(u){c0.add(g);const C=document.activeElement;if(!u.contains(C)){const O=new CustomEvent(Au,o0);u.addEventListener(Au,f),u.dispatchEvent(O),O.defaultPrevented||(z_(V_(Tg(u)),{select:!0}),document.activeElement===C&&Oi(u))}return()=>{u.removeEventListener(Au,f),setTimeout(()=>{const O=new CustomEvent(Ou,o0);u.addEventListener(Ou,p),u.dispatchEvent(O),O.defaultPrevented||Oi(C??document.body,{select:!0}),u.removeEventListener(Ou,p),c0.remove(g)},0)}}},[u,f,p,g]);const v=q.useCallback(C=>{if(!a&&!r||g.paused)return;const E=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,O=document.activeElement;if(E&&O){const x=C.currentTarget,[_,T]=U_(x);_&&T?!C.shiftKey&&O===T?(C.preventDefault(),a&&Oi(_,{select:!0})):C.shiftKey&&O===_&&(C.preventDefault(),a&&Oi(T,{select:!0})):O===x&&C.preventDefault()}},[a,r,g.paused]);return ne.jsx(Gn.div,{tabIndex:-1,...c,ref:y,onKeyDown:v})});Eg.displayName=w_;function z_(t,{select:e=!1}={}){const a=document.activeElement;for(const r of t)if(Oi(r,{select:e}),document.activeElement!==a)return}function U_(t){const e=Tg(t),a=l0(e,t),r=l0(e.reverse(),t);return[a,r]}function Tg(t){const e=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)e.push(a.currentNode);return e}function l0(t,e){for(const a of t)if(!L_(a,{upTo:e}))return a}function L_(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function G_(t){return t instanceof HTMLInputElement&&"select"in t}function Oi(t,{select:e=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&G_(t)&&e&&t.select()}}var c0=F_();function F_(){let t=[];return{add(e){const a=t[0];e!==a&&(a==null||a.pause()),t=u0(t,e),t.unshift(e)},remove(e){var a;t=u0(t,e),(a=t[0])==null||a.resume()}}}function u0(t,e){const a=[...t],r=a.indexOf(e);return r!==-1&&a.splice(r,1),a}function V_(t){return t.filter(e=>e.tagName!=="A")}var B_="Portal",Rg=q.forwardRef((t,e)=>{var u;const{container:a,...r}=t,[s,o]=q.useState(!1);zs(()=>o(!0),[]);const c=a||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?e_.createPortal(ne.jsx(Gn.div,{...r,ref:e}),c):null});Rg.displayName=B_;function j_(t,e){return q.useReducer((a,r)=>e[a][r]??a,t)}var wl=t=>{const{present:e,children:a}=t,r=I_(e),s=typeof a=="function"?a({present:r.isPresent}):q.Children.only(a),o=ai(r.ref,H_(s));return typeof a=="function"||r.isPresent?q.cloneElement(s,{ref:o}):null};wl.displayName="Presence";function I_(t){const[e,a]=q.useState(),r=q.useRef(null),s=q.useRef(t),o=q.useRef("none"),c=t?"mounted":"unmounted",[u,h]=j_(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return q.useEffect(()=>{const f=Ko(r.current);o.current=u==="mounted"?f:"none"},[u]),zs(()=>{const f=r.current,p=s.current;if(p!==t){const y=o.current,g=Ko(f);t?h("MOUNT"):g==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(p&&y!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),zs(()=>{if(e){let f;const p=e.ownerDocument.defaultView??window,b=g=>{const C=Ko(r.current).includes(g.animationName);if(g.target===e&&C&&(h("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",f=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=g=>{g.target===e&&(o.current=Ko(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",b),e.addEventListener("animationend",b),()=>{p.clearTimeout(f),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",b),e.removeEventListener("animationend",b)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:q.useCallback(f=>{r.current=f?getComputedStyle(f):null,a(f)},[])}}function Ko(t){return(t==null?void 0:t.animationName)||"none"}function H_(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,a=e&&"isReactWarning"in e&&e.isReactWarning;return a?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,a=e&&"isReactWarning"in e&&e.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Nu=0;function q_(){q.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??d0()),document.body.insertAdjacentElement("beforeend",t[1]??d0()),Nu++,()=>{Nu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Nu--}},[])}function d0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wn=function(){return wn=Object.assign||function(e){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},wn.apply(this,arguments)};function Mg(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a}function Y_(t,e,a){if(a||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var sl="right-scroll-bar-position",ol="width-before-scroll-bar",K_="with-scroll-bars-hidden",X_="--removed-body-scroll-bar-size";function Du(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Z_(t,e){var a=q.useState(function(){return{value:t,callback:e,facade:{get current(){return a.value},set current(r){var s=a.value;s!==r&&(a.value=r,a.callback(r,s))}}}})[0];return a.callback=e,a.facade}var Q_=typeof window<"u"?q.useLayoutEffect:q.useEffect,h0=new WeakMap;function W_(t,e){var a=Z_(null,function(r){return t.forEach(function(s){return Du(s,r)})});return Q_(function(){var r=h0.get(a);if(r){var s=new Set(r),o=new Set(t),c=a.current;s.forEach(function(u){o.has(u)||Du(u,null)}),o.forEach(function(u){s.has(u)||Du(u,c)})}h0.set(a,t)},[t]),a}function J_(t){return t}function $_(t,e){e===void 0&&(e=J_);var a=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(o){var c=e(o,r);return a.push(c),function(){a=a.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(r=!0;a.length;){var c=a;a=[],c.forEach(o)}a={push:function(u){return o(u)},filter:function(){return a}}},assignMedium:function(o){r=!0;var c=[];if(a.length){var u=a;a=[],u.forEach(o),c=a}var h=function(){var p=c;c=[],p.forEach(o)},f=function(){return Promise.resolve().then(h)};f(),a={push:function(p){c.push(p),f()},filter:function(p){return c=c.filter(p),a}}}};return s}function e4(t){t===void 0&&(t={});var e=$_(null);return e.options=wn({async:!0,ssr:!1},t),e}var Ag=function(t){var e=t.sideCar,a=Mg(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return q.createElement(r,wn({},a))};Ag.isSideCarExport=!0;function t4(t,e){return t.useMedium(e),Ag}var Og=e4(),ku=function(){},zl=q.forwardRef(function(t,e){var a=q.useRef(null),r=q.useState({onScrollCapture:ku,onWheelCapture:ku,onTouchMoveCapture:ku}),s=r[0],o=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,p=t.enabled,b=t.shards,y=t.sideCar,g=t.noRelative,v=t.noIsolation,C=t.inert,E=t.allowPinchZoom,O=t.as,x=O===void 0?"div":O,_=t.gapMode,T=Mg(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=y,k=W_([a,e]),G=wn(wn({},T),s);return q.createElement(q.Fragment,null,p&&q.createElement(M,{sideCar:Og,removeScrollBar:f,shards:b,noRelative:g,noIsolation:v,inert:C,setCallbacks:o,allowPinchZoom:!!E,lockRef:a,gapMode:_}),c?q.cloneElement(q.Children.only(u),wn(wn({},G),{ref:k})):q.createElement(x,wn({},G,{className:h,ref:k}),u))});zl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zl.classNames={fullWidth:ol,zeroRight:sl};var n4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function i4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=n4();return e&&t.setAttribute("nonce",e),t}function a4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function r4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var s4=function(){var t=0,e=null;return{add:function(a){t==0&&(e=i4())&&(a4(e,a),r4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},o4=function(){var t=s4();return function(e,a){q.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&a])}},Ng=function(){var t=o4(),e=function(a){var r=a.styles,s=a.dynamic;return t(r,s),null};return e},l4={left:0,top:0,right:0,gap:0},Pu=function(t){return parseInt(t||"",10)||0},c4=function(t){var e=window.getComputedStyle(document.body),a=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Pu(a),Pu(r),Pu(s)]},u4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return l4;var e=c4(t),a=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-a+e[2]-e[0])}},d4=Ng(),Ja="data-scroll-locked",h4=function(t,e,a,r){var s=t.left,o=t.top,c=t.right,u=t.gap;return a===void 0&&(a="margin"),`
  .`.concat(K_,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Ja,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),a==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),a==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sl,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(ol,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(sl," .").concat(sl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ol," .").concat(ol,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ja,`] {
    `).concat(X_,": ").concat(u,`px;
  }
`)},f0=function(){var t=parseInt(document.body.getAttribute(Ja)||"0",10);return isFinite(t)?t:0},f4=function(){q.useEffect(function(){return document.body.setAttribute(Ja,(f0()+1).toString()),function(){var t=f0()-1;t<=0?document.body.removeAttribute(Ja):document.body.setAttribute(Ja,t.toString())}},[])},p4=function(t){var e=t.noRelative,a=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;f4();var o=q.useMemo(function(){return u4(s)},[s]);return q.createElement(d4,{styles:h4(o,!e,s,a?"":"!important")})},ld=!1;if(typeof window<"u")try{var Xo=Object.defineProperty({},"passive",{get:function(){return ld=!0,!0}});window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{ld=!1}var Ba=ld?{passive:!1}:!1,m4=function(t){return t.tagName==="TEXTAREA"},Dg=function(t,e){if(!(t instanceof Element))return!1;var a=window.getComputedStyle(t);return a[e]!=="hidden"&&!(a.overflowY===a.overflowX&&!m4(t)&&a[e]==="visible")},g4=function(t){return Dg(t,"overflowY")},y4=function(t){return Dg(t,"overflowX")},p0=function(t,e){var a=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=kg(t,r);if(s){var o=Pg(t,r),c=o[1],u=o[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==a.body);return!1},v4=function(t){var e=t.scrollTop,a=t.scrollHeight,r=t.clientHeight;return[e,a,r]},_4=function(t){var e=t.scrollLeft,a=t.scrollWidth,r=t.clientWidth;return[e,a,r]},kg=function(t,e){return t==="v"?g4(e):y4(e)},Pg=function(t,e){return t==="v"?v4(e):_4(e)},b4=function(t,e){return t==="h"&&e==="rtl"?-1:1},S4=function(t,e,a,r,s){var o=b4(t,window.getComputedStyle(e).direction),c=o*r,u=a.target,h=e.contains(u),f=!1,p=c>0,b=0,y=0;do{if(!u)break;var g=Pg(t,u),v=g[0],C=g[1],E=g[2],O=C-E-o*v;(v||O)&&kg(t,u)&&(b+=O,y+=v);var x=u.parentNode;u=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(p&&Math.abs(b)<1||!p&&Math.abs(y)<1)&&(f=!0),f},Zo=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},m0=function(t){return[t.deltaX,t.deltaY]},g0=function(t){return t&&"current"in t?t.current:t},C4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},x4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},E4=0,ja=[];function T4(t){var e=q.useRef([]),a=q.useRef([0,0]),r=q.useRef(),s=q.useState(E4++)[0],o=q.useState(Ng)[0],c=q.useRef(t);q.useEffect(function(){c.current=t},[t]),q.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var C=Y_([t.lockRef.current],(t.shards||[]).map(g0),!0).filter(Boolean);return C.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=q.useCallback(function(C,E){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!c.current.allowPinchZoom;var O=Zo(C),x=a.current,_="deltaX"in C?C.deltaX:x[0]-O[0],T="deltaY"in C?C.deltaY:x[1]-O[1],M,k=C.target,G=Math.abs(_)>Math.abs(T)?"h":"v";if("touches"in C&&G==="h"&&k.type==="range")return!1;var R=p0(G,k);if(!R)return!0;if(R?M=G:(M=G==="v"?"h":"v",R=p0(G,k)),!R)return!1;if(!r.current&&"changedTouches"in C&&(_||T)&&(r.current=M),!M)return!0;var N=r.current||M;return S4(N,E,C,N==="h"?_:T)},[]),h=q.useCallback(function(C){var E=C;if(!(!ja.length||ja[ja.length-1]!==o)){var O="deltaY"in E?m0(E):Zo(E),x=e.current.filter(function(M){return M.name===E.type&&(M.target===E.target||E.target===M.shadowParent)&&C4(M.delta,O)})[0];if(x&&x.should){E.cancelable&&E.preventDefault();return}if(!x){var _=(c.current.shards||[]).map(g0).filter(Boolean).filter(function(M){return M.contains(E.target)}),T=_.length>0?u(E,_[0]):!c.current.noIsolation;T&&E.cancelable&&E.preventDefault()}}},[]),f=q.useCallback(function(C,E,O,x){var _={name:C,delta:E,target:O,should:x,shadowParent:R4(O)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(T){return T!==_})},1)},[]),p=q.useCallback(function(C){a.current=Zo(C),r.current=void 0},[]),b=q.useCallback(function(C){f(C.type,m0(C),C.target,u(C,t.lockRef.current))},[]),y=q.useCallback(function(C){f(C.type,Zo(C),C.target,u(C,t.lockRef.current))},[]);q.useEffect(function(){return ja.push(o),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Ba),document.addEventListener("touchmove",h,Ba),document.addEventListener("touchstart",p,Ba),function(){ja=ja.filter(function(C){return C!==o}),document.removeEventListener("wheel",h,Ba),document.removeEventListener("touchmove",h,Ba),document.removeEventListener("touchstart",p,Ba)}},[]);var g=t.removeScrollBar,v=t.inert;return q.createElement(q.Fragment,null,v?q.createElement(o,{styles:x4(s)}):null,g?q.createElement(p4,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function R4(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const M4=t4(Og,T4);var wg=q.forwardRef(function(t,e){return q.createElement(zl,wn({},t,{ref:e,sideCar:M4}))});wg.classNames=zl.classNames;var A4=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ia=new WeakMap,Qo=new WeakMap,Wo={},wu=0,zg=function(t){return t&&(t.host||zg(t.parentNode))},O4=function(t,e){return e.map(function(a){if(t.contains(a))return a;var r=zg(a);return r&&t.contains(r)?r:(console.error("aria-hidden",a,"in not contained inside",t,". Doing nothing"),null)}).filter(function(a){return!!a})},N4=function(t,e,a,r){var s=O4(e,Array.isArray(t)?t:[t]);Wo[a]||(Wo[a]=new WeakMap);var o=Wo[a],c=[],u=new Set,h=new Set(s),f=function(b){!b||u.has(b)||(u.add(b),f(b.parentNode))};s.forEach(f);var p=function(b){!b||h.has(b)||Array.prototype.forEach.call(b.children,function(y){if(u.has(y))p(y);else try{var g=y.getAttribute(r),v=g!==null&&g!=="false",C=(Ia.get(y)||0)+1,E=(o.get(y)||0)+1;Ia.set(y,C),o.set(y,E),c.push(y),C===1&&v&&Qo.set(y,!0),E===1&&y.setAttribute(a,"true"),v||y.setAttribute(r,"true")}catch(O){console.error("aria-hidden: cannot operate on ",y,O)}})};return p(e),u.clear(),wu++,function(){c.forEach(function(b){var y=Ia.get(b)-1,g=o.get(b)-1;Ia.set(b,y),o.set(b,g),y||(Qo.has(b)||b.removeAttribute(r),Qo.delete(b)),g||b.removeAttribute(a)}),wu--,wu||(Ia=new WeakMap,Ia=new WeakMap,Qo=new WeakMap,Wo={})}},D4=function(t,e,a){a===void 0&&(a="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=A4(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),N4(r,s,a,"aria-hidden")):function(){return null}},Ul="Dialog",[Ug,Lg]=vg(Ul),[k4,An]=Ug(Ul),Gg=t=>{const{__scopeDialog:e,children:a,open:r,defaultOpen:s,onOpenChange:o,modal:c=!0}=t,u=q.useRef(null),h=q.useRef(null),[f,p]=m_({prop:r,defaultProp:s??!1,onChange:o,caller:Ul});return ne.jsx(k4,{scope:e,triggerRef:u,contentRef:h,contentId:Mu(),titleId:Mu(),descriptionId:Mu(),open:f,onOpenChange:p,onOpenToggle:q.useCallback(()=>p(b=>!b),[p]),modal:c,children:a})};Gg.displayName=Ul;var Fg="DialogTrigger",Vg=q.forwardRef((t,e)=>{const{__scopeDialog:a,...r}=t,s=An(Fg,a),o=ai(e,s.triggerRef);return ne.jsx(Gn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Xd(s.open),...r,ref:o,onClick:ni(t.onClick,s.onOpenToggle)})});Vg.displayName=Fg;var Yd="DialogPortal",[P4,Bg]=Ug(Yd,{forceMount:void 0}),jg=t=>{const{__scopeDialog:e,forceMount:a,children:r,container:s}=t,o=An(Yd,e);return ne.jsx(P4,{scope:e,forceMount:a,children:q.Children.map(r,c=>ne.jsx(wl,{present:a||o.open,children:ne.jsx(Rg,{asChild:!0,container:s,children:c})}))})};jg.displayName=Yd;var yl="DialogOverlay",Ig=q.forwardRef((t,e)=>{const a=Bg(yl,t.__scopeDialog),{forceMount:r=a.forceMount,...s}=t,o=An(yl,t.__scopeDialog);return o.modal?ne.jsx(wl,{present:r||o.open,children:ne.jsx(z4,{...s,ref:e})}):null});Ig.displayName=yl;var w4=qd("DialogOverlay.RemoveScroll"),z4=q.forwardRef((t,e)=>{const{__scopeDialog:a,...r}=t,s=An(yl,a);return ne.jsx(wg,{as:w4,allowPinchZoom:!0,shards:[s.contentRef],children:ne.jsx(Gn.div,{"data-state":Xd(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),na="DialogContent",Hg=q.forwardRef((t,e)=>{const a=Bg(na,t.__scopeDialog),{forceMount:r=a.forceMount,...s}=t,o=An(na,t.__scopeDialog);return ne.jsx(wl,{present:r||o.open,children:o.modal?ne.jsx(U4,{...s,ref:e}):ne.jsx(L4,{...s,ref:e})})});Hg.displayName=na;var U4=q.forwardRef((t,e)=>{const a=An(na,t.__scopeDialog),r=q.useRef(null),s=ai(e,a.contentRef,r);return q.useEffect(()=>{const o=r.current;if(o)return D4(o)},[]),ne.jsx(qg,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ni(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=a.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ni(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:ni(t.onFocusOutside,o=>o.preventDefault())})}),L4=q.forwardRef((t,e)=>{const a=An(na,t.__scopeDialog),r=q.useRef(!1),s=q.useRef(!1);return ne.jsx(qg,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,o),o.defaultPrevented||(r.current||(u=a.triggerRef.current)==null||u.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=o.target;((f=a.triggerRef.current)==null?void 0:f.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),qg=q.forwardRef((t,e)=>{const{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...c}=t,u=An(na,a),h=q.useRef(null),f=ai(e,h);return q_(),ne.jsxs(ne.Fragment,{children:[ne.jsx(Eg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:ne.jsx(Cg,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Xd(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),ne.jsxs(ne.Fragment,{children:[ne.jsx(F4,{titleId:u.titleId}),ne.jsx(B4,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Kd="DialogTitle",Yg=q.forwardRef((t,e)=>{const{__scopeDialog:a,...r}=t,s=An(Kd,a);return ne.jsx(Gn.h2,{id:s.titleId,...r,ref:e})});Yg.displayName=Kd;var Kg="DialogDescription",Xg=q.forwardRef((t,e)=>{const{__scopeDialog:a,...r}=t,s=An(Kg,a);return ne.jsx(Gn.p,{id:s.descriptionId,...r,ref:e})});Xg.displayName=Kg;var Zg="DialogClose",Qg=q.forwardRef((t,e)=>{const{__scopeDialog:a,...r}=t,s=An(Zg,a);return ne.jsx(Gn.button,{type:"button",...r,ref:e,onClick:ni(t.onClick,()=>s.onOpenChange(!1))})});Qg.displayName=Zg;function Xd(t){return t?"open":"closed"}var Wg="DialogTitleWarning",[G4,Jg]=u_(Wg,{contentName:na,titleName:Kd,docsSlug:"dialog"}),F4=({titleId:t})=>{const e=Jg(Wg),a=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return q.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},V4="DialogDescriptionWarning",B4=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Jg(V4).contentName}}.`;return q.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},j4=Gg,I4=Vg,H4=jg,q4=Ig,Y4=Hg,K4=Yg,X4=Xg,$g=Qg,e1="AlertDialog",[Z4,r9]=vg(e1,[Lg]),ri=Lg(),t1=t=>{const{__scopeAlertDialog:e,...a}=t,r=ri(e);return ne.jsx(j4,{...r,...a,modal:!0})};t1.displayName=e1;var Q4="AlertDialogTrigger",W4=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,...r}=t,s=ri(a);return ne.jsx(I4,{...s,...r,ref:e})});W4.displayName=Q4;var J4="AlertDialogPortal",n1=t=>{const{__scopeAlertDialog:e,...a}=t,r=ri(e);return ne.jsx(H4,{...r,...a})};n1.displayName=J4;var $4="AlertDialogOverlay",i1=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,...r}=t,s=ri(a);return ne.jsx(q4,{...s,...r,ref:e})});i1.displayName=$4;var $a="AlertDialogContent",[e5,t5]=Z4($a),n5=b_("AlertDialogContent"),a1=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,children:r,...s}=t,o=ri(a),c=q.useRef(null),u=ai(e,c),h=q.useRef(null);return ne.jsx(G4,{contentName:$a,titleName:r1,docsSlug:"alert-dialog",children:ne.jsx(e5,{scope:a,cancelRef:h,children:ne.jsxs(Y4,{role:"alertdialog",...o,...s,ref:u,onOpenAutoFocus:ni(s.onOpenAutoFocus,f=>{var p;f.preventDefault(),(p=h.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[ne.jsx(n5,{children:r}),ne.jsx(a5,{contentRef:c})]})})})});a1.displayName=$a;var r1="AlertDialogTitle",s1=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,...r}=t,s=ri(a);return ne.jsx(K4,{...s,...r,ref:e})});s1.displayName=r1;var o1="AlertDialogDescription",l1=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,...r}=t,s=ri(a);return ne.jsx(X4,{...s,...r,ref:e})});l1.displayName=o1;var i5="AlertDialogAction",c1=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,...r}=t,s=ri(a);return ne.jsx($g,{...s,...r,ref:e})});c1.displayName=i5;var u1="AlertDialogCancel",d1=q.forwardRef((t,e)=>{const{__scopeAlertDialog:a,...r}=t,{cancelRef:s}=t5(u1,a),o=ri(a),c=ai(e,s);return ne.jsx($g,{...o,...r,ref:c})});d1.displayName=u1;var a5=({contentRef:t})=>{const e=`\`${$a}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${$a}\` by passing a \`${o1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${$a}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return q.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},r5=t1,s5=n1,o5=i1,l5=a1,c5=c1,u5=d1,d5=s1,h5=l1;const Zd="-",f5=t=>{const e=m5(t),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(Zd);return u[0]===""&&u.length!==1&&u.shift(),h1(u,e)||p5(c)},getConflictingClassGroupIds:(c,u)=>{const h=a[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},h1=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const a=t[0],r=e.nextPart.get(a),s=r?h1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Zd);return(c=e.validators.find(({validator:u})=>u(o)))==null?void 0:c.classGroupId},y0=/^\[(.+)\]$/,p5=t=>{if(y0.test(t)){const e=y0.exec(t)[1],a=e==null?void 0:e.substring(0,e.indexOf(":"));if(a)return"arbitrary.."+a}},m5=t=>{const{theme:e,classGroups:a}=t,r={nextPart:new Map,validators:[]};for(const s in a)cd(a[s],r,s,e);return r},cd=(t,e,a,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:v0(e,s);o.classGroupId=a;return}if(typeof s=="function"){if(g5(s)){cd(s(r),e,a,r);return}e.validators.push({validator:s,classGroupId:a});return}Object.entries(s).forEach(([o,c])=>{cd(c,v0(e,o),a,r)})})},v0=(t,e)=>{let a=t;return e.split(Zd).forEach(r=>{a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a},g5=t=>t.isThemeGetter,y5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,a=new Map,r=new Map;const s=(o,c)=>{a.set(o,c),e++,e>t&&(e=0,r=a,a=new Map)};return{get(o){let c=a.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return s(o,c),c},set(o,c){a.has(o)?a.set(o,c):s(o,c)}}},ud="!",dd=":",v5=dd.length,_5=t=>{const{prefix:e,experimentalParseClassName:a}=t;let r=s=>{const o=[];let c=0,u=0,h=0,f;for(let v=0;v<s.length;v++){let C=s[v];if(c===0&&u===0){if(C===dd){o.push(s.slice(h,v)),h=v+v5;continue}if(C==="/"){f=v;continue}}C==="["?c++:C==="]"?c--:C==="("?u++:C===")"&&u--}const p=o.length===0?s:s.substring(h),b=b5(p),y=b!==p,g=f&&f>h?f-h:void 0;return{modifiers:o,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:g}};if(e){const s=e+dd,o=r;r=c=>c.startsWith(s)?o(c.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(a){const s=r;r=o=>a({className:o,parseClassName:s})}return r},b5=t=>t.endsWith(ud)?t.substring(0,t.length-1):t.startsWith(ud)?t.substring(1):t,S5=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(s.push(...o.sort(),c),o=[]):o.push(c)}),s.push(...o.sort()),s}},C5=t=>({cache:y5(t.cacheSize),parseClassName:_5(t),sortModifiers:S5(t),...f5(t)}),x5=/\s+/,E5=(t,e)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,c=[],u=t.trim().split(x5);let h="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{isExternal:b,modifiers:y,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:C}=a(p);if(b){h=p+(h.length>0?" "+h:h);continue}let E=!!C,O=r(E?v.substring(0,C):v);if(!O){if(!E){h=p+(h.length>0?" "+h:h);continue}if(O=r(v),!O){h=p+(h.length>0?" "+h:h);continue}E=!1}const x=o(y).join(":"),_=g?x+ud:x,T=_+O;if(c.includes(T))continue;c.push(T);const M=s(O,E);for(let k=0;k<M.length;++k){const G=M[k];c.push(_+G)}h=p+(h.length>0?" "+h:h)}return h};function T5(){let t=0,e,a,r="";for(;t<arguments.length;)(e=arguments[t++])&&(a=f1(e))&&(r&&(r+=" "),r+=a);return r}const f1=t=>{if(typeof t=="string")return t;let e,a="";for(let r=0;r<t.length;r++)t[r]&&(e=f1(t[r]))&&(a&&(a+=" "),a+=e);return a};function R5(t,...e){let a,r,s,o=c;function c(h){const f=e.reduce((p,b)=>b(p),t());return a=C5(f),r=a.cache.get,s=a.cache.set,o=u,u(h)}function u(h){const f=r(h);if(f)return f;const p=E5(h,a);return s(h,p),p}return function(){return o(T5.apply(null,arguments))}}const _t=t=>{const e=a=>a[t]||[];return e.isThemeGetter=!0,e},p1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,m1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,M5=/^\d+\/\d+$/,A5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,O5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,N5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,D5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,k5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ha=t=>M5.test(t),Pe=t=>!!t&&!Number.isNaN(Number(t)),Mi=t=>!!t&&Number.isInteger(Number(t)),zu=t=>t.endsWith("%")&&Pe(t.slice(0,-1)),Qn=t=>A5.test(t),P5=()=>!0,w5=t=>O5.test(t)&&!N5.test(t),g1=()=>!1,z5=t=>D5.test(t),U5=t=>k5.test(t),L5=t=>!ge(t)&&!ye(t),G5=t=>lr(t,_1,g1),ge=t=>p1.test(t),Qi=t=>lr(t,b1,w5),Uu=t=>lr(t,I5,Pe),_0=t=>lr(t,y1,g1),F5=t=>lr(t,v1,U5),Jo=t=>lr(t,S1,z5),ye=t=>m1.test(t),Vr=t=>cr(t,b1),V5=t=>cr(t,H5),b0=t=>cr(t,y1),B5=t=>cr(t,_1),j5=t=>cr(t,v1),$o=t=>cr(t,S1,!0),lr=(t,e,a)=>{const r=p1.exec(t);return r?r[1]?e(r[1]):a(r[2]):!1},cr=(t,e,a=!1)=>{const r=m1.exec(t);return r?r[1]?e(r[1]):a:!1},y1=t=>t==="position"||t==="percentage",v1=t=>t==="image"||t==="url",_1=t=>t==="length"||t==="size"||t==="bg-size",b1=t=>t==="length",I5=t=>t==="number",H5=t=>t==="family-name",S1=t=>t==="shadow",q5=()=>{const t=_t("color"),e=_t("font"),a=_t("text"),r=_t("font-weight"),s=_t("tracking"),o=_t("leading"),c=_t("breakpoint"),u=_t("container"),h=_t("spacing"),f=_t("radius"),p=_t("shadow"),b=_t("inset-shadow"),y=_t("text-shadow"),g=_t("drop-shadow"),v=_t("blur"),C=_t("perspective"),E=_t("aspect"),O=_t("ease"),x=_t("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...T(),ye,ge],k=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],R=()=>[ye,ge,h],N=()=>[Ha,"full","auto",...R()],P=()=>[Mi,"none","subgrid",ye,ge],F=()=>["auto",{span:["full",Mi,ye,ge]},Mi,ye,ge],j=()=>[Mi,"auto",ye,ge],Y=()=>["auto","min","max","fr",ye,ge],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...R()],A=()=>[Ha,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],D=()=>[t,ye,ge],U=()=>[...T(),b0,_0,{position:[ye,ge]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",B5,G5,{size:[ye,ge]}],ee=()=>[zu,Vr,Qi],H=()=>["","none","full",f,ye,ge],te=()=>["",Pe,Vr,Qi],ae=()=>["solid","dashed","dotted","double"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>[Pe,zu,b0,_0],Z=()=>["","none",v,ye,ge],se=()=>["none",Pe,ye,ge],ue=()=>["none",Pe,ye,ge],me=()=>[Pe,ye,ge],Se=()=>[Ha,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Qn],breakpoint:[Qn],color:[P5],container:[Qn],"drop-shadow":[Qn],ease:["in","out","in-out"],font:[L5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Qn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Qn],shadow:[Qn],spacing:["px",Pe],text:[Qn],"text-shadow":[Qn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ha,ge,ye,E]}],container:["container"],columns:[{columns:[Pe,ge,ye,u]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Mi,"auto",ye,ge]}],basis:[{basis:[Ha,"full","auto",u,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pe,Ha,"auto","initial","none",ge]}],grow:[{grow:["",Pe,ye,ge]}],shrink:[{shrink:["",Pe,ye,ge]}],order:[{order:[Mi,"first","last","none",ye,ge]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],w:[{w:[u,"screen",...A()]}],"min-w":[{"min-w":[u,"screen","none",...A()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",a,Vr,Qi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ye,Uu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zu,ge]}],"font-family":[{font:[V5,ge,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ye,ge]}],"line-clamp":[{"line-clamp":[Pe,"none",ye,Uu]}],leading:[{leading:[o,...R()]}],"list-image":[{"list-image":["none",ye,ge]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,ge]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pe,"from-font","auto",ye,Qi]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[Pe,"auto",ye,ge]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:U()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mi,ye,ge],radial:["",ye,ge],conic:[Mi,ye,ge]},j5,F5]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pe,ye,ge]}],"outline-w":[{outline:["",Pe,Vr,Qi]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",p,$o,Jo]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",b,$o,Jo]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[Pe,Qi]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",y,$o,Jo]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[Pe,ye,ge]}],"mix-blend":[{"mix-blend":[...J(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":J()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pe]}],"mask-image-linear-from-pos":[{"mask-linear-from":z()}],"mask-image-linear-to-pos":[{"mask-linear-to":z()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":z()}],"mask-image-t-to-pos":[{"mask-t-to":z()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":z()}],"mask-image-r-to-pos":[{"mask-r-to":z()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":z()}],"mask-image-b-to-pos":[{"mask-b-to":z()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":z()}],"mask-image-l-to-pos":[{"mask-l-to":z()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":z()}],"mask-image-x-to-pos":[{"mask-x-to":z()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":z()}],"mask-image-y-to-pos":[{"mask-y-to":z()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[ye,ge]}],"mask-image-radial-from-pos":[{"mask-radial-from":z()}],"mask-image-radial-to-pos":[{"mask-radial-to":z()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[Pe]}],"mask-image-conic-from-pos":[{"mask-conic-from":z()}],"mask-image-conic-to-pos":[{"mask-conic-to":z()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:U()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,ge]}],filter:[{filter:["","none",ye,ge]}],blur:[{blur:Z()}],brightness:[{brightness:[Pe,ye,ge]}],contrast:[{contrast:[Pe,ye,ge]}],"drop-shadow":[{"drop-shadow":["","none",g,$o,Jo]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",Pe,ye,ge]}],"hue-rotate":[{"hue-rotate":[Pe,ye,ge]}],invert:[{invert:["",Pe,ye,ge]}],saturate:[{saturate:[Pe,ye,ge]}],sepia:[{sepia:["",Pe,ye,ge]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,ge]}],"backdrop-blur":[{"backdrop-blur":Z()}],"backdrop-brightness":[{"backdrop-brightness":[Pe,ye,ge]}],"backdrop-contrast":[{"backdrop-contrast":[Pe,ye,ge]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pe,ye,ge]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pe,ye,ge]}],"backdrop-invert":[{"backdrop-invert":["",Pe,ye,ge]}],"backdrop-opacity":[{"backdrop-opacity":[Pe,ye,ge]}],"backdrop-saturate":[{"backdrop-saturate":[Pe,ye,ge]}],"backdrop-sepia":[{"backdrop-sepia":["",Pe,ye,ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,ge]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pe,"initial",ye,ge]}],ease:[{ease:["linear","initial",O,ye,ge]}],delay:[{delay:[Pe,ye,ge]}],animate:[{animate:["none",x,ye,ge]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,ye,ge]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:ue()}],"scale-x":[{"scale-x":ue()}],"scale-y":[{"scale-y":ue()}],"scale-z":[{"scale-z":ue()}],"scale-3d":["scale-3d"],skew:[{skew:me()}],"skew-x":[{"skew-x":me()}],"skew-y":[{"skew-y":me()}],transform:[{transform:[ye,ge,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Se()}],"translate-x":[{"translate-x":Se()}],"translate-y":[{"translate-y":Se()}],"translate-z":[{"translate-z":Se()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,ge]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,ge]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[Pe,Vr,Qi,Uu]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Y5=R5(q5);function vn(...t){return Y5(gg(t))}const S0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,C0=gg,K5=(t,e)=>a=>{var r;if((e==null?void 0:e.variants)==null)return C0(t,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:s,defaultVariants:o}=e,c=Object.keys(s).map(f=>{const p=a==null?void 0:a[f],b=o==null?void 0:o[f];if(p===null)return null;const y=S0(p)||S0(b);return s[f][y]}),u=a&&Object.entries(a).reduce((f,p)=>{let[b,y]=p;return y===void 0||(f[b]=y),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:b,className:y,...g}=p;return Object.entries(g).every(v=>{let[C,E]=v;return Array.isArray(E)?E.includes({...o,...u}[C]):{...o,...u}[C]===E})?[...f,b,y]:f},[]);return C0(t,c,h,a==null?void 0:a.class,a==null?void 0:a.className)},Qd=K5("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function el({className:t,variant:e,size:a,asChild:r=!1,...s}){const o=r?v_:"button";return ne.jsx(o,{"data-slot":"button",className:vn(Qd({variant:e,size:a,className:t})),...s})}function X5({...t}){return ne.jsx(r5,{"data-slot":"alert-dialog",...t})}function Z5({...t}){return ne.jsx(s5,{"data-slot":"alert-dialog-portal",...t})}function Q5({className:t,...e}){return ne.jsx(o5,{"data-slot":"alert-dialog-overlay",className:vn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function W5({className:t,...e}){return ne.jsxs(Z5,{children:[ne.jsx(Q5,{}),ne.jsx(l5,{"data-slot":"alert-dialog-content",className:vn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function J5({className:t,...e}){return ne.jsx("div",{"data-slot":"alert-dialog-header",className:vn("flex flex-col gap-2 text-center sm:text-left",t),...e})}function $5({className:t,...e}){return ne.jsx("div",{"data-slot":"alert-dialog-footer",className:vn("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function e3({className:t,...e}){return ne.jsx(d5,{"data-slot":"alert-dialog-title",className:vn("text-lg font-semibold",t),...e})}function t3({className:t,...e}){return ne.jsx(h5,{"data-slot":"alert-dialog-description",className:vn("text-muted-foreground text-sm",t),...e})}function n3({className:t,...e}){return ne.jsx(c5,{className:vn(Qd(),t),...e})}function i3({className:t,...e}){return ne.jsx(u5,{className:vn(Qd({variant:"outline"}),t),...e})}class a3{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const a of this._parts)e.push(a);return r3(e).buffer}}function r3(t){let e=0;for(const s of t)e+=s.byteLength;const a=new Uint8Array(e);let r=0;for(const s of t){const o=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);a.set(o,r),r+=s.byteLength}return a}function C1(t){return new s3(t).unpack()}function x1(t){const e=new o3,a=e.pack(t);return a instanceof Promise?a.then(()=>e.getBuffer()):e.getBuffer()}class s3{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let a;if((a=e^160)<=15)return this.unpack_raw(a);if((a=e^176)<=15)return this.unpack_string(a);if((a=e^144)<=15)return this.unpack_array(a);if((a=e^128)<=15)return this.unpack_map(a);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return a=this.unpack_uint16(),this.unpack_string(a);case 217:return a=this.unpack_uint32(),this.unpack_string(a);case 218:return a=this.unpack_uint16(),this.unpack_raw(a);case 219:return a=this.unpack_uint32(),this.unpack_raw(a);case 220:return a=this.unpack_uint16(),this.unpack_array(a);case 221:return a=this.unpack_uint32(),this.unpack_array(a);case 222:return a=this.unpack_uint16(),this.unpack_map(a);case 223:return a=this.unpack_uint32(),this.unpack_map(a)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),a=(e[0]&255)*256+(e[1]&255);return this.index+=2,a}unpack_uint32(){const e=this.read(4),a=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,a}unpack_uint64(){const e=this.read(8),a=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,a}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const a=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,a}unpack_string(e){const a=this.read(e);let r=0,s="",o,c;for(;r<e;)o=a[r],o<160?(c=o,r++):(o^192)<32?(c=(o&31)<<6|a[r+1]&63,r+=2):(o^224)<16?(c=(o&15)<<12|(a[r+1]&63)<<6|a[r+2]&63,r+=3):(c=(o&7)<<18|(a[r+1]&63)<<12|(a[r+2]&63)<<6|a[r+3]&63,r+=4),s+=String.fromCodePoint(c);return this.index+=e,s}unpack_array(e){const a=new Array(e);for(let r=0;r<e;r++)a[r]=this.unpack();return a}unpack_map(e){const a={};for(let r=0;r<e;r++){const s=this.unpack();a[s]=this.unpack()}return a}unpack_float(){const e=this.unpack_uint32(),a=e>>31,r=(e>>23&255)-127,s=e&8388607|8388608;return(a===0?1:-1)*s*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),a=this.unpack_uint32(),r=e>>31,s=(e>>20&2047)-1023,c=(e&1048575|1048576)*2**(s-20)+a*2**(s-52);return(r===0?1:-1)*c}read(e){const a=this.index;if(a+e<=this.length)return this.dataView.subarray(a,a+e);throw new Error("BinaryPackFailure: read index out of range")}}class o3{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const a=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(a==Object||a.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${a.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const a=e.length;if(a<=15)this.pack_uint8(160+a);else if(a<=65535)this._bufferBuilder.append(218),this.pack_uint16(a);else if(a<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(a);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const a=this._textEncoder.encode(e),r=a.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(a)}pack_array(e){const a=e.length;if(a<=15)this.pack_uint8(144+a);else if(a<=65535)this._bufferBuilder.append(220),this.pack_uint16(a);else if(a<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(a);else throw new Error("Invalid length");const r=s=>{if(s<a){const o=this.pack(e[s]);return o instanceof Promise?o.then(()=>r(s+1)):r(s+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let a=0;e<0&&(a=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),s=e/2**r-1,o=Math.floor(s*2**52),c=2**32,u=a<<31|r+1023<<20|o/c&1048575,h=o%c;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(h)}pack_object(e){const a=Object.keys(e),r=a.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const s=o=>{if(o<a.length){const c=a[o];if(e.hasOwnProperty(c)){this.pack(c);const u=this.pack(e[c]);if(u instanceof Promise)return u.then(()=>s(o+1))}return s(o+1)}};return s(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const a=e&4294967295;this._bufferBuilder.append((a&4278190080)>>>24),this._bufferBuilder.append((a&16711680)>>>16),this._bufferBuilder.append((a&65280)>>>8),this._bufferBuilder.append(a&255)}pack_uint64(e){const a=e/4294967296,r=e%2**32;this._bufferBuilder.append((a&4278190080)>>>24),this._bufferBuilder.append((a&16711680)>>>16),this._bufferBuilder.append((a&65280)>>>8),this._bufferBuilder.append(a&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const a=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((a&4278190080)>>>24),this._bufferBuilder.append((a&16711680)>>>16),this._bufferBuilder.append((a&65280)>>>8),this._bufferBuilder.append(a&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new a3,this._textEncoder=new TextEncoder}}let E1=!0,T1=!0;function Ns(t,e,a){const r=t.match(e);return r&&r.length>=a&&parseFloat(r[a],10)}function la(t,e,a){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(c,u){if(c!==e)return s.apply(this,arguments);const h=f=>{const p=a(f);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,h),s.apply(this,[c,h])};const o=r.removeEventListener;r.removeEventListener=function(c,u){if(c!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(u))return o.apply(this,arguments);const h=this._eventMap[e].get(u);return this._eventMap[e].delete(u),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[c,h])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function l3(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(E1=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function c3(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(T1=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function R1(){if(typeof window=="object"){if(E1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Wd(t,e){T1&&console.warn(t+" is deprecated, please use "+e+" instead.")}function u3(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:a}=t;if(a.userAgentData&&a.userAgentData.brands){const r=a.userAgentData.brands.find(s=>s.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(a.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Ns(a.userAgent,/Firefox\/(\d+)\./,1));else if(a.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Ns(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&a.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Ns(a.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Ns(a.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function x0(t){return Object.prototype.toString.call(t)==="[object Object]"}function M1(t){return x0(t)?Object.keys(t).reduce(function(e,a){const r=x0(t[a]),s=r?M1(t[a]):t[a],o=r&&!Object.keys(s).length;return s===void 0||o?e:Object.assign(e,{[a]:s})},{}):t}function hd(t,e,a){!e||a.has(e.id)||(a.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?hd(t,t.get(e[r]),a):r.endsWith("Ids")&&e[r].forEach(s=>{hd(t,t.get(s),a)})}))}function E0(t,e,a){const r=a?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const o=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&o.push(c)}),o.forEach(c=>{t.forEach(u=>{u.type===r&&u.trackId===c.id&&hd(t,u,s)})}),s}const T0=R1;function A1(t,e){const a=t&&t.navigator;if(!a.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const h={};return Object.keys(u).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const p=typeof u[f]=="object"?u[f]:{ideal:u[f]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const b=function(y,g){return y?y+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(p.ideal!==void 0){h.optional=h.optional||[];let y={};typeof p.ideal=="number"?(y[b("min",f)]=p.ideal,h.optional.push(y),y={},y[b("max",f)]=p.ideal,h.optional.push(y)):(y[b("",f)]=p.ideal,h.optional.push(y))}p.exact!==void 0&&typeof p.exact!="number"?(h.mandatory=h.mandatory||{},h.mandatory[b("",f)]=p.exact):["min","max"].forEach(y=>{p[y]!==void 0&&(h.mandatory=h.mandatory||{},h.mandatory[b(y,f)]=p[y])})}),u.advanced&&(h.optional=(h.optional||[]).concat(u.advanced)),h},s=function(u,h){if(e.version>=61)return h(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const f=function(p,b,y){b in p&&!(y in p)&&(p[y]=p[b],delete p[b])};u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","googAutoGainControl"),f(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let f=u.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const p=e.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(a.mediaDevices.getSupportedConstraints&&a.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let b;if(f.exact==="environment"||f.ideal==="environment"?b=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(b=["front"]),b)return a.mediaDevices.enumerateDevices().then(y=>{y=y.filter(v=>v.kind==="videoinput");let g=y.find(v=>b.some(C=>v.label.toLowerCase().includes(C)));return!g&&y.length&&b.includes("back")&&(g=y[y.length-1]),g&&(u.video.deviceId=f.exact?{exact:g.deviceId}:{ideal:g.deviceId}),u.video=r(u.video),T0("chrome: "+JSON.stringify(u)),h(u)})}u.video=r(u.video)}return T0("chrome: "+JSON.stringify(u)),h(u)},o=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(u,h,f){s(u,p=>{a.webkitGetUserMedia(p,h,b=>{f&&f(o(b))})})};if(a.getUserMedia=c.bind(a),a.mediaDevices.getUserMedia){const u=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(h){return s(h,f=>u(f).then(p=>{if(f.audio&&!p.getAudioTracks().length||f.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(o(p))))}}}function O1(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function N1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(a){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=a)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===s.track.id):o={track:s.track};const c=new Event("track");c.track=s.track,c.receiver=o,c.transceiver={receiver:o},c.streams=[r.stream],this.dispatchEvent(c)}),r.stream.getTracks().forEach(s=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(u=>u.track&&u.track.id===s.id):o={track:s};const c=new Event("track");c.track=s,c.receiver=o,c.transceiver={receiver:o},c.streams=[r.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else la(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function D1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=s.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){let f=s.apply(this,arguments);return f||(f=e(this,u),this._senders.push(f)),f};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){o.apply(this,arguments);const h=this._senders.indexOf(u);h!==-1&&this._senders.splice(h,1)}}const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],a.apply(this,[o]),o.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(c=>{const u=this._senders.find(h=>h.track===c);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function k1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const a=t.RTCPeerConnection.prototype.getSenders;a&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=a.apply(this,[]);return o.forEach(c=>c._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(c=>E0(c,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const a=t.RTCPeerConnection.prototype.getReceivers;a&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=a.apply(this,[]);return s.forEach(o=>o._pc=this),s}),la(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>E0(o,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let s,o,c;return this.getSenders().forEach(u=>{u.track===r&&(s?c=!0:s=u)}),this.getReceivers().forEach(u=>(u.track===r&&(o?c=!0:o=u),u.track===r)),c||s&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function P1(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,u){if(!u)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const h=e.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(h)===-1&&this._shimmedLocalStreams[u.id].push(h):this._shimmedLocalStreams[u.id]=[u,h],h};const a=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(f=>{if(this.getSenders().find(b=>b.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();a.apply(this,arguments);const h=this.getSenders().filter(f=>u.indexOf(f)===-1);this._shimmedLocalStreams[c.id]=[c].concat(h)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],r.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const h=this._shimmedLocalStreams[u].indexOf(c);h!==-1&&this._shimmedLocalStreams[u].splice(h,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),s.apply(this,arguments)}}function w1(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return P1(t);const a=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const p=a.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(b=>this._reverseStreams[b.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(b=>{if(this.getSenders().find(g=>g.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const b=new t.MediaStream(p.getTracks());this._streams[p.id]=b,this._reverseStreams[b.id]=p,p=b}r.apply(this,[p])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},t.RTCPeerConnection.prototype.addTrack=function(p,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(C=>C===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const v=this._streams[b.id];if(v)v.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new t.MediaStream([p]);this._streams[b.id]=C,this._reverseStreams[C.id]=b,this.addStream(C)}return this.getSenders().find(C=>C.track===p)};function o(f,p){let b=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(y=>{const g=f._reverseStreams[y],v=f._streams[g.id];b=b.replace(new RegExp(v.id,"g"),g.id)}),new RTCSessionDescription({type:p.type,sdp:b})}function c(f,p){let b=p.sdp;return Object.keys(f._reverseStreams||[]).forEach(y=>{const g=f._reverseStreams[y],v=f._streams[g.id];b=b.replace(new RegExp(g.id,"g"),v.id)}),new RTCSessionDescription({type:p.type,sdp:b})}["createOffer","createAnswer"].forEach(function(f){const p=t.RTCPeerConnection.prototype[f],b={[f](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[v=>{const C=o(this,v);y[0].apply(null,[C])},v=>{y[1]&&y[1].apply(null,v)},arguments[2]]):p.apply(this,arguments).then(v=>o(this,v))}};t.RTCPeerConnection.prototype[f]=b[f]});const u=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=c(this,arguments[0]),u.apply(this,arguments))};const h=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const f=h.get.apply(this);return f.type===""?f:o(this,f)}}),t.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(C=>p.track===C)&&(y=this._streams[g])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function fd(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const r=t.RTCPeerConnection.prototype[a],s={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=s[a]})}function z1(t,e){la(t,"negotiationneeded",a=>{const r=a.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return a})}const R0=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:z1,shimAddTrackRemoveTrack:w1,shimAddTrackRemoveTrackWithNative:P1,shimGetSendersWithDtmf:D1,shimGetUserMedia:A1,shimMediaStream:O1,shimOnTrack:N1,shimPeerConnection:fd,shimSenderReceiverGetStats:k1},Symbol.toStringTag,{value:"Module"}));function U1(t,e){const a=t&&t.navigator,r=t&&t.MediaStreamTrack;if(a.getUserMedia=function(s,o,c){Wd("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(s).then(o,c)},!(e.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){const s=function(c,u,h){u in c&&!(h in c)&&(c[h]=c[u],delete c[u])},o=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),s(c.audio,"autoGainControl","mozAutoGainControl"),s(c.audio,"noiseSuppression","mozNoiseSuppression")),o(c)},r&&r.prototype.getSettings){const c=r.prototype.getSettings;r.prototype.getSettings=function(){const u=c.apply(this,arguments);return s(u,"mozAutoGainControl","autoGainControl"),s(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const c=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),s(u,"autoGainControl","mozAutoGainControl"),s(u,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[u])}}}}function d3(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function L1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function pd(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const o=t.RTCPeerConnection.prototype[s],c={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=c[s]});const a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,c,u]=arguments;return r.apply(this,[o||null]).then(h=>{if(e.version<53&&!c)try{h.forEach(f=>{f.type=a[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;h.forEach((p,b)=>{h.set(b,Object.assign({},p,{type:a[p.type]||p.type}))})}return h}).then(c,u)}}function G1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(o=>o._pc=this),s});const a=t.RTCPeerConnection.prototype.addTrack;a&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=a.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function F1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),la(t,"track",a=>(a.receiver._pc=a.srcElement,a)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function V1(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(a){Wd("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&a.getTracks().includes(r.track)&&this.removeTrack(r)})})}function B1(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function j1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const s=r.length>0;s&&r.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(s){const{sender:c}=o,u=c.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,c.sendEncodings=r,this.setParametersPromises.push(c.setParameters(u).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return o})}function I1(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function H1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function q1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const M0=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:j1,shimCreateAnswer:q1,shimCreateOffer:H1,shimGetDisplayMedia:d3,shimGetParameters:I1,shimGetUserMedia:U1,shimOnTrack:L1,shimPeerConnection:pd,shimRTCDataChannel:B1,shimReceiverGetStats:F1,shimRemoveStream:V1,shimSenderGetStats:G1},Symbol.toStringTag,{value:"Module"}));function Y1(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...s){return s&&s.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(a){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(a);if(r===-1)return;this._localStreams.splice(r,1);const s=a.getTracks();this.getSenders().forEach(o=>{s.includes(o.track)&&this.removeTrack(o)})})}}function K1(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(a){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const c=new Event("addstream");c.stream=o,r.dispatchEvent(c)})}),e.apply(r,arguments)}}}function X1(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,a=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,o=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(f,p){const b=arguments.length>=2?arguments[2]:arguments[0],y=a.apply(this,[b]);return p?(y.then(f,p),Promise.resolve()):y},e.createAnswer=function(f,p){const b=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[b]);return p?(y.then(f,p),Promise.resolve()):y};let u=function(h,f,p){const b=s.apply(this,[h]);return p?(b.then(f,p),Promise.resolve()):b};e.setLocalDescription=u,u=function(h,f,p){const b=o.apply(this,[h]);return p?(b.then(f,p),Promise.resolve()):b},e.setRemoteDescription=u,u=function(h,f,p){const b=c.apply(this,[h]);return p?(b.then(f,p),Promise.resolve()):b},e.addIceCandidate=u}function Z1(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const a=e.mediaDevices,r=a.getUserMedia.bind(a);e.mediaDevices.getUserMedia=s=>r(Q1(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,s,o){e.mediaDevices.getUserMedia(r).then(s,o)}).bind(e))}function Q1(t){return t&&t.video!==void 0?Object.assign({},t,{video:M1(t.video)}):t}function W1(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const o=[];for(let c=0;c<r.iceServers.length;c++){let u=r.iceServers[c];u.urls===void 0&&u.url?(Wd("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,o.push(u)):o.push(r.iceServers[c])}r.iceServers=o}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function J1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $1(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(c=>c.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ey(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const A0=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ey,shimCallbacksAPI:X1,shimConstraints:Q1,shimCreateOfferLegacy:$1,shimGetUserMedia:Z1,shimLocalStreamsAPI:Y1,shimRTCIceServerUrls:W1,shimRemoteStreamsAPI:K1,shimTrackEventTransceiver:J1},Symbol.toStringTag,{value:"Module"}));var Lu={exports:{}},O0;function h3(){return O0||(O0=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(a){return a.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(a){return a.split(`
m=`).map((s,o)=>(o>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(a){const r=e.splitSections(a);return r&&r[0]},e.getMediaSections=function(a){const r=e.splitSections(a);return r.shift(),r},e.matchPrefix=function(a,r){return e.splitLines(a).filter(s=>s.indexOf(r)===0)},e.parseCandidate=function(a){let r;a.indexOf("a=candidate:")===0?r=a.substring(12).split(" "):r=a.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":s.relatedAddress=r[o+1];break;case"rport":s.relatedPort=parseInt(r[o+1],10);break;case"tcptype":s.tcpType=r[o+1];break;case"ufrag":s.ufrag=r[o+1],s.usernameFragment=r[o+1];break;default:s[r[o]]===void 0&&(s[r[o]]=r[o+1]);break}return s},e.writeCandidate=function(a){const r=[];r.push(a.foundation);const s=a.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(a.protocol.toUpperCase()),r.push(a.priority),r.push(a.address||a.ip),r.push(a.port);const o=a.type;return r.push("typ"),r.push(o),o!=="host"&&a.relatedAddress&&a.relatedPort&&(r.push("raddr"),r.push(a.relatedAddress),r.push("rport"),r.push(a.relatedPort)),a.tcpType&&a.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(r.push("ufrag"),r.push(a.usernameFragment||a.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(a){return a.substring(14).split(" ")},e.parseRtpMap=function(a){let r=a.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(a){let r=a.payloadType;a.preferredPayloadType!==void 0&&(r=a.preferredPayloadType);const s=a.channels||a.numChannels||1;return"a=rtpmap:"+r+" "+a.name+"/"+a.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(a){const r=a.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&a.direction!=="sendrecv"?"/"+a.direction:"")+" "+a.uri+(a.attributes?" "+a.attributes:"")+`\r
`},e.parseFmtp=function(a){const r={};let s;const o=a.substring(a.indexOf(" ")+1).split(";");for(let c=0;c<o.length;c++)s=o[c].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(a){let r="",s=a.payloadType;if(a.preferredPayloadType!==void 0&&(s=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){const o=[];Object.keys(a.parameters).forEach(c=>{a.parameters[c]!==void 0?o.push(c+"="+a.parameters[c]):o.push(c)}),r+="a=fmtp:"+s+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(a){const r=a.substring(a.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(a){let r="",s=a.payloadType;return a.preferredPayloadType!==void 0&&(s=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+s+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(a){const r=a.indexOf(" "),s={ssrc:parseInt(a.substring(7,r),10)},o=a.indexOf(":",r);return o>-1?(s.attribute=a.substring(r+1,o),s.value=a.substring(o+1)):s.attribute=a.substring(r+1),s},e.parseSsrcGroup=function(a){const r=a.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},e.getMid=function(a){const r=e.matchPrefix(a,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(a){const r=a.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(a,r){return{role:"auto",fingerprints:e.matchPrefix(a+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(a,r){let s="a=setup:"+r+`\r
`;return a.fingerprints.forEach(o=>{s+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),s},e.parseCryptoLine=function(a){const r=a.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(a){return"a=crypto:"+a.tag+" "+a.cryptoSuite+" "+(typeof a.keyParams=="object"?e.writeCryptoKeyParams(a.keyParams):a.keyParams)+(a.sessionParams?" "+a.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(a){if(a.indexOf("inline:")!==0)return null;const r=a.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(a){return a.keyMethod+":"+a.keySalt+(a.lifeTime?"|"+a.lifeTime:"")+(a.mkiValue&&a.mkiLength?"|"+a.mkiValue+":"+a.mkiLength:"")},e.getCryptoParameters=function(a,r){return e.matchPrefix(a+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(a,r){const s=e.matchPrefix(a+r,"a=ice-ufrag:")[0],o=e.matchPrefix(a+r,"a=ice-pwd:")[0];return s&&o?{usernameFragment:s.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(a){let r="a=ice-ufrag:"+a.usernameFragment+`\r
a=ice-pwd:`+a.password+`\r
`;return a.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(a){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(a)[0].split(" ");r.profile=o[2];for(let u=3;u<o.length;u++){const h=o[u],f=e.matchPrefix(a,"a=rtpmap:"+h+" ")[0];if(f){const p=e.parseRtpMap(f),b=e.matchPrefix(a,"a=fmtp:"+h+" ");switch(p.parameters=b.length?e.parseFmtp(b[0]):{},p.rtcpFeedback=e.matchPrefix(a,"a=rtcp-fb:"+h+" ").map(e.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}e.matchPrefix(a,"a=extmap:").forEach(u=>{r.headerExtensions.push(e.parseExtmap(u))});const c=e.matchPrefix(a,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(u=>{c.forEach(h=>{u.rtcpFeedback.find(p=>p.type===h.type&&p.parameter===h.parameter)||u.rtcpFeedback.push(h)})}),r},e.writeRtpDescription=function(a,r){let s="";s+="m="+a+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(c=>{s+=e.writeRtpMap(c),s+=e.writeFmtp(c),s+=e.writeRtcpFb(c)});let o=0;return r.codecs.forEach(c=>{c.maxptime>o&&(o=c.maxptime)}),o>0&&(s+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(c=>{s+=e.writeExtmap(c)}),s},e.parseRtpEncodingParameters=function(a){const r=[],s=e.parseRtpParameters(a),o=s.fecMechanisms.indexOf("RED")!==-1,c=s.fecMechanisms.indexOf("ULPFEC")!==-1,u=e.matchPrefix(a,"a=ssrc:").map(y=>e.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),h=u.length>0&&u[0].ssrc;let f;const p=e.matchPrefix(a,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(v=>parseInt(v,10)));p.length>0&&p[0].length>1&&p[0][0]===h&&(f=p[0][1]),s.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let g={ssrc:h,codecPayloadType:parseInt(y.parameters.apt,10)};h&&f&&(g.rtx={ssrc:f}),r.push(g),o&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:h,mechanism:c?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&h&&r.push({ssrc:h});let b=e.matchPrefix(a,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substring(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substring(5),10)*1e3*.95-2e3*8:b=void 0,r.forEach(y=>{y.maxBitrate=b})),r},e.parseRtcpParameters=function(a){const r={},s=e.matchPrefix(a,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const o=e.matchPrefix(a,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const c=e.matchPrefix(a,"a=rtcp-mux");return r.mux=c.length>0,r},e.writeRtcpParameters=function(a){let r="";return a.reducedSize&&(r+=`a=rtcp-rsize\r
`),a.mux&&(r+=`a=rtcp-mux\r
`),a.ssrc!==void 0&&a.cname&&(r+="a=ssrc:"+a.ssrc+" cname:"+a.cname+`\r
`),r},e.parseMsid=function(a){let r;const s=e.matchPrefix(a,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(a,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(a){const r=e.parseMLine(a),s=e.matchPrefix(a,"a=max-message-size:");let o;s.length>0&&(o=parseInt(s[0].substring(19),10)),isNaN(o)&&(o=65536);const c=e.matchPrefix(a,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const u=e.matchPrefix(a,"a=sctpmap:");if(u.length>0){const h=u[0].substring(10).split(" ");return{port:parseInt(h[0],10),protocol:h[1],maxMessageSize:o}}},e.writeSctpDescription=function(a,r){let s=[];return a.protocol!=="DTLS/SCTP"?s=["m="+a.kind+" 9 "+a.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+a.kind+" 9 "+a.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(a,r,s){let o;const c=r!==void 0?r:2;return a?o=a:o=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+o+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(a,r){const s=e.splitLines(a);for(let o=0;o<s.length;o++)switch(s[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(a){return e.splitLines(a)[0].split(" ")[0].substring(2)},e.isRejected=function(a){return a.split(" ",2)[1]==="0"},e.parseMLine=function(a){const s=e.splitLines(a)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(a){const s=e.matchPrefix(a,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(a){if(typeof a!="string"||a.length===0)return!1;const r=e.splitLines(a);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},t.exports=e}(Lu)),Lu.exports}var ty=h3();const er=Hd(ty),f3=o_({__proto__:null,default:er},[ty]);function ll(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const s=new e(r),o=er.parseCandidate(r.candidate);for(const c in o)c in s||Object.defineProperty(s,c,{value:o[c]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,la(t,"icecandidate",a=>(a.candidate&&Object.defineProperty(a,"candidate",{value:new t.RTCIceCandidate(a.candidate),writable:"false"}),a))}function md(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||la(t,"icecandidate",e=>{if(e.candidate){const a=er.parseCandidate(e.candidate.candidate);a.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[a.priority>>24])}return e})}function cl(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const a=function(u){if(!u||!u.sdp)return!1;const h=er.splitSections(u.sdp);return h.shift(),h.some(f=>{const p=er.parseMLine(f);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const h=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(h===null||h.length<2)return-1;const f=parseInt(h[1],10);return f!==f?-1:f},s=function(u){let h=65536;return e.browser==="firefox"&&(e.version<57?u===-1?h=16384:h=2147483637:e.version<60?h=e.version===57?65535:65536:h=2147483637),h},o=function(u,h){let f=65536;e.browser==="firefox"&&e.version===57&&(f=65535);const p=er.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?f=parseInt(p[0].substring(19),10):e.browser==="firefox"&&h!==-1&&(f=2147483637),f},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:h}=this.getConfiguration();h==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(a(arguments[0])){const h=r(arguments[0]),f=s(h),p=o(arguments[0],h);let b;f===0&&p===0?b=Number.POSITIVE_INFINITY:f===0||p===0?b=Math.max(f,p):b=Math.min(f,p);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return b}}),this._sctp=y}return c.apply(this,arguments)}}function ul(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,s){const o=r.send;r.send=function(){const u=arguments[0],h=u.length||u.size||u.byteLength;if(r.readyState==="open"&&s.sctp&&h>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const a=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=a.apply(this,arguments);return e(s,this),s},la(t,"datachannel",r=>(e(r.channel,r.target),r))}function gd(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(a){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),a&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=a)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(a=>{const r=e[a];e[a]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const o=s.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const c=new Event("connectionstatechange",s);o.dispatchEvent(c)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function yd(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const a=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=s.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:o}):s.sdp=o}return a.apply(this,arguments)}}function dl(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const a=t.RTCPeerConnection.prototype.addIceCandidate;!a||a.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():a.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function hl(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const a=t.RTCPeerConnection.prototype.setLocalDescription;!a||a.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return a.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?a.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>a.apply(this,[c]))})}const p3=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:yd,shimAddIceCandidateNullOrEmpty:dl,shimConnectionState:gd,shimMaxMessageSize:cl,shimParameterlessSetLocalDescription:hl,shimRTCIceCandidate:ll,shimRTCIceCandidateRelayProtocol:md,shimSendThrowTypeError:ul},Symbol.toStringTag,{value:"Module"}));function m3({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const a=R1,r=u3(t),s={browserDetails:r,commonShim:p3,extractVersion:Ns,disableLog:l3,disableWarnings:c3,sdp:f3};switch(r.browser){case"chrome":if(!R0||!fd||!e.shimChrome)return a("Chrome shim is not included in this adapter release."),s;if(r.version===null)return a("Chrome shim can not determine version, not shimming."),s;a("adapter.js shimming chrome."),s.browserShim=R0,dl(t,r),hl(t),A1(t,r),O1(t),fd(t,r),N1(t),w1(t,r),D1(t),k1(t),z1(t,r),ll(t),md(t),gd(t),cl(t,r),ul(t),yd(t,r);break;case"firefox":if(!M0||!pd||!e.shimFirefox)return a("Firefox shim is not included in this adapter release."),s;a("adapter.js shimming firefox."),s.browserShim=M0,dl(t,r),hl(t),U1(t,r),pd(t,r),L1(t),V1(t),G1(t),F1(t),B1(t),j1(t),I1(t),H1(t),q1(t),ll(t),gd(t),cl(t,r),ul(t);break;case"safari":if(!A0||!e.shimSafari)return a("Safari shim is not included in this adapter release."),s;a("adapter.js shimming safari."),s.browserShim=A0,dl(t,r),hl(t),W1(t),$1(t),X1(t),Y1(t),K1(t),J1(t),Z1(t),ey(t),ll(t),md(t),cl(t,r),ul(t),yd(t,r);break;default:a("Unsupported browser!");break}return s}const N0=m3({window:typeof window>"u"?void 0:window});function ca(t,e,a,r){Object.defineProperty(t,e,{get:a,set:r,enumerable:!0,configurable:!0})}class ny{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const a=[],r=e.byteLength,s=Math.ceil(r/this.chunkedMTU);let o=0,c=0;for(;c<r;){const u=Math.min(r,c+this.chunkedMTU),h=e.slice(c,u),f={__peerData:this._dataCount,n:o,data:h,total:s};a.push(f),c=u,o++}return this._dataCount++,a}}}function g3(t){let e=0;for(const s of t)e+=s.byteLength;const a=new Uint8Array(e);let r=0;for(const s of t)a.set(s,r),r+=s.byteLength;return a}const Gu=N0.default||N0,Br=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Gu.browserDetails.browser}getVersion(){return Gu.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Gu.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let a,r=!1;try{a=new RTCPeerConnection,a.addTransceiver("audio"),r=!0}catch{}finally{a&&a.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},y3=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),iy=()=>Math.random().toString(36).slice(2),D0={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class v3 extends ny{noop(){}blobToArrayBuffer(e,a){const r=new FileReader;return r.onload=function(s){s.target&&a(s.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r)&255;return a.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=D0,this.browser=Br.getBrowser(),this.browserVersion=Br.getVersion(),this.pack=x1,this.unpack=C1,this.supports=function(){const a={browser:Br.isBrowserSupported(),webRTC:Br.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!a.webRTC)return a;let r;try{r=new RTCPeerConnection(D0),a.audioVideo=!0;let s;try{s=r.createDataChannel("_PEERJSTEST",{ordered:!0}),a.data=!0,a.reliable=!!s.ordered;try{s.binaryType="blob",a.binaryBlob=!Br.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{r&&r.close()}return a}(),this.validateId=y3,this.randomToken=iy}}const Xt=new v3,_3="PeerJS: ";class b3{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...a){const r=[_3,...a];for(const s in r)r[s]instanceof Error&&(r[s]="("+r[s].name+") "+r[s].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var ve=new b3,Jd={},S3=Object.prototype.hasOwnProperty,Vt="~";function Ls(){}Object.create&&(Ls.prototype=Object.create(null),new Ls().__proto__||(Vt=!1));function C3(t,e,a){this.fn=t,this.context=e,this.once=a||!1}function ay(t,e,a,r,s){if(typeof a!="function")throw new TypeError("The listener must be a function");var o=new C3(a,r||t,s),c=Vt?Vt+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],o]:t._events[c].push(o):(t._events[c]=o,t._eventsCount++),t}function fl(t,e){--t._eventsCount===0?t._events=new Ls:delete t._events[e]}function Ut(){this._events=new Ls,this._eventsCount=0}Ut.prototype.eventNames=function(){var e=[],a,r;if(this._eventsCount===0)return e;for(r in a=this._events)S3.call(a,r)&&e.push(Vt?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e};Ut.prototype.listeners=function(e){var a=Vt?Vt+e:e,r=this._events[a];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,o=r.length,c=new Array(o);s<o;s++)c[s]=r[s].fn;return c};Ut.prototype.listenerCount=function(e){var a=Vt?Vt+e:e,r=this._events[a];return r?r.fn?1:r.length:0};Ut.prototype.emit=function(e,a,r,s,o,c){var u=Vt?Vt+e:e;if(!this._events[u])return!1;var h=this._events[u],f=arguments.length,p,b;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,a),!0;case 3:return h.fn.call(h.context,a,r),!0;case 4:return h.fn.call(h.context,a,r,s),!0;case 5:return h.fn.call(h.context,a,r,s,o),!0;case 6:return h.fn.call(h.context,a,r,s,o,c),!0}for(b=1,p=new Array(f-1);b<f;b++)p[b-1]=arguments[b];h.fn.apply(h.context,p)}else{var y=h.length,g;for(b=0;b<y;b++)switch(h[b].once&&this.removeListener(e,h[b].fn,void 0,!0),f){case 1:h[b].fn.call(h[b].context);break;case 2:h[b].fn.call(h[b].context,a);break;case 3:h[b].fn.call(h[b].context,a,r);break;case 4:h[b].fn.call(h[b].context,a,r,s);break;default:if(!p)for(g=1,p=new Array(f-1);g<f;g++)p[g-1]=arguments[g];h[b].fn.apply(h[b].context,p)}}return!0};Ut.prototype.on=function(e,a,r){return ay(this,e,a,r,!1)};Ut.prototype.once=function(e,a,r){return ay(this,e,a,r,!0)};Ut.prototype.removeListener=function(e,a,r,s){var o=Vt?Vt+e:e;if(!this._events[o])return this;if(!a)return fl(this,o),this;var c=this._events[o];if(c.fn)c.fn===a&&(!s||c.once)&&(!r||c.context===r)&&fl(this,o);else{for(var u=0,h=[],f=c.length;u<f;u++)(c[u].fn!==a||s&&!c[u].once||r&&c[u].context!==r)&&h.push(c[u]);h.length?this._events[o]=h.length===1?h[0]:h:fl(this,o)}return this};Ut.prototype.removeAllListeners=function(e){var a;return e?(a=Vt?Vt+e:e,this._events[a]&&fl(this,a)):(this._events=new Ls,this._eventsCount=0),this};Ut.prototype.off=Ut.prototype.removeListener;Ut.prototype.addListener=Ut.prototype.on;Ut.prefixed=Vt;Ut.EventEmitter=Ut;Jd=Ut;var ua={};ca(ua,"ConnectionType",()=>Di);ca(ua,"PeerErrorType",()=>pt);ca(ua,"BaseConnectionErrorType",()=>vd);ca(ua,"DataConnectionErrorType",()=>$d);ca(ua,"SerializationType",()=>Ll);ca(ua,"SocketEventType",()=>Ni);ca(ua,"ServerMessageType",()=>zt);var Di=function(t){return t.Data="data",t.Media="media",t}({}),pt=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),vd=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),$d=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),Ll=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),Ni=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),zt=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const ry="1.5.5";class x3 extends Jd.EventEmitter{constructor(e,a,r,s,o,c=5e3){super(),this.pingInterval=c,this._disconnected=!0,this._messagesQueue=[];const u=e?"wss://":"ws://";this._baseUrl=u+a+":"+r+s+"peerjs?key="+o}start(e,a){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${a}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+ry),this._disconnected=!1,this._socket.onmessage=s=>{let o;try{o=JSON.parse(s.data),ve.log("Server message received:",o)}catch{ve.log("Invalid server message",s.data);return}this.emit(Ni.Message,o)},this._socket.onclose=s=>{this._disconnected||(ve.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(Ni.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),ve.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){ve.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:zt.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const a of e)this.send(a)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Ni.Error,"Invalid message");return}if(!this._wsOpen())return;const a=JSON.stringify(e);this._socket.send(a)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class sy{constructor(e){this.connection=e}startConnection(e){const a=this._startPeerConnection();if(this.connection.peerConnection=a,this.connection.type===Di.Media&&e._stream&&this._addTracksToConnection(e._stream,a),e.originator){const r=this.connection,s={ordered:!!e.reliable},o=a.createDataChannel(r.label,s);r._initializeDataChannel(o),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){ve.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const a=this.connection.peer,r=this.connection.connectionId,s=this.connection.type,o=this.connection.provider;ve.log("Listening for ICE candidates."),e.onicecandidate=c=>{!c.candidate||!c.candidate.candidate||(ve.log(`Received ICE candidates for ${a}:`,c.candidate),o.socket.send({type:zt.Candidate,payload:{candidate:c.candidate,type:s,connectionId:r},dst:a}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":ve.log("iceConnectionState is failed, closing connections to "+a),this.connection.emitError(vd.NegotiationFailed,"Negotiation of connection to "+a+" failed."),this.connection.close();break;case"closed":ve.log("iceConnectionState is closed, closing connections to "+a),this.connection.emitError(vd.ConnectionClosed,"Connection to "+a+" closed."),this.connection.close();break;case"disconnected":ve.log("iceConnectionState changed to disconnected on the connection with "+a);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},ve.log("Listening for data channel"),e.ondatachannel=c=>{ve.log("Received data channel");const u=c.channel;o.getConnection(a,r)._initializeDataChannel(u)},ve.log("Listening for remote stream"),e.ontrack=c=>{ve.log("Received remote stream");const u=c.streams[0],h=o.getConnection(a,r);if(h.type===Di.Media){const f=h;this._addStreamToMediaConnection(u,f)}}}cleanup(){ve.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const a=e.signalingState!=="closed";let r=!1;const s=this.connection.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed"),(a||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,a=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);ve.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),ve.log("Set localDescription:",r,`for:${this.connection.peer}`);let s={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Di.Data){const o=this.connection;s={...s,label:o.label,reliable:o.reliable,serialization:o.serialization}}a.socket.send({type:zt.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(a.emitError(pt.WebRTC,s),ve.log("Failed to setLocalDescription, ",s))}}catch(r){a.emitError(pt.WebRTC,r),ve.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,a=this.connection.provider;try{const r=await e.createAnswer();ve.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),ve.log("Set localDescription:",r,`for:${this.connection.peer}`),a.socket.send({type:zt.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){a.emitError(pt.WebRTC,s),ve.log("Failed to setLocalDescription, ",s)}}catch(r){a.emitError(pt.WebRTC,r),ve.log("Failed to create answer, ",r)}}async handleSDP(e,a){a=new RTCSessionDescription(a);const r=this.connection.peerConnection,s=this.connection.provider;ve.log("Setting remote description",a);const o=this;try{await r.setRemoteDescription(a),ve.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await o._makeAnswer()}catch(c){s.emitError(pt.WebRTC,c),ve.log("Failed to setRemoteDescription, ",c)}}async handleCandidate(e){ve.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),ve.log(`Added ICE candidate for:${this.connection.peer}`)}catch(a){this.connection.provider.emitError(pt.WebRTC,a),ve.log("Failed to handleCandidate, ",a)}}_addTracksToConnection(e,a){if(ve.log(`add tracks from stream ${e.id} to peer connection`),!a.addTrack)return ve.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{a.addTrack(r,e)})}_addStreamToMediaConnection(e,a){ve.log(`add stream ${e.id} to media connection ${a.connectionId}`),a.addStream(e)}}class oy extends Jd.EventEmitter{emitError(e,a){ve.error("Error:",a),this.emit("error",new E3(`${e}`,a))}}class E3 extends Error{constructor(e,a){typeof a=="string"?super(a):(super(),Object.assign(this,a)),this.type=e}}class ly extends oy{get open(){return this._open}constructor(e,a,r){super(),this.peer=e,this.provider=a,this.options=r,this._open=!1,this.metadata=r.metadata}}var Vd;const Ps=class Ps extends ly{get type(){return Di.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,a,r){super(e,a,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Ps.ID_PREFIX+Xt.randomToken(),this._negotiator=new sy(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{ve.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{ve.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){ve.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const a=e.type,r=e.payload;switch(e.type){case zt.Answer:this._negotiator.handleSDP(a,r.sdp),this._open=!0;break;case zt.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:ve.warn(`Unrecognized message type:${a} from peer:${this.peer}`);break}}answer(e,a={}){if(this._localStream){ve.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,a&&a.sdpTransform&&(this.options.sdpTransform=a.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const s of r)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Vd=new WeakMap,Fr(Ps,Vd,Ps.ID_PREFIX="mc_");let vl=Ps;class T3{constructor(e){this._options=e}_buildRequest(e){const a=this._options.secure?"https":"http",{host:r,port:s,path:o,key:c}=this._options,u=new URL(`${a}://${r}:${s}${o}${c}/${e}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",ry),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){ve.error("Error retrieving ID",e);let a="";throw this._options.path==="/"&&this._options.host!==Xt.CLOUD_HOST&&(a=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+a)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let a="";throw this._options.host===Xt.CLOUD_HOST?a="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":a="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+a)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw ve.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Bd,jd;const $i=class $i extends ly{get type(){return Di.Data}constructor(e,a,r){super(e,a,r),this.connectionId=this.options.connectionId||$i.ID_PREFIX+iy(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new sy(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{ve.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=a=>{ve.log(`DC#${this.connectionId} dc onmessage:`,a.data)},this.dataChannel.onclose=()=>{ve.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,a=!1){if(!this.open){this.emitError($d.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,a)}async handleMessage(e){const a=e.payload;switch(e.type){case zt.Answer:await this._negotiator.handleSDP(e.type,a.sdp);break;case zt.Candidate:await this._negotiator.handleCandidate(a.candidate);break;default:ve.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Bd=new WeakMap,jd=new WeakMap,Fr($i,Bd,$i.ID_PREFIX="dc_"),Fr($i,jd,$i.MAX_BUFFERED_AMOUNT=8388608);let _l=$i;class eh extends _l{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",a=>this._handleDataMessage(a))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>_l.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(a){return ve.error(`DC#:${this.connectionId} Error when sending:`,a),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Fu extends eh{close(e){super.close(e),this._chunkedData={}}constructor(e,a,r){super(e,a,r),this.chunker=new ny,this.serialization=Ll.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const a=C1(e),r=a.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(a);return}this.emit("data",a)}_handleChunk(e){const a=e.__peerData,r=this._chunkedData[a]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[a]=r,r.total===r.count){delete this._chunkedData[a];const s=g3(r.data);this._handleDataMessage({data:s})}}_send(e,a){const r=x1(e);if(r instanceof Promise)return this._send_blob(r);if(!a&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const a=await e;if(a.byteLength>this.chunker.chunkedMTU){this._sendChunks(a);return}this._bufferedSend(a)}_sendChunks(e){const a=this.chunker.chunk(e);ve.log(`DC#${this.connectionId} Try to send ${a.length} chunks...`);for(const r of a)this.send(r,!0)}}class R3 extends eh{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,a){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Ll.None}}class M3 extends eh{_handleDataMessage({data:e}){const a=this.parse(this.decoder.decode(e)),r=a.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",a)}_send(e,a){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Xt.chunkedMTU){this.emitError($d.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Ll.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Id;const ws=class ws extends oy{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[a,r]of this._connections)e[a]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,a){super(),this._serializers={raw:R3,json:M3,binary:Fu,"binary-utf8":Fu,default:Fu},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?a=e:e&&(r=e.toString()),a={debug:0,host:Xt.CLOUD_HOST,port:Xt.CLOUD_PORT,path:"/",key:ws.DEFAULT_KEY,token:Xt.randomToken(),config:Xt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...a},this._options=a,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Xt.CLOUD_HOST?this._options.secure=Xt.isSecure():this._options.host==Xt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&ve.setLogFunction(this._options.logFunction),ve.logLevel=this._options.debug||0,this._api=new T3(a),this._socket=this._createServerConnection(),!Xt.supports.audioVideo&&!Xt.supports.data){this._delayedAbort(pt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Xt.validateId(r)){this._delayedAbort(pt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(pt.ServerError,s))}_createServerConnection(){const e=new x3(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Ni.Message,a=>{this._handleMessage(a)}),e.on(Ni.Error,a=>{this._abort(pt.SocketError,a)}),e.on(Ni.Disconnected,()=>{this.disconnected||(this.emitError(pt.Network,"Lost connection to server."),this.disconnect())}),e.on(Ni.Close,()=>{this.disconnected||this._abort(pt.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const a=e.type,r=e.payload,s=e.src;switch(a){case zt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case zt.Error:this._abort(pt.ServerError,r.msg);break;case zt.IdTaken:this._abort(pt.UnavailableID,`ID "${this.id}" is taken`);break;case zt.InvalidKey:this._abort(pt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case zt.Leave:ve.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case zt.Expire:this.emitError(pt.PeerUnavailable,`Could not connect to peer ${s}`);break;case zt.Offer:{const o=r.connectionId;let c=this.getConnection(s,o);if(c&&(c.close(),ve.warn(`Offer received for existing Connection ID:${o}`)),r.type===Di.Media){const h=new vl(s,this,{connectionId:o,_payload:r,metadata:r.metadata});c=h,this._addConnection(s,c),this.emit("call",h)}else if(r.type===Di.Data){const h=new this._serializers[r.serialization](s,this,{connectionId:o,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});c=h,this._addConnection(s,c),this.emit("connection",h)}else{ve.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(o);for(const h of u)c.handleMessage(h);break}default:{if(!r){ve.warn(`You received a malformed message from ${s} of type ${a}`);return}const o=r.connectionId,c=this.getConnection(s,o);c&&c.peerConnection?c.handleMessage(e):o?this._storeMessage(o,e):ve.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,a){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(a)}_getMessages(e){const a=this._lostMessages.get(e);return a?(this._lostMessages.delete(e),a):[]}connect(e,a={}){if(a={serialization:"default",...a},this.disconnected){ve.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(pt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[a.serialization](e,this,a);return this._addConnection(e,r),r}call(e,a,r={}){if(this.disconnected){ve.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(pt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!a){ve.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new vl(e,this,{...r,_stream:a});return this._addConnection(e,s),s}_addConnection(e,a){ve.log(`add connection ${a.type}:${a.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(a)}_removeConnection(e){const a=this._connections.get(e.peer);if(a){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,a){const r=this._connections.get(e);if(!r)return null;for(const s of r)if(s.connectionId===a)return s;return null}_delayedAbort(e,a){setTimeout(()=>{this._abort(e,a)},0)}_abort(e,a){ve.error("Aborting!"),this.emitError(e,a),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(ve.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const a=this._connections.get(e);if(a)for(const r of a)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;ve.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)ve.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)ve.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=a=>{}){this._api.listAllPeers().then(a=>e(a)).catch(a=>this._abort(pt.ServerError,a))}};Id=new WeakMap,Fr(ws,Id,ws.DEFAULT_KEY="peerjs");let _d=ws;const k0=t=>{let e;const a=new Set,r=(f,p)=>{const b=typeof f=="function"?f(e):f;if(!Object.is(b,e)){const y=e;e=p??(typeof b!="object"||b===null)?b:Object.assign({},e,b),a.forEach(g=>g(e,y))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>h,subscribe:f=>(a.add(f),()=>a.delete(f))},h=e=t(r,s,u);return u},A3=t=>t?k0(t):k0,O3=t=>t;function N3(t,e=O3){const a=et.useSyncExternalStore(t.subscribe,et.useCallback(()=>e(t.getState()),[t,e]),et.useCallback(()=>e(t.getInitialState()),[t,e]));return et.useDebugValue(a),a}const P0=t=>{const e=A3(t),a=r=>N3(e,r);return Object.assign(a,e),a},D3=t=>t?P0(t):P0;var cy=Symbol.for("immer-nothing"),w0=Symbol.for("immer-draftable"),ln=Symbol.for("immer-state");function En(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ir=Object.getPrototypeOf;function ar(t){return!!t&&!!t[ln]}function ia(t){var e;return t?uy(t)||Array.isArray(t)||!!t[w0]||!!((e=t.constructor)!=null&&e[w0])||Fl(t)||Vl(t):!1}var k3=Object.prototype.constructor.toString();function uy(t){if(!t||typeof t!="object")return!1;const e=ir(t);if(e===null)return!0;const a=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return a===Object?!0:typeof a=="function"&&Function.toString.call(a)===k3}function bl(t,e){Gl(t)===0?Reflect.ownKeys(t).forEach(a=>{e(a,t[a],t)}):t.forEach((a,r)=>e(r,a,t))}function Gl(t){const e=t[ln];return e?e.type_:Array.isArray(t)?1:Fl(t)?2:Vl(t)?3:0}function bd(t,e){return Gl(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function dy(t,e,a){const r=Gl(t);r===2?t.set(e,a):r===3?t.add(a):t[e]=a}function P3(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Fl(t){return t instanceof Map}function Vl(t){return t instanceof Set}function Ji(t){return t.copy_||t.base_}function Sd(t,e){if(Fl(t))return new Map(t);if(Vl(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const a=uy(t);if(e===!0||e==="class_only"&&!a){const r=Object.getOwnPropertyDescriptors(t);delete r[ln];let s=Reflect.ownKeys(r);for(let o=0;o<s.length;o++){const c=s[o],u=r[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(ir(t),r)}else{const r=ir(t);if(r!==null&&a)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function th(t,e=!1){return Bl(t)||ar(t)||!ia(t)||(Gl(t)>1&&(t.set=t.add=t.clear=t.delete=w3),Object.freeze(t),e&&Object.entries(t).forEach(([a,r])=>th(r,!0))),t}function w3(){En(2)}function Bl(t){return Object.isFrozen(t)}var z3={};function aa(t){const e=z3[t];return e||En(0,t),e}var Gs;function hy(){return Gs}function U3(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function z0(t,e){e&&(aa("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Cd(t){xd(t),t.drafts_.forEach(L3),t.drafts_=null}function xd(t){t===Gs&&(Gs=t.parent_)}function U0(t){return Gs=U3(Gs,t)}function L3(t){const e=t[ln];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function L0(t,e){e.unfinalizedDrafts_=e.drafts_.length;const a=e.drafts_[0];return t!==void 0&&t!==a?(a[ln].modified_&&(Cd(e),En(4)),ia(t)&&(t=Sl(e,t),e.parent_||Cl(e,t)),e.patches_&&aa("Patches").generateReplacementPatches_(a[ln].base_,t,e.patches_,e.inversePatches_)):t=Sl(e,a,[]),Cd(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==cy?t:void 0}function Sl(t,e,a){if(Bl(e))return e;const r=e[ln];if(!r)return bl(e,(s,o)=>G0(t,r,e,s,o,a)),e;if(r.scope_!==t)return e;if(!r.modified_)return Cl(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let o=s,c=!1;r.type_===3&&(o=new Set(s),s.clear(),c=!0),bl(o,(u,h)=>G0(t,r,s,u,h,a,c)),Cl(t,s,!1),a&&t.patches_&&aa("Patches").generatePatches_(r,a,t.patches_,t.inversePatches_)}return r.copy_}function G0(t,e,a,r,s,o,c){if(ar(s)){const u=o&&e&&e.type_!==3&&!bd(e.assigned_,r)?o.concat(r):void 0,h=Sl(t,s,u);if(dy(a,r,h),ar(h))t.canAutoFreeze_=!1;else return}else c&&a.add(s);if(ia(s)&&!Bl(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Sl(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(a,r)&&Cl(t,s)}}function Cl(t,e,a=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&th(e,a)}function G3(t,e){const a=Array.isArray(t),r={type_:a?1:0,scope_:e?e.scope_:hy(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=nh;a&&(s=[r],o=Fs);const{revoke:c,proxy:u}=Proxy.revocable(s,o);return r.draft_=u,r.revoke_=c,u}var nh={get(t,e){if(e===ln)return t;const a=Ji(t);if(!bd(a,e))return F3(t,a,e);const r=a[e];return t.finalized_||!ia(r)?r:r===Vu(t.base_,e)?(Bu(t),t.copy_[e]=Td(r,t)):r},has(t,e){return e in Ji(t)},ownKeys(t){return Reflect.ownKeys(Ji(t))},set(t,e,a){const r=fy(Ji(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,a),!0;if(!t.modified_){const s=Vu(Ji(t),e),o=s==null?void 0:s[ln];if(o&&o.base_===a)return t.copy_[e]=a,t.assigned_[e]=!1,!0;if(P3(a,s)&&(a!==void 0||bd(t.base_,e)))return!0;Bu(t),Ed(t)}return t.copy_[e]===a&&(a!==void 0||e in t.copy_)||Number.isNaN(a)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=a,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Vu(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Bu(t),Ed(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const a=Ji(t),r=Reflect.getOwnPropertyDescriptor(a,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:a[e]}},defineProperty(){En(11)},getPrototypeOf(t){return ir(t.base_)},setPrototypeOf(){En(12)}},Fs={};bl(nh,(t,e)=>{Fs[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Fs.deleteProperty=function(t,e){return Fs.set.call(this,t,e,void 0)};Fs.set=function(t,e,a){return nh.set.call(this,t[0],e,a,t[0])};function Vu(t,e){const a=t[ln];return(a?Ji(a):t)[e]}function F3(t,e,a){var s;const r=fy(e,a);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function fy(t,e){if(!(e in t))return;let a=ir(t);for(;a;){const r=Object.getOwnPropertyDescriptor(a,e);if(r)return r;a=ir(a)}}function Ed(t){t.modified_||(t.modified_=!0,t.parent_&&Ed(t.parent_))}function Bu(t){t.copy_||(t.copy_=Sd(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var V3=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,a,r)=>{if(typeof e=="function"&&typeof a!="function"){const o=a;a=e;const c=this;return function(h=o,...f){return c.produce(h,p=>a.call(this,p,...f))}}typeof a!="function"&&En(6),r!==void 0&&typeof r!="function"&&En(7);let s;if(ia(e)){const o=U0(this),c=Td(e,void 0);let u=!0;try{s=a(c),u=!1}finally{u?Cd(o):xd(o)}return z0(o,r),L0(s,o)}else if(!e||typeof e!="object"){if(s=a(e),s===void 0&&(s=e),s===cy&&(s=void 0),this.autoFreeze_&&th(s,!0),r){const o=[],c=[];aa("Patches").generateReplacementPatches_(e,s,o,c),r(o,c)}return s}else En(1,e)},this.produceWithPatches=(e,a)=>{if(typeof e=="function")return(c,...u)=>this.produceWithPatches(c,h=>e(h,...u));let r,s;return[this.produce(e,a,(c,u)=>{r=c,s=u}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ia(t)||En(8),ar(t)&&(t=B3(t));const e=U0(this),a=Td(t,void 0);return a[ln].isManual_=!0,xd(e),a}finishDraft(t,e){const a=t&&t[ln];(!a||!a.isManual_)&&En(9);const{scope_:r}=a;return z0(r,e),L0(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let a;for(a=e.length-1;a>=0;a--){const s=e[a];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}a>-1&&(e=e.slice(a+1));const r=aa("Patches").applyPatches_;return ar(t)?r(t,e):this.produce(t,s=>r(s,e))}};function Td(t,e){const a=Fl(t)?aa("MapSet").proxyMap_(t,e):Vl(t)?aa("MapSet").proxySet_(t,e):G3(t,e);return(e?e.scope_:hy()).drafts_.push(a),a}function B3(t){return ar(t)||En(10,t),py(t)}function py(t){if(!ia(t)||Bl(t))return t;const e=t[ln];let a;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,a=Sd(t,e.scope_.immer_.useStrictShallowCopy_)}else a=Sd(t,!0);return bl(a,(r,s)=>{dy(a,r,py(s))}),e&&(e.finalized_=!1),a}var cn=new V3,j3=cn.produce;cn.produceWithPatches.bind(cn);cn.setAutoFreeze.bind(cn);cn.setUseStrictShallowCopy.bind(cn);cn.applyPatches.bind(cn);cn.createDraft.bind(cn);cn.finishDraft.bind(cn);const I3=t=>(e,a,r)=>(r.setState=(s,o,...c)=>{const u=typeof s=="function"?j3(s):s;return e(u,o,...c)},t(r.setState,a,r)),H3=I3;function q3(t,e,a,r){const s=[{x:0,y:1},{x:1,y:0},{x:1,y:1},{x:-1,y:1}];let o=!1;for(const c of s){let u=1,h=1;for(;t+c.x>=0&&t+c.x<r.length&&e+c.y>=0&&e+c.y<r[0].length;)if(u>=5){o=!0;break}else if(r[t+h*c.x][e+h*c.y]===a)u+=1,h++;else break;for(h=1;t-c.x>=0&&t-c.x<r.length-1&&e-c.y>=0&&e-c.y<r[0].length-1;)if(u>=5){o=!0;break}else if(r[t-h*c.x][e-h*c.y]===a)u+=1,h++;else break}return{isWon:o,winner:a}}const Y3=t=>t.length===225,F0={isWon:!1,isDraw:!1,isMyTurn:!1,board:new Array(15).fill(null).map(()=>new Array(15).fill("")),piecePos:[],player:{me:"white",opponent:"black"},winner:""},ea=D3()(H3((t,e)=>({...F0,setIsWin:()=>t(a=>{a.isWon=!0}),setIsDraw:()=>t(a=>{a.isDraw=!0}),setIsMyTurn:a=>t(r=>{r.isMyTurn=a}),placePiece:(a,r,s)=>t(o=>{o.piecePos.push({x:a,y:r,player:o.player[s]}),o.board[a][r]=o.player[s];const{isWon:c,winner:u}=q3(a,r,e().player[s],e().board);c&&(o.isWon=!0,o.winner=u,o.isMyTurn=!1),Y3(e().board)&&(o.isDraw=!0,o.isMyTurn=!1)}),setPlayer:a=>t(r=>{a==="white"?r.player={me:"white",opponent:"black"}:r.player={me:"black",opponent:"white"}}),reset:()=>t(F0)})));var my=(t=>(t.Initial="INITIAL",t.Place="PLACE",t.Restart="RESTART",t))(my||{});function K3(){const t=ea(h=>h.setPlayer),e=ea(h=>h.placePiece),a=ea(h=>h.setIsMyTurn),r=ea(h=>h.reset);function s(h){typeof h.x=="number"&&typeof h.y=="number"&&(a(!0),e(h.x,h.y,"opponent"))}function o(h){const f=(Math.floor(Math.random()*10)+1)%2;f===0?t("white"):(t("black"),a(!0)),h.send({action:"INITIAL",player:f})}function c(h){h.send({action:"RESTART"})}function u(h,f){switch(h.action){case"INITIAL":r(),h.player===0?(t("black"),a(!0)):h.player===1&&t("white");break;case"PLACE":s(h);break;case"RESTART":confirm("Do you want to restart?")?(r(),o(f)):f.close()}}return{initialGame:o,handleAction:u,placeOppoPiece:s,restart:c}}function X3(){const t=q.useRef(null),e=q.useRef(null),[a,r]=q.useState(""),[s,o]=q.useState(!1),[c,u]=q.useState(!1),h=K3(),f=ea(g=>g.setIsMyTurn);q.useEffect(()=>(t.current=new _d("",{}),t.current.on("open",g=>{r(g),u(!0)}),t.current.on("connection",g=>{e.current=g,g.on("open",()=>{o(!0)}),g.on("data",v=>{h.handleAction(v,g)}),g.on("close",()=>{console.log("close")}),g.on("error",v=>{console.log(v)})}),()=>{var g;(g=t.current)==null||g.destroy()}),[]);function p(g){if(c&&t.current){e.current=t.current.connect(g);const v=e.current;v.on("open",()=>{o(!0),h.initialGame(v)}),v.on("data",C=>{h.handleAction(C,v)}),v.on("close",()=>{console.log("close")}),v.on("error",C=>{console.log(C)})}}function b(g,v){const C=e.current;f(!1),C&&C.send({action:my.Place,x:g,y:v})}function y(){e.current&&h.restart(e.current)}return{id:a,connect:p,isConnected:s,sendPiece:b,restart:y,isPeerOpen:c}}var Z3=function(t,e,a){if(a||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function Q3(t,e,a,r,s,o,c,u,h){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return a(e(t));case 4:return r(a(e(t)));case 5:return s(r(a(e(t))));case 6:return o(s(r(a(e(t)))));case 7:return c(o(s(r(a(e(t))))));case 8:return u(c(o(s(r(a(e(t)))))));case 9:return h(u(c(o(s(r(a(e(t))))))));default:{for(var f=arguments[0],p=1;p<arguments.length;p++)f=arguments[p](f);return f}}}var W3=function(t,e){var a=function(r){return r.length>=t};return function(){var r=Array.from(arguments);return a(arguments)?e.apply(this,r):function(s){return e.apply(void 0,Z3([s],r,!1))}}},J3={_tag:"None"},$3=function(t){return{_tag:"Some",value:t}},xl=J3,Rd=$3,eb=W3(2,function(t,e){return gy(t)?xl:e(t.value)}),gy=function(t){return t._tag==="None"},tb=function(t,e){return function(a){return gy(a)?t():e(a.value)}},nb=tb,ib=function(t){return t==null?xl:Rd(t)},V0=eb,pl={exports:{}},jr={},ju={},Iu={},B0;function we(){return B0||(B0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function a(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof $p<"u"?$p:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:a(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return t.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var s;return(s=t.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(s){t.glob.Konva=s}};const r=s=>{t.Konva[s.prototype.getClassName()]=s};t._registerNode=r,t.Konva._injectGlobal(t.Konva)}(Iu)),Iu}var Hu={},j0;function rt(){return j0||(j0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=we();class a{constructor(T=[1,0,0,1,0,0]){this.dirty=!1,this.m=T&&T.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new a(this.m)}copyInto(T){T.m[0]=this.m[0],T.m[1]=this.m[1],T.m[2]=this.m[2],T.m[3]=this.m[3],T.m[4]=this.m[4],T.m[5]=this.m[5]}point(T){const M=this.m;return{x:M[0]*T.x+M[2]*T.y+M[4],y:M[1]*T.x+M[3]*T.y+M[5]}}translate(T,M){return this.m[4]+=this.m[0]*T+this.m[2]*M,this.m[5]+=this.m[1]*T+this.m[3]*M,this}scale(T,M){return this.m[0]*=T,this.m[1]*=T,this.m[2]*=M,this.m[3]*=M,this}rotate(T){const M=Math.cos(T),k=Math.sin(T),G=this.m[0]*M+this.m[2]*k,R=this.m[1]*M+this.m[3]*k,N=this.m[0]*-k+this.m[2]*M,P=this.m[1]*-k+this.m[3]*M;return this.m[0]=G,this.m[1]=R,this.m[2]=N,this.m[3]=P,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(T,M){const k=this.m[0]+this.m[2]*M,G=this.m[1]+this.m[3]*M,R=this.m[2]+this.m[0]*T,N=this.m[3]+this.m[1]*T;return this.m[0]=k,this.m[1]=G,this.m[2]=R,this.m[3]=N,this}multiply(T){const M=this.m[0]*T.m[0]+this.m[2]*T.m[1],k=this.m[1]*T.m[0]+this.m[3]*T.m[1],G=this.m[0]*T.m[2]+this.m[2]*T.m[3],R=this.m[1]*T.m[2]+this.m[3]*T.m[3],N=this.m[0]*T.m[4]+this.m[2]*T.m[5]+this.m[4],P=this.m[1]*T.m[4]+this.m[3]*T.m[5]+this.m[5];return this.m[0]=M,this.m[1]=k,this.m[2]=G,this.m[3]=R,this.m[4]=N,this.m[5]=P,this}invert(){const T=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),M=this.m[3]*T,k=-this.m[1]*T,G=-this.m[2]*T,R=this.m[0]*T,N=T*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),P=T*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=M,this.m[1]=k,this.m[2]=G,this.m[3]=R,this.m[4]=N,this.m[5]=P,this}getMatrix(){return this.m}decompose(){const T=this.m[0],M=this.m[1],k=this.m[2],G=this.m[3],R=this.m[4],N=this.m[5],P=T*G-M*k,F={x:R,y:N,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(T!=0||M!=0){const j=Math.sqrt(T*T+M*M);F.rotation=M>0?Math.acos(T/j):-Math.acos(T/j),F.scaleX=j,F.scaleY=P/j,F.skewX=(T*k+M*G)/P,F.skewY=0}else if(k!=0||G!=0){const j=Math.sqrt(k*k+G*G);F.rotation=Math.PI/2-(G>0?Math.acos(-k/j):-Math.acos(k/j)),F.scaleX=P/j,F.scaleY=j,F.skewX=0,F.skewY=(T*k+M*G)/P}return F.rotation=t.Util._getRotation(F.rotation),F}}t.Transform=a;const r="[object Array]",s="[object Number]",o="[object String]",c="[object Boolean]",u=Math.PI/180,h=180/Math.PI,f="#",p="",b="0",y="Konva warning: ",g="Konva error: ",v="rgb(",C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},E=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let O=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(_){setTimeout(_,60)};t.Util={_isElement(_){return!!(_&&_.nodeType==1)},_isFunction(_){return!!(_&&_.constructor&&_.call&&_.apply)},_isPlainObject(_){return!!_&&_.constructor===Object},_isArray(_){return Object.prototype.toString.call(_)===r},_isNumber(_){return Object.prototype.toString.call(_)===s&&!isNaN(_)&&isFinite(_)},_isString(_){return Object.prototype.toString.call(_)===o},_isBoolean(_){return Object.prototype.toString.call(_)===c},isObject(_){return _ instanceof Object},isValidSelector(_){if(typeof _!="string")return!1;const T=_[0];return T==="#"||T==="."||T===T.toUpperCase()},_sign(_){return _===0||_>0?1:-1},requestAnimFrame(_){O.push(_),O.length===1&&x(function(){const T=O;O=[],T.forEach(function(M){M()})})},createCanvasElement(){const _=document.createElement("canvas");try{_.style=_.style||{}}catch{}return _},createImageElement(){return document.createElement("img")},_isInDocument(_){for(;_=_.parentNode;)if(_==document)return!0;return!1},_urlToImage(_,T){const M=t.Util.createImageElement();M.onload=function(){T(M)},M.src=_},_rgbToHex(_,T,M){return((1<<24)+(_<<16)+(T<<8)+M).toString(16).slice(1)},_hexToRgb(_){_=_.replace(f,p);const T=parseInt(_,16);return{r:T>>16&255,g:T>>8&255,b:T&255}},getRandomColor(){let _=(Math.random()*16777215<<0).toString(16);for(;_.length<6;)_=b+_;return f+_},getRGB(_){let T;return _ in C?(T=C[_],{r:T[0],g:T[1],b:T[2]}):_[0]===f?this._hexToRgb(_.substring(1)):_.substr(0,4)===v?(T=E.exec(_.replace(/ /g,"")),{r:parseInt(T[1],10),g:parseInt(T[2],10),b:parseInt(T[3],10)}):{r:0,g:0,b:0}},colorToRGBA(_){return _=_||"black",t.Util._namedColorToRBA(_)||t.Util._hex3ColorToRGBA(_)||t.Util._hex4ColorToRGBA(_)||t.Util._hex6ColorToRGBA(_)||t.Util._hex8ColorToRGBA(_)||t.Util._rgbColorToRGBA(_)||t.Util._rgbaColorToRGBA(_)||t.Util._hslColorToRGBA(_)},_namedColorToRBA(_){const T=C[_.toLowerCase()];return T?{r:T[0],g:T[1],b:T[2],a:1}:null},_rgbColorToRGBA(_){if(_.indexOf("rgb(")===0){_=_.match(/rgb\(([^)]+)\)/)[1];const T=_.split(/ *, */).map(Number);return{r:T[0],g:T[1],b:T[2],a:1}}},_rgbaColorToRGBA(_){if(_.indexOf("rgba(")===0){_=_.match(/rgba\(([^)]+)\)/)[1];const T=_.split(/ *, */).map((M,k)=>M.slice(-1)==="%"?k===3?parseInt(M)/100:parseInt(M)/100*255:Number(M));return{r:T[0],g:T[1],b:T[2],a:T[3]}}},_hex8ColorToRGBA(_){if(_[0]==="#"&&_.length===9)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:parseInt(_.slice(7,9),16)/255}},_hex6ColorToRGBA(_){if(_[0]==="#"&&_.length===7)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:1}},_hex4ColorToRGBA(_){if(_[0]==="#"&&_.length===5)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:parseInt(_[4]+_[4],16)/255}},_hex3ColorToRGBA(_){if(_[0]==="#"&&_.length===4)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:1}},_hslColorToRGBA(_){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(_)){const[T,...M]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_),k=Number(M[0])/360,G=Number(M[1])/100,R=Number(M[2])/100;let N,P,F;if(G===0)return F=R*255,{r:Math.round(F),g:Math.round(F),b:Math.round(F),a:1};R<.5?N=R*(1+G):N=R+G-R*G;const j=2*R-N,Y=[0,0,0];for(let K=0;K<3;K++)P=k+1/3*-(K-1),P<0&&P++,P>1&&P--,6*P<1?F=j+(N-j)*6*P:2*P<1?F=N:3*P<2?F=j+(N-j)*(2/3-P)*6:F=j,Y[K]=F*255;return{r:Math.round(Y[0]),g:Math.round(Y[1]),b:Math.round(Y[2]),a:1}}},haveIntersection(_,T){return!(T.x>_.x+_.width||T.x+T.width<_.x||T.y>_.y+_.height||T.y+T.height<_.y)},cloneObject(_){const T={};for(const M in _)this._isPlainObject(_[M])?T[M]=this.cloneObject(_[M]):this._isArray(_[M])?T[M]=this.cloneArray(_[M]):T[M]=_[M];return T},cloneArray(_){return _.slice(0)},degToRad(_){return _*u},radToDeg(_){return _*h},_degToRad(_){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(_)},_radToDeg(_){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(_)},_getRotation(_){return e.Konva.angleDeg?t.Util.radToDeg(_):_},_capitalize(_){return _.charAt(0).toUpperCase()+_.slice(1)},throw(_){throw new Error(g+_)},error(_){console.error(g+_)},warn(_){e.Konva.showWarnings&&console.warn(y+_)},each(_,T){for(const M in _)T(M,_[M])},_inRange(_,T,M){return T<=_&&_<M},_getProjectionToSegment(_,T,M,k,G,R){let N,P,F;const j=(_-M)*(_-M)+(T-k)*(T-k);if(j==0)N=_,P=T,F=(G-M)*(G-M)+(R-k)*(R-k);else{const Y=((G-_)*(M-_)+(R-T)*(k-T))/j;Y<0?(N=_,P=T,F=(_-G)*(_-G)+(T-R)*(T-R)):Y>1?(N=M,P=k,F=(M-G)*(M-G)+(k-R)*(k-R)):(N=_+Y*(M-_),P=T+Y*(k-T),F=(N-G)*(N-G)+(P-R)*(P-R))}return[N,P,F]},_getProjectionToLine(_,T,M){const k=t.Util.cloneObject(_);let G=Number.MAX_VALUE;return T.forEach(function(R,N){if(!M&&N===T.length-1)return;const P=T[(N+1)%T.length],F=t.Util._getProjectionToSegment(R.x,R.y,P.x,P.y,_.x,_.y),j=F[0],Y=F[1],K=F[2];K<G&&(k.x=j,k.y=Y,G=K)}),k},_prepareArrayForTween(_,T,M){const k=[],G=[];if(_.length>T.length){const N=T;T=_,_=N}for(let N=0;N<_.length;N+=2)k.push({x:_[N],y:_[N+1]});for(let N=0;N<T.length;N+=2)G.push({x:T[N],y:T[N+1]});const R=[];return G.forEach(function(N){const P=t.Util._getProjectionToLine(N,k,M);R.push(P.x),R.push(P.y)}),R},_prepareToStringify(_){let T;_.visitedByCircularReferenceRemoval=!0;for(const M in _)if(_.hasOwnProperty(M)&&_[M]&&typeof _[M]=="object"){if(T=Object.getOwnPropertyDescriptor(_,M),_[M].visitedByCircularReferenceRemoval||t.Util._isElement(_[M]))if(T.configurable)delete _[M];else return null;else if(t.Util._prepareToStringify(_[M])===null)if(T.configurable)delete _[M];else return null}return delete _.visitedByCircularReferenceRemoval,_},_assign(_,T){for(const M in T)_[M]=T[M];return _},_getFirstPointerId(_){return _.touches?_.changedTouches[0].identifier:_.pointerId||999},releaseCanvas(..._){e.Konva.releaseCanvasOnDestroy&&_.forEach(T=>{T.width=0,T.height=0})},drawRoundedRectPath(_,T,M,k){let G=0,R=0,N=0,P=0;typeof k=="number"?G=R=N=P=Math.min(k,T/2,M/2):(G=Math.min(k[0]||0,T/2,M/2),R=Math.min(k[1]||0,T/2,M/2),P=Math.min(k[2]||0,T/2,M/2),N=Math.min(k[3]||0,T/2,M/2)),_.moveTo(G,0),_.lineTo(T-R,0),_.arc(T-R,R,R,Math.PI*3/2,0,!1),_.lineTo(T,M-P),_.arc(T-P,M-P,P,0,Math.PI/2,!1),_.lineTo(N,M),_.arc(N,M-N,N,Math.PI/2,Math.PI,!1),_.lineTo(0,G),_.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}}(Hu)),Hu}var Ir={},Wn={},Jn={},I0;function yy(){if(I0)return Jn;I0=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.HitContext=Jn.SceneContext=Jn.Context=void 0;const t=rt(),e=we();function a(O){const x=[],_=O.length,T=t.Util;for(let M=0;M<_;M++){let k=O[M];T._isNumber(k)?k=Math.round(k*1e3)/1e3:T._isString(k)||(k=k+""),x.push(k)}return x}const r=",",s="(",o=")",c="([",u="])",h=";",f="()",p="=",b=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],y=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let v=class{constructor(x){this.canvas=x,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(x){x.fillEnabled()&&this._fill(x)}_fill(x){}strokeShape(x){x.hasStroke()&&this._stroke(x)}_stroke(x){}fillStrokeShape(x){x.attrs.fillAfterStrokeEnabled?(this.strokeShape(x),this.fillShape(x)):(this.fillShape(x),this.strokeShape(x))}getTrace(x,_){let T=this.traceArr,M=T.length,k="",G,R,N,P;for(G=0;G<M;G++)R=T[G],N=R.method,N?(P=R.args,k+=N,x?k+=f:t.Util._isArray(P[0])?k+=c+P.join(r)+u:(_&&(P=P.map(F=>typeof F=="number"?Math.floor(F):F)),k+=s+P.join(r)+o)):(k+=R.property,x||(k+=p+R.val)),k+=h;return k}clearTrace(){this.traceArr=[]}_trace(x){let _=this.traceArr,T;_.push(x),T=_.length,T>=g&&_.shift()}reset(){const x=this.getCanvas().getPixelRatio();this.setTransform(1*x,0,0,1*x,0,0)}getCanvas(){return this.canvas}clear(x){const _=this.getCanvas();x?this.clearRect(x.x||0,x.y||0,x.width||0,x.height||0):this.clearRect(0,0,_.getWidth()/_.pixelRatio,_.getHeight()/_.pixelRatio)}_applyLineCap(x){const _=x.attrs.lineCap;_&&this.setAttr("lineCap",_)}_applyOpacity(x){const _=x.getAbsoluteOpacity();_!==1&&this.setAttr("globalAlpha",_)}_applyLineJoin(x){const _=x.attrs.lineJoin;_&&this.setAttr("lineJoin",_)}setAttr(x,_){this._context[x]=_}arc(x,_,T,M,k,G){this._context.arc(x,_,T,M,k,G)}arcTo(x,_,T,M,k){this._context.arcTo(x,_,T,M,k)}beginPath(){this._context.beginPath()}bezierCurveTo(x,_,T,M,k,G){this._context.bezierCurveTo(x,_,T,M,k,G)}clearRect(x,_,T,M){this._context.clearRect(x,_,T,M)}clip(...x){this._context.clip.apply(this._context,x)}closePath(){this._context.closePath()}createImageData(x,_){const T=arguments;if(T.length===2)return this._context.createImageData(x,_);if(T.length===1)return this._context.createImageData(x)}createLinearGradient(x,_,T,M){return this._context.createLinearGradient(x,_,T,M)}createPattern(x,_){return this._context.createPattern(x,_)}createRadialGradient(x,_,T,M,k,G){return this._context.createRadialGradient(x,_,T,M,k,G)}drawImage(x,_,T,M,k,G,R,N,P){const F=arguments,j=this._context;F.length===3?j.drawImage(x,_,T):F.length===5?j.drawImage(x,_,T,M,k):F.length===9&&j.drawImage(x,_,T,M,k,G,R,N,P)}ellipse(x,_,T,M,k,G,R,N){this._context.ellipse(x,_,T,M,k,G,R,N)}isPointInPath(x,_,T,M){return T?this._context.isPointInPath(T,x,_,M):this._context.isPointInPath(x,_,M)}fill(...x){this._context.fill.apply(this._context,x)}fillRect(x,_,T,M){this._context.fillRect(x,_,T,M)}strokeRect(x,_,T,M){this._context.strokeRect(x,_,T,M)}fillText(x,_,T,M){M?this._context.fillText(x,_,T,M):this._context.fillText(x,_,T)}measureText(x){return this._context.measureText(x)}getImageData(x,_,T,M){return this._context.getImageData(x,_,T,M)}lineTo(x,_){this._context.lineTo(x,_)}moveTo(x,_){this._context.moveTo(x,_)}rect(x,_,T,M){this._context.rect(x,_,T,M)}roundRect(x,_,T,M,k){this._context.roundRect(x,_,T,M,k)}putImageData(x,_,T){this._context.putImageData(x,_,T)}quadraticCurveTo(x,_,T,M){this._context.quadraticCurveTo(x,_,T,M)}restore(){this._context.restore()}rotate(x){this._context.rotate(x)}save(){this._context.save()}scale(x,_){this._context.scale(x,_)}setLineDash(x){this._context.setLineDash?this._context.setLineDash(x):"mozDash"in this._context?this._context.mozDash=x:"webkitLineDash"in this._context&&(this._context.webkitLineDash=x)}getLineDash(){return this._context.getLineDash()}setTransform(x,_,T,M,k,G){this._context.setTransform(x,_,T,M,k,G)}stroke(x){x?this._context.stroke(x):this._context.stroke()}strokeText(x,_,T,M){this._context.strokeText(x,_,T,M)}transform(x,_,T,M,k,G){this._context.transform(x,_,T,M,k,G)}translate(x,_){this._context.translate(x,_)}_enableTrace(){let x=this,_=b.length,T=this.setAttr,M,k;const G=function(R){let N=x[R],P;x[R]=function(){return k=a(Array.prototype.slice.call(arguments,0)),P=N.apply(x,arguments),x._trace({method:R,args:k}),P}};for(M=0;M<_;M++)G(b[M]);x.setAttr=function(){T.apply(x,arguments);const R=arguments[0];let N=arguments[1];(R==="shadowOffsetX"||R==="shadowOffsetY"||R==="shadowBlur")&&(N=N/this.canvas.getPixelRatio()),x._trace({property:R,val:N})}}_applyGlobalCompositeOperation(x){const _=x.attrs.globalCompositeOperation;!_||_==="source-over"||this.setAttr("globalCompositeOperation",_)}};Jn.Context=v,y.forEach(function(O){Object.defineProperty(v.prototype,O,{get(){return this._context[O]},set(x){this._context[O]=x}})});class C extends v{constructor(x,{willReadFrequently:_=!1}={}){super(x),this._context=x._canvas.getContext("2d",{willReadFrequently:_})}_fillColor(x){const _=x.fill();this.setAttr("fillStyle",_),x._fillFunc(this)}_fillPattern(x){this.setAttr("fillStyle",x._getFillPattern()),x._fillFunc(this)}_fillLinearGradient(x){const _=x._getLinearGradient();_&&(this.setAttr("fillStyle",_),x._fillFunc(this))}_fillRadialGradient(x){const _=x._getRadialGradient();_&&(this.setAttr("fillStyle",_),x._fillFunc(this))}_fill(x){const _=x.fill(),T=x.getFillPriority();if(_&&T==="color"){this._fillColor(x);return}const M=x.getFillPatternImage();if(M&&T==="pattern"){this._fillPattern(x);return}const k=x.getFillLinearGradientColorStops();if(k&&T==="linear-gradient"){this._fillLinearGradient(x);return}const G=x.getFillRadialGradientColorStops();if(G&&T==="radial-gradient"){this._fillRadialGradient(x);return}_?this._fillColor(x):M?this._fillPattern(x):k?this._fillLinearGradient(x):G&&this._fillRadialGradient(x)}_strokeLinearGradient(x){const _=x.getStrokeLinearGradientStartPoint(),T=x.getStrokeLinearGradientEndPoint(),M=x.getStrokeLinearGradientColorStops(),k=this.createLinearGradient(_.x,_.y,T.x,T.y);if(M){for(let G=0;G<M.length;G+=2)k.addColorStop(M[G],M[G+1]);this.setAttr("strokeStyle",k)}}_stroke(x){const _=x.dash(),T=x.getStrokeScaleEnabled();if(x.hasStroke()){if(!T){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(x),_&&x.dashEnabled()&&(this.setLineDash(_),this.setAttr("lineDashOffset",x.dashOffset())),this.setAttr("lineWidth",x.strokeWidth()),x.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),x.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(x):this.setAttr("strokeStyle",x.stroke()),x._strokeFunc(this),T||this.restore()}}_applyShadow(x){var _,T,M;const k=(_=x.getShadowRGBA())!==null&&_!==void 0?_:"black",G=(T=x.getShadowBlur())!==null&&T!==void 0?T:5,R=(M=x.getShadowOffset())!==null&&M!==void 0?M:{x:0,y:0},N=x.getAbsoluteScale(),P=this.canvas.getPixelRatio(),F=N.x*P,j=N.y*P;this.setAttr("shadowColor",k),this.setAttr("shadowBlur",G*Math.min(Math.abs(F),Math.abs(j))),this.setAttr("shadowOffsetX",R.x*F),this.setAttr("shadowOffsetY",R.y*j)}}Jn.SceneContext=C;class E extends v{constructor(x){super(x),this._context=x._canvas.getContext("2d",{willReadFrequently:!0})}_fill(x){this.save(),this.setAttr("fillStyle",x.colorKey),x._fillFuncHit(this),this.restore()}strokeShape(x){x.hasHitStroke()&&this._stroke(x)}_stroke(x){if(x.hasHitStroke()){const _=x.getStrokeScaleEnabled();if(!_){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(x);const T=x.hitStrokeWidth(),M=T==="auto"?x.strokeWidth():T;this.setAttr("lineWidth",M),this.setAttr("strokeStyle",x.colorKey),x._strokeFuncHit(this),_||this.restore()}}}return Jn.HitContext=E,Jn}var H0;function jl(){if(H0)return Wn;H0=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.HitCanvas=Wn.SceneCanvas=Wn.Canvas=void 0;const t=rt(),e=yy(),a=we();let r;function s(){if(r)return r;const h=t.Util.createCanvasElement(),f=h.getContext("2d");return r=function(){const p=a.Konva._global.devicePixelRatio||1,b=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;return p/b}(),t.Util.releaseCanvas(h),r}let o=class{constructor(f){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const b=(f||{}).pixelRatio||a.Konva.pixelRatio||s();this.pixelRatio=b,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(f){const p=this.pixelRatio;this.pixelRatio=f,this.setSize(this.getWidth()/p,this.getHeight()/p)}setWidth(f){this.width=this._canvas.width=f*this.pixelRatio,this._canvas.style.width=f+"px";const p=this.pixelRatio;this.getContext()._context.scale(p,p)}setHeight(f){this.height=this._canvas.height=f*this.pixelRatio,this._canvas.style.height=f+"px";const p=this.pixelRatio;this.getContext()._context.scale(p,p)}getWidth(){return this.width}getHeight(){return this.height}setSize(f,p){this.setWidth(f||0),this.setHeight(p||0)}toDataURL(f,p){try{return this._canvas.toDataURL(f,p)}catch{try{return this._canvas.toDataURL()}catch(y){return t.Util.error("Unable to get data URL. "+y.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Wn.Canvas=o;class c extends o{constructor(f={width:0,height:0,willReadFrequently:!1}){super(f),this.context=new e.SceneContext(this,{willReadFrequently:f.willReadFrequently}),this.setSize(f.width,f.height)}}Wn.SceneCanvas=c;class u extends o{constructor(f={width:0,height:0}){super(f),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(f.width,f.height)}}return Wn.HitCanvas=u,Wn}var qu={},q0;function ih(){return q0||(q0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=we(),a=rt();t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(s=>{r=s.node}),r},_dragElements:new Map,_drag(r){const s=[];t.DD._dragElements.forEach((o,c)=>{const{node:u}=o,h=u.getStage();h.setPointersPositions(r),o.pointerId===void 0&&(o.pointerId=a.Util._getFirstPointerId(r));const f=h._changedPointerPositions.find(p=>p.id===o.pointerId);if(f){if(o.dragStatus!=="dragging"){const p=u.dragDistance();if(Math.max(Math.abs(f.x-o.startPointerPos.x),Math.abs(f.y-o.startPointerPos.y))<p||(u.startDrag({evt:r}),!u.isDragging()))return}u._setDragPosition(r,o),s.push(u)}}),s.forEach(o=>{o.fire("dragmove",{type:"dragmove",target:o,evt:r},!0)})},_endDragBefore(r){const s=[];t.DD._dragElements.forEach(o=>{const{node:c}=o,u=c.getStage();if(r&&u.setPointersPositions(r),!u._changedPointerPositions.find(p=>p.id===o.pointerId))return;(o.dragStatus==="dragging"||o.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,o.dragStatus="stopped");const f=o.node.getLayer()||o.node instanceof e.Konva.Stage&&o.node;f&&s.indexOf(f)===-1&&s.push(f)}),s.forEach(o=>{o.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((s,o)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:r},!0),s.dragStatus!=="dragging"&&t.DD._dragElements.delete(o)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(qu)),qu}var Yu={},Yt={},Y0;function Ge(){if(Y0)return Yt;Y0=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.RGBComponent=r,Yt.alphaComponent=s,Yt.getNumberValidator=o,Yt.getNumberOrArrayOfNumbersValidator=c,Yt.getNumberOrAutoValidator=u,Yt.getStringValidator=h,Yt.getStringOrGradientValidator=f,Yt.getFunctionValidator=p,Yt.getNumberArrayValidator=b,Yt.getBooleanValidator=y,Yt.getComponentValidator=g;const t=we(),e=rt();function a(v){return e.Util._isString(v)?'"'+v+'"':Object.prototype.toString.call(v)==="[object Number]"||e.Util._isBoolean(v)?v:Object.prototype.toString.call(v)}function r(v){return v>255?255:v<0?0:Math.round(v)}function s(v){return v>1?1:v<1e-4?1e-4:v}function o(){if(t.Konva.isUnminified)return function(v,C){return e.Util._isNumber(v)||e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a number.'),v}}function c(v){if(t.Konva.isUnminified)return function(C,E){let O=e.Util._isNumber(C),x=e.Util._isArray(C)&&C.length==v;return!O&&!x&&e.Util.warn(a(C)+' is a not valid value for "'+E+'" attribute. The value should be a number or Array<number>('+v+")"),C}}function u(){if(t.Konva.isUnminified)return function(v,C){return e.Util._isNumber(v)||v==="auto"||e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a number or "auto".'),v}}function h(){if(t.Konva.isUnminified)return function(v,C){return e.Util._isString(v)||e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a string.'),v}}function f(){if(t.Konva.isUnminified)return function(v,C){const E=e.Util._isString(v),O=Object.prototype.toString.call(v)==="[object CanvasGradient]"||v&&v.addColorStop;return E||O||e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a string or a native gradient.'),v}}function p(){if(t.Konva.isUnminified)return function(v,C){return e.Util._isFunction(v)||e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a function.'),v}}function b(){if(t.Konva.isUnminified)return function(v,C){const E=Int8Array?Object.getPrototypeOf(Int8Array):null;return E&&v instanceof E||(e.Util._isArray(v)?v.forEach(function(O){e.Util._isNumber(O)||e.Util.warn('"'+C+'" attribute has non numeric element '+O+". Make sure that all elements are numbers.")}):e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a array of numbers.')),v}}function y(){if(t.Konva.isUnminified)return function(v,C){return v===!0||v===!1||e.Util.warn(a(v)+' is a not valid value for "'+C+'" attribute. The value should be a boolean.'),v}}function g(v){if(t.Konva.isUnminified)return function(C,E){return C==null||e.Util.isObject(C)||e.Util.warn(a(C)+' is a not valid value for "'+E+'" attribute. The value should be an object with properties '+v),C}}return Yt}var K0;function Le(){return K0||(K0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=rt(),a=Ge(),r="get",s="set";t.Factory={addGetterSetter(o,c,u,h,f){t.Factory.addGetter(o,c,u),t.Factory.addSetter(o,c,h,f),t.Factory.addOverloadedGetterSetter(o,c)},addGetter(o,c,u){const h=r+e.Util._capitalize(c);o.prototype[h]=o.prototype[h]||function(){const f=this.attrs[c];return f===void 0?u:f}},addSetter(o,c,u,h){const f=s+e.Util._capitalize(c);o.prototype[f]||t.Factory.overWriteSetter(o,c,u,h)},overWriteSetter(o,c,u,h){const f=s+e.Util._capitalize(c);o.prototype[f]=function(p){return u&&p!==void 0&&p!==null&&(p=u.call(this,p,c)),this._setAttr(c,p),h&&h.call(this),this}},addComponentsGetterSetter(o,c,u,h,f){const p=u.length,b=e.Util._capitalize,y=r+b(c),g=s+b(c);o.prototype[y]=function(){const C={};for(let E=0;E<p;E++){const O=u[E];C[O]=this.getAttr(c+b(O))}return C};const v=(0,a.getComponentValidator)(u);o.prototype[g]=function(C){const E=this.attrs[c];h&&(C=h.call(this,C,c)),v&&v.call(this,C,c);for(const O in C)C.hasOwnProperty(O)&&this._setAttr(c+b(O),C[O]);return C||u.forEach(O=>{this._setAttr(c+b(O),void 0)}),this._fireChangeEvent(c,E,C),f&&f.call(this),this},t.Factory.addOverloadedGetterSetter(o,c)},addOverloadedGetterSetter(o,c){const u=e.Util._capitalize(c),h=s+u,f=r+u;o.prototype[c]=function(){return arguments.length?(this[h](arguments[0]),this):this[f]()}},addDeprecatedGetterSetter(o,c,u,h){e.Util.error("Adding deprecated "+c);const f=r+e.Util._capitalize(c),p=c+" property is deprecated and will be removed soon. Look at Konva change log for more information.";o.prototype[f]=function(){e.Util.error(p);const b=this.attrs[c];return b===void 0?u:b},t.Factory.addSetter(o,c,h,function(){e.Util.error(p)}),t.Factory.addOverloadedGetterSetter(o,c)},backCompat(o,c){e.Util.each(c,function(u,h){const f=o.prototype[h],p=r+e.Util._capitalize(u),b=s+e.Util._capitalize(u);function y(){f.apply(this,arguments),e.Util.error('"'+u+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}o.prototype[u]=y,o.prototype[p]=y,o.prototype[b]=y})},afterSetFilter(){this._filterUpToDate=!1}}}(Yu)),Yu}var X0;function ct(){if(X0)return Ir;X0=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.Node=void 0;const t=jl(),e=ih(),a=Le(),r=we(),s=rt(),o=Ge(),c="absoluteOpacity",u="allEventListeners",h="absoluteTransform",f="absoluteScale",p="canvas",b="Change",y="children",g="konva",v="listening",C="mouseenter",E="mouseleave",O="pointerenter",x="pointerleave",_="touchenter",T="touchleave",M="set",k="Shape",G=" ",R="stage",N="transform",P="Stage",F="visible",j=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(G);let Y=1;class K{constructor(A){this._id=Y++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(A),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(A){(A===N||A===h)&&this._cache.get(A)?this._cache.get(A).dirty=!0:A?this._cache.delete(A):this._cache.clear()}_getCache(A,D){let U=this._cache.get(A);return(U===void 0||(A===N||A===h)&&U.dirty===!0)&&(U=D.call(this),this._cache.set(A,U)),U}_calculate(A,D,U){if(!this._attachedDepsListeners.get(A)){const L=D.map(V=>V+"Change.konva").join(G);this.on(L,()=>{this._clearCache(A)}),this._attachedDepsListeners.set(A,!0)}return this._getCache(A,U)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(A){this._clearCache(A),A===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:A,filter:D,hit:U,buffer:L}=this._cache.get(p);s.Util.releaseCanvas(A,D,U,L),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(A){const D=A||{};let U={};(D.x===void 0||D.y===void 0||D.width===void 0||D.height===void 0)&&(U=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let L=Math.ceil(D.width||U.width),V=Math.ceil(D.height||U.height),ee=D.pixelRatio,H=D.x===void 0?Math.floor(U.x):D.x,te=D.y===void 0?Math.floor(U.y):D.y,ae=D.offset||0,J=D.drawBorder||!1,z=D.hitCanvasPixelRatio||1;if(!L||!V){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Z=Math.abs(Math.round(U.x)-H)>.5?1:0,se=Math.abs(Math.round(U.y)-te)>.5?1:0;L+=ae*2+Z,V+=ae*2+se,H-=ae,te-=ae;const ue=new t.SceneCanvas({pixelRatio:ee,width:L,height:V}),me=new t.SceneCanvas({pixelRatio:ee,width:0,height:0,willReadFrequently:!0}),Se=new t.HitCanvas({pixelRatio:z,width:L,height:V}),Me=ue.getContext(),He=Se.getContext(),Ce=new t.SceneCanvas({width:ue.width/ue.pixelRatio+Math.abs(H),height:ue.height/ue.pixelRatio+Math.abs(te),pixelRatio:ue.pixelRatio}),Qe=Ce.getContext();return Se.isCache=!0,ue.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,D.imageSmoothingEnabled===!1&&(ue.getContext()._context.imageSmoothingEnabled=!1,me.getContext()._context.imageSmoothingEnabled=!1),Me.save(),He.save(),Qe.save(),Me.translate(-H,-te),He.translate(-H,-te),Qe.translate(-H,-te),Ce.x=H,Ce.y=te,this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(f),this.drawScene(ue,this,Ce),this.drawHit(Se,this),this._isUnderCache=!1,Me.restore(),He.restore(),J&&(Me.save(),Me.beginPath(),Me.rect(0,0,L,V),Me.closePath(),Me.setAttr("strokeStyle","red"),Me.setAttr("lineWidth",5),Me.stroke(),Me.restore()),this._cache.set(p,{scene:ue,filter:me,hit:Se,buffer:Ce,x:H,y:te}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(A){throw new Error('abstract "getClientRect" method call')}_transformedRect(A,D){const U=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}];let L=1/0,V=1/0,ee=-1/0,H=-1/0;const te=this.getAbsoluteTransform(D);return U.forEach(function(ae){const J=te.point(ae);L===void 0&&(L=ee=J.x,V=H=J.y),L=Math.min(L,J.x),V=Math.min(V,J.y),ee=Math.max(ee,J.x),H=Math.max(H,J.y)}),{x:L,y:V,width:ee-L,height:H-V}}_drawCachedSceneCanvas(A){A.save(),A._applyOpacity(this),A._applyGlobalCompositeOperation(this);const D=this._getCanvasCache();A.translate(D.x,D.y);const U=this._getCachedSceneCanvas(),L=U.pixelRatio;A.drawImage(U._canvas,0,0,U.width/L,U.height/L),A.restore()}_drawCachedHitCanvas(A){const D=this._getCanvasCache(),U=D.hit;A.save(),A.translate(D.x,D.y),A.drawImage(U._canvas,0,0,U.width/U.pixelRatio,U.height/U.pixelRatio),A.restore()}_getCachedSceneCanvas(){let A=this.filters(),D=this._getCanvasCache(),U=D.scene,L=D.filter,V=L.getContext(),ee,H,te,ae;if(A){if(!this._filterUpToDate){const J=U.pixelRatio;L.setSize(U.width/U.pixelRatio,U.height/U.pixelRatio);try{for(ee=A.length,V.clear(),V.drawImage(U._canvas,0,0,U.getWidth()/J,U.getHeight()/J),H=V.getImageData(0,0,L.getWidth(),L.getHeight()),te=0;te<ee;te++){if(ae=A[te],typeof ae!="function"){s.Util.error("Filter should be type of function, but got "+typeof ae+" instead. Please check correct filters");continue}ae.call(this,H),V.putImageData(H,0,0)}}catch(z){s.Util.error("Unable to apply filter. "+z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return L}return U}on(A,D){if(this._cache&&this._cache.delete(u),arguments.length===3)return this._delegate.apply(this,arguments);const U=A.split(G);for(let L=0;L<U.length;L++){const ee=U[L].split("."),H=ee[0],te=ee[1]||"";this.eventListeners[H]||(this.eventListeners[H]=[]),this.eventListeners[H].push({name:te,handler:D})}return this}off(A,D){let U=(A||"").split(G),L=U.length,V,ee,H,te,ae,J;if(this._cache&&this._cache.delete(u),!A)for(ee in this.eventListeners)this._off(ee);for(V=0;V<L;V++)if(H=U[V],te=H.split("."),ae=te[0],J=te[1],ae)this.eventListeners[ae]&&this._off(ae,J,D);else for(ee in this.eventListeners)this._off(ee,J,D);return this}dispatchEvent(A){const D={target:this,type:A.type,evt:A};return this.fire(A.type,D),this}addEventListener(A,D){return this.on(A,function(U){D.call(this,U.evt)}),this}removeEventListener(A){return this.off(A),this}_delegate(A,D,U){const L=this;this.on(A,function(V){const ee=V.target.findAncestors(D,!0,L);for(let H=0;H<ee.length;H++)V=s.Util.cloneObject(V),V.currentTarget=ee[H],U.call(ee[H],V)})}remove(){return this.isDragging()&&this.stopDrag(),e.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(R),this._clearSelfAndDescendantCache(F),this._clearSelfAndDescendantCache(v)}_remove(){this._clearCaches();const A=this.getParent();A&&A.children&&(A.children.splice(this.index,1),A._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(A){const D="get"+s.Util._capitalize(A);return s.Util._isFunction(this[D])?this[D]():this.attrs[A]}getAncestors(){let A=this.getParent(),D=[];for(;A;)D.push(A),A=A.getParent();return D}getAttrs(){return this.attrs||{}}setAttrs(A){return this._batchTransformChanges(()=>{let D,U;if(!A)return this;for(D in A)D!==y&&(U=M+s.Util._capitalize(D),s.Util._isFunction(this[U])?this[U](A[D]):this._setAttr(D,A[D]))}),this}isListening(){return this._getCache(v,this._isListening)}_isListening(A){if(!this.listening())return!1;const U=this.getParent();return U&&U!==A&&this!==A?U._isListening(A):!0}isVisible(){return this._getCache(F,this._isVisible)}_isVisible(A){if(!this.visible())return!1;const U=this.getParent();return U&&U!==A&&this!==A?U._isVisible(A):!0}shouldDrawHit(A,D=!1){if(A)return this._isVisible(A)&&this._isListening(A);const U=this.getLayer();let L=!1;e.DD._dragElements.forEach(ee=>{ee.dragStatus==="dragging"&&(ee.node.nodeType==="Stage"||ee.node.getLayer()===U)&&(L=!0)});const V=!D&&!r.Konva.hitOnDragEnabled&&(L||r.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!V}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let A=this.getDepth(),D=this,U=0,L,V,ee,H;function te(J){for(L=[],V=J.length,ee=0;ee<V;ee++)H=J[ee],U++,H.nodeType!==k&&(L=L.concat(H.getChildren().slice())),H._id===D._id&&(ee=V);L.length>0&&L[0].getDepth()<=A&&te(L)}const ae=this.getStage();return D.nodeType!==P&&ae&&te(ae.getChildren()),U}getDepth(){let A=0,D=this.parent;for(;D;)A++,D=D.parent;return A}_batchTransformChanges(A){this._batchingTransformChange=!0,A(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(N),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(A){return this._batchTransformChanges(()=>{this.x(A.x),this.y(A.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const A=this.getStage();if(!A)return null;const D=A.getPointerPosition();if(!D)return null;const U=this.getAbsoluteTransform().copy();return U.invert(),U.point(D)}getAbsolutePosition(A){let D=!1,U=this.parent;for(;U;){if(U.isCached()){D=!0;break}U=U.parent}D&&!A&&(A=!0);const L=this.getAbsoluteTransform(A).getMatrix(),V=new s.Transform,ee=this.offset();return V.m=L.slice(),V.translate(ee.x,ee.y),V.getTranslation()}setAbsolutePosition(A){const{x:D,y:U,...L}=this._clearTransform();this.attrs.x=D,this.attrs.y=U,this._clearCache(N);const V=this._getAbsoluteTransform().copy();return V.invert(),V.translate(A.x,A.y),A={x:this.attrs.x+V.getTranslation().x,y:this.attrs.y+V.getTranslation().y},this._setTransform(L),this.setPosition({x:A.x,y:A.y}),this._clearCache(N),this._clearSelfAndDescendantCache(h),this}_setTransform(A){let D;for(D in A)this.attrs[D]=A[D]}_clearTransform(){const A={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,A}move(A){let D=A.x,U=A.y,L=this.x(),V=this.y();return D!==void 0&&(L+=D),U!==void 0&&(V+=U),this.setPosition({x:L,y:V}),this}_eachAncestorReverse(A,D){let U=[],L=this.getParent(),V,ee;if(!(D&&D._id===this._id)){for(U.unshift(this);L&&(!D||L._id!==D._id);)U.unshift(L),L=L.parent;for(V=U.length,ee=0;ee<V;ee++)A(U[ee])}}rotate(A){return this.rotation(this.rotation()+A),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const A=this.index,D=this.parent.getChildren().length;return A<D-1?(this.parent.children.splice(A,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const A=this.index,D=this.parent.getChildren().length;return A<D-1?(this.parent.children.splice(A,1),this.parent.children.splice(A+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const A=this.index;return A>0?(this.parent.children.splice(A,1),this.parent.children.splice(A-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const A=this.index;return A>0?(this.parent.children.splice(A,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(A){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(A<0||A>=this.parent.children.length)&&s.Util.warn("Unexpected value "+A+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const D=this.index;return this.parent.children.splice(D,1),this.parent.children.splice(A,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(c,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let A=this.opacity();const D=this.getParent();return D&&!D._isUnderCache&&(A*=D.getAbsoluteOpacity()),A}moveTo(A){return this.getParent()!==A&&(this._remove(),A.add(this)),this}toObject(){let A=this.getAttrs(),D,U,L,V,ee;const H={attrs:{},className:this.getClassName()};for(D in A)U=A[D],ee=s.Util.isObject(U)&&!s.Util._isPlainObject(U)&&!s.Util._isArray(U),!ee&&(L=typeof this[D]=="function"&&this[D],delete A[D],V=L?L.call(this):null,A[D]=U,V!==U&&(H.attrs[D]=U));return s.Util._prepareToStringify(H)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(A,D,U){const L=[];D&&this._isMatch(A)&&L.push(this);let V=this.parent;for(;V;){if(V===U)return L;V._isMatch(A)&&L.push(V),V=V.parent}return L}isAncestorOf(A){return!1}findAncestor(A,D,U){return this.findAncestors(A,D,U)[0]}_isMatch(A){if(!A)return!1;if(typeof A=="function")return A(this);let D=A.replace(/ /g,"").split(","),U=D.length,L,V;for(L=0;L<U;L++)if(V=D[L],s.Util.isValidSelector(V)||(s.Util.warn('Selector "'+V+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),V.charAt(0)==="#"){if(this.id()===V.slice(1))return!0}else if(V.charAt(0)==="."){if(this.hasName(V.slice(1)))return!0}else if(this.className===V||this.nodeType===V)return!0;return!1}getLayer(){const A=this.getParent();return A?A.getLayer():null}getStage(){return this._getCache(R,this._getStage)}_getStage(){const A=this.getParent();return A?A.getStage():null}fire(A,D={},U){return D.target=D.target||this,U?this._fireAndBubble(A,D):this._fire(A,D),this}getAbsoluteTransform(A){return A?this._getAbsoluteTransform(A):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(A){let D;if(A)return D=new s.Transform,this._eachAncestorReverse(function(U){const L=U.transformsEnabled();L==="all"?D.multiply(U.getTransform()):L==="position"&&D.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},A),D;{D=this._cache.get(h)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(D):D.reset();const U=this.transformsEnabled();if(U==="all")D.multiply(this.getTransform());else if(U==="position"){const L=this.attrs.x||0,V=this.attrs.y||0,ee=this.attrs.offsetX||0,H=this.attrs.offsetY||0;D.translate(L-ee,V-H)}return D.dirty=!1,D}}getAbsoluteScale(A){let D=this;for(;D;)D._isUnderCache&&(A=D),D=D.getParent();const L=this.getAbsoluteTransform(A).decompose();return{x:L.scaleX,y:L.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(N,this._getTransform)}_getTransform(){var A,D;const U=this._cache.get(N)||new s.Transform;U.reset();const L=this.x(),V=this.y(),ee=r.Konva.getAngle(this.rotation()),H=(A=this.attrs.scaleX)!==null&&A!==void 0?A:1,te=(D=this.attrs.scaleY)!==null&&D!==void 0?D:1,ae=this.attrs.skewX||0,J=this.attrs.skewY||0,z=this.attrs.offsetX||0,Z=this.attrs.offsetY||0;return(L!==0||V!==0)&&U.translate(L,V),ee!==0&&U.rotate(ee),(ae!==0||J!==0)&&U.skew(ae,J),(H!==1||te!==1)&&U.scale(H,te),(z!==0||Z!==0)&&U.translate(-1*z,-1*Z),U.dirty=!1,U}clone(A){let D=s.Util.cloneObject(this.attrs),U,L,V,ee,H;for(U in A)D[U]=A[U];const te=new this.constructor(D);for(U in this.eventListeners)for(L=this.eventListeners[U],V=L.length,ee=0;ee<V;ee++)H=L[ee],H.name.indexOf(g)<0&&(te.eventListeners[U]||(te.eventListeners[U]=[]),te.eventListeners[U].push(H));return te}_toKonvaCanvas(A){A=A||{};const D=this.getClientRect(),U=this.getStage(),L=A.x!==void 0?A.x:Math.floor(D.x),V=A.y!==void 0?A.y:Math.floor(D.y),ee=A.pixelRatio||1,H=new t.SceneCanvas({width:A.width||Math.ceil(D.width)||(U?U.width():0),height:A.height||Math.ceil(D.height)||(U?U.height():0),pixelRatio:ee}),te=H.getContext(),ae=new t.SceneCanvas({width:H.width/H.pixelRatio+Math.abs(L),height:H.height/H.pixelRatio+Math.abs(V),pixelRatio:H.pixelRatio});return A.imageSmoothingEnabled===!1&&(te._context.imageSmoothingEnabled=!1),te.save(),(L||V)&&te.translate(-1*L,-1*V),this.drawScene(H,void 0,ae),te.restore(),H}toCanvas(A){return this._toKonvaCanvas(A)._canvas}toDataURL(A){A=A||{};const D=A.mimeType||null,U=A.quality||null,L=this._toKonvaCanvas(A).toDataURL(D,U);return A.callback&&A.callback(L),L}toImage(A){return new Promise((D,U)=>{try{const L=A==null?void 0:A.callback;L&&delete A.callback,s.Util._urlToImage(this.toDataURL(A),function(V){D(V),L==null||L(V)})}catch(L){U(L)}})}toBlob(A){return new Promise((D,U)=>{try{const L=A==null?void 0:A.callback;L&&delete A.callback,this.toCanvas(A).toBlob(V=>{D(V),L==null||L(V)},A==null?void 0:A.mimeType,A==null?void 0:A.quality)}catch(L){U(L)}})}setSize(A){return this.width(A.width),this.height(A.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance}_off(A,D,U){let L=this.eventListeners[A],V,ee,H;for(V=0;V<L.length;V++)if(ee=L[V].name,H=L[V].handler,(ee!=="konva"||D==="konva")&&(!D||ee===D)&&(!U||U===H)){if(L.splice(V,1),L.length===0){delete this.eventListeners[A];break}V--}}_fireChangeEvent(A,D,U){this._fire(A+b,{oldVal:D,newVal:U})}addName(A){if(!this.hasName(A)){const D=this.name(),U=D?D+" "+A:A;this.name(U)}return this}hasName(A){if(!A)return!1;const D=this.name();return D?(D||"").split(/\s/g).indexOf(A)!==-1:!1}removeName(A){const D=(this.name()||"").split(/\s/g),U=D.indexOf(A);return U!==-1&&(D.splice(U,1),this.name(D.join(" "))),this}setAttr(A,D){const U=this[M+s.Util._capitalize(A)];return s.Util._isFunction(U)?U.call(this,D):this._setAttr(A,D),this}_requestDraw(){if(r.Konva.autoDrawEnabled){const A=this.getLayer()||this.getStage();A==null||A.batchDraw()}}_setAttr(A,D){const U=this.attrs[A];U===D&&!s.Util.isObject(D)||(D==null?delete this.attrs[A]:this.attrs[A]=D,this._shouldFireChangeEvents&&this._fireChangeEvent(A,U,D),this._requestDraw())}_setComponentAttr(A,D,U){let L;U!==void 0&&(L=this.attrs[A],L||(this.attrs[A]=this.getAttr(A)),this.attrs[A][D]=U,this._fireChangeEvent(A,L,U))}_fireAndBubble(A,D,U){D&&this.nodeType===k&&(D.target=this);const L=[C,E,O,x,_,T];if(!(L.indexOf(A)!==-1&&(U&&(this===U||this.isAncestorOf&&this.isAncestorOf(U))||this.nodeType==="Stage"&&!U))){this._fire(A,D);const ee=L.indexOf(A)!==-1&&U&&U.isAncestorOf&&U.isAncestorOf(this)&&!U.isAncestorOf(this.parent);(D&&!D.cancelBubble||!D)&&this.parent&&this.parent.isListening()&&!ee&&(U&&U.parent?this._fireAndBubble.call(this.parent,A,D,U):this._fireAndBubble.call(this.parent,A,D))}}_getProtoListeners(A){var D,U,L;const V=(D=this._cache.get(u))!==null&&D!==void 0?D:{};let ee=V==null?void 0:V[A];if(ee===void 0){ee=[];let H=Object.getPrototypeOf(this);for(;H;){const te=(L=(U=H.eventListeners)===null||U===void 0?void 0:U[A])!==null&&L!==void 0?L:[];ee.push(...te),H=Object.getPrototypeOf(H)}V[A]=ee,this._cache.set(u,V)}return ee}_fire(A,D){D=D||{},D.currentTarget=this,D.type=A;const U=this._getProtoListeners(A);if(U)for(let V=0;V<U.length;V++)U[V].handler.call(this,D);const L=this.eventListeners[A];if(L)for(let V=0;V<L.length;V++)L[V].handler.call(this,D)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(A){const D=A?A.pointerId:void 0,U=this.getStage(),L=this.getAbsolutePosition();if(!U)return;const V=U._getPointerById(D)||U._changedPointerPositions[0]||L;e.DD._dragElements.set(this._id,{node:this,startPointerPos:V,offset:{x:V.x-L.x,y:V.y-L.y},dragStatus:"ready",pointerId:D})}startDrag(A,D=!0){e.DD._dragElements.has(this._id)||this._createDragElement(A);const U=e.DD._dragElements.get(this._id);U.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:A&&A.evt},D)}_setDragPosition(A,D){const U=this.getStage()._getPointerById(D.pointerId);if(!U)return;let L={x:U.x-D.offset.x,y:U.y-D.offset.y};const V=this.dragBoundFunc();if(V!==void 0){const ee=V.call(this,L,A);ee?L=ee:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==L.x||this._lastPos.y!==L.y)&&(this.setAbsolutePosition(L),this._requestDraw()),this._lastPos=L}stopDrag(A){const D=e.DD._dragElements.get(this._id);D&&(D.dragStatus="stopped"),e.DD._endDragBefore(A),e.DD._endDragAfter(A)}setDraggable(A){this._setAttr("draggable",A),this._dragChange()}isDragging(){const A=e.DD._dragElements.get(this._id);return A?A.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(A){if(!(!(A.evt.button!==void 0)||r.Konva.dragButtons.indexOf(A.evt.button)>=0)||this.isDragging())return;let L=!1;e.DD._dragElements.forEach(V=>{this.isAncestorOf(V.node)&&(L=!0)}),L||this._createDragElement(A)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const D=e.DD._dragElements.get(this._id),U=D&&D.dragStatus==="dragging",L=D&&D.dragStatus==="ready";U?this.stopDrag():L&&e.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(A={x:0,y:0}){const D=this.getStage();if(!D)return!1;const U={x:-A.x,y:-A.y,width:D.width()+2*A.x,height:D.height()+2*A.y};return s.Util.haveIntersection(U,this.getClientRect())}static create(A,D){return s.Util._isString(A)&&(A=JSON.parse(A)),this._createNode(A,D)}static _createNode(A,D){let U=K.prototype.getClassName.call(A),L=A.children,V,ee,H;D&&(A.attrs.container=D),r.Konva[U]||(s.Util.warn('Can not find a node with class name "'+U+'". Fallback to "Shape".'),U="Shape");const te=r.Konva[U];if(V=new te(A.attrs),L)for(ee=L.length,H=0;H<ee;H++)V.add(K._createNode(L[H]));return V}}Ir.Node=K,K.prototype.nodeType="Node",K.prototype._attrsAffectingSize=[],K.prototype.eventListeners={},K.prototype.on.call(K.prototype,j,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(N),this._clearSelfAndDescendantCache(h)}),K.prototype.on.call(K.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(F)}),K.prototype.on.call(K.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(v)}),K.prototype.on.call(K.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(c)});const I=a.Factory.addGetterSetter;return I(K,"zIndex"),I(K,"absolutePosition"),I(K,"position"),I(K,"x",0,(0,o.getNumberValidator)()),I(K,"y",0,(0,o.getNumberValidator)()),I(K,"globalCompositeOperation","source-over",(0,o.getStringValidator)()),I(K,"opacity",1,(0,o.getNumberValidator)()),I(K,"name","",(0,o.getStringValidator)()),I(K,"id","",(0,o.getStringValidator)()),I(K,"rotation",0,(0,o.getNumberValidator)()),a.Factory.addComponentsGetterSetter(K,"scale",["x","y"]),I(K,"scaleX",1,(0,o.getNumberValidator)()),I(K,"scaleY",1,(0,o.getNumberValidator)()),a.Factory.addComponentsGetterSetter(K,"skew",["x","y"]),I(K,"skewX",0,(0,o.getNumberValidator)()),I(K,"skewY",0,(0,o.getNumberValidator)()),a.Factory.addComponentsGetterSetter(K,"offset",["x","y"]),I(K,"offsetX",0,(0,o.getNumberValidator)()),I(K,"offsetY",0,(0,o.getNumberValidator)()),I(K,"dragDistance",void 0,(0,o.getNumberValidator)()),I(K,"width",0,(0,o.getNumberValidator)()),I(K,"height",0,(0,o.getNumberValidator)()),I(K,"listening",!0,(0,o.getBooleanValidator)()),I(K,"preventDefault",!0,(0,o.getBooleanValidator)()),I(K,"filters",void 0,function(ie){return this._filterUpToDate=!1,ie}),I(K,"visible",!0,(0,o.getBooleanValidator)()),I(K,"transformsEnabled","all",(0,o.getStringValidator)()),I(K,"size"),I(K,"dragBoundFunc"),I(K,"draggable",!1,(0,o.getBooleanValidator)()),a.Factory.backCompat(K,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Ir}var Hr={},Z0;function Il(){if(Z0)return Hr;Z0=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.Container=void 0;const t=Le(),e=ct(),a=Ge();let r=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(o){const c=this.children||[];return o?c.filter(o):c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(o.length===0)return this;if(o.length>1){for(let u=0;u<o.length;u++)this.add(o[u]);return this}const c=o[0];return c.getParent()?(c.moveTo(this),this):(this._validateAdd(c),c.index=this.getChildren().length,c.parent=this,c._clearCaches(),this.getChildren().push(c),this._fire("add",{child:c}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){const c=this._generalFind(o,!0);return c.length>0?c[0]:void 0}_generalFind(o,c){const u=[];return this._descendants(h=>{const f=h._isMatch(o);return f&&u.push(h),!!(f&&c)}),u}_descendants(o){let c=!1;const u=this.getChildren();for(const h of u){if(c=o(h),c)return!0;if(h.hasChildren()&&(c=h._descendants(o),c))return!0}return!1}toObject(){const o=e.Node.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(c=>{o.children.push(c.toObject())}),o}isAncestorOf(o){let c=o.getParent();for(;c;){if(c._id===this._id)return!0;c=c.getParent()}return!1}clone(o){const c=e.Node.prototype.clone.call(this,o);return this.getChildren().forEach(function(u){c.add(u.clone())}),c}getAllIntersections(o){const c=[];return this.find("Shape").forEach(u=>{u.isVisible()&&u.intersects(o)&&c.push(u)}),c}_clearSelfAndDescendantCache(o){var c;super._clearSelfAndDescendantCache(o),!this.isCached()&&((c=this.children)===null||c===void 0||c.forEach(function(u){u._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;(o=this.children)===null||o===void 0||o.forEach(function(c,u){c.index=u}),this._requestDraw()}drawScene(o,c,u){const h=this.getLayer(),f=o||h&&h.getCanvas(),p=f&&f.getContext(),b=this._getCanvasCache(),y=b&&b.scene,g=f&&f.isCache;if(!this.isVisible()&&!g)return this;if(y){p.save();const v=this.getAbsoluteTransform(c).getMatrix();p.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(p),p.restore()}else this._drawChildren("drawScene",f,c,u);return this}drawHit(o,c){if(!this.shouldDrawHit(c))return this;const u=this.getLayer(),h=o||u&&u.hitCanvas,f=h&&h.getContext(),p=this._getCanvasCache();if(p&&p.hit){f.save();const y=this.getAbsoluteTransform(c).getMatrix();f.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(f),f.restore()}else this._drawChildren("drawHit",h,c);return this}_drawChildren(o,c,u,h){var f;const p=c&&c.getContext(),b=this.clipWidth(),y=this.clipHeight(),g=this.clipFunc(),v=typeof b=="number"&&typeof y=="number"||g,C=u===this;if(v){p.save();const O=this.getAbsoluteTransform(u);let x=O.getMatrix();p.transform(x[0],x[1],x[2],x[3],x[4],x[5]),p.beginPath();let _;if(g)_=g.call(this,p,this);else{const T=this.clipX(),M=this.clipY();p.rect(T||0,M||0,b,y)}p.clip.apply(p,_),x=O.copy().invert().getMatrix(),p.transform(x[0],x[1],x[2],x[3],x[4],x[5])}const E=!C&&this.globalCompositeOperation()!=="source-over"&&o==="drawScene";E&&(p.save(),p._applyGlobalCompositeOperation(this)),(f=this.children)===null||f===void 0||f.forEach(function(O){O[o](c,u,h)}),E&&p.restore(),v&&p.restore()}getClientRect(o={}){var c;const u=o.skipTransform,h=o.relativeTo;let f,p,b,y,g={x:1/0,y:1/0,width:0,height:0};const v=this;(c=this.children)===null||c===void 0||c.forEach(function(O){if(!O.visible())return;const x=O.getClientRect({relativeTo:v,skipShadow:o.skipShadow,skipStroke:o.skipStroke});x.width===0&&x.height===0||(f===void 0?(f=x.x,p=x.y,b=x.x+x.width,y=x.y+x.height):(f=Math.min(f,x.x),p=Math.min(p,x.y),b=Math.max(b,x.x+x.width),y=Math.max(y,x.y+x.height)))});const C=this.find("Shape");let E=!1;for(let O=0;O<C.length;O++)if(C[O]._isVisible(this)){E=!0;break}return E&&f!==void 0?g={x:f,y:p,width:b-f,height:y-p}:g={x:0,y:0,width:0,height:0},u?g:this._transformedRect(g,h)}};return Hr.Container=r,t.Factory.addComponentsGetterSetter(r,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(r,"clipX",void 0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipY",void 0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipWidth",void 0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipHeight",void 0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(r,"clipFunc"),Hr}var Ku={},Ai={},Q0;function vy(){if(Q0)return Ai;Q0=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.getCapturedShape=r,Ai.createEvent=s,Ai.hasPointerCapture=o,Ai.setPointerCapture=c,Ai.releaseCapture=u;const t=we(),e=new Map,a=t.Konva._global.PointerEvent!==void 0;function r(h){return e.get(h)}function s(h){return{evt:h,pointerId:h.pointerId}}function o(h,f){return e.get(h)===f}function c(h,f){u(h),f.getStage()&&(e.set(h,f),a&&f._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function u(h,f){const p=e.get(h);if(!p)return;const b=p.getStage();b&&b.content,e.delete(h),a&&p._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return Ai}var W0;function ab(){return W0||(W0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=rt(),a=Le(),r=Il(),s=we(),o=jl(),c=ih(),u=we(),h=vy(),f="Stage",p="string",b="px",y="mouseout",g="mouseleave",v="mouseover",C="mouseenter",E="mousemove",O="mousedown",x="mouseup",_="pointermove",T="pointerdown",M="pointerup",k="pointercancel",G="lostpointercapture",R="pointerout",N="pointerleave",P="pointerover",F="pointerenter",j="contextmenu",Y="touchstart",K="touchend",I="touchmove",ie="touchcancel",A="wheel",D=5,U=[[C,"_pointerenter"],[O,"_pointerdown"],[E,"_pointermove"],[x,"_pointerup"],[g,"_pointerleave"],[Y,"_pointerdown"],[I,"_pointermove"],[K,"_pointerup"],[ie,"_pointercancel"],[v,"_pointerover"],[A,"_wheel"],[j,"_contextmenu"],[T,"_pointerdown"],[_,"_pointermove"],[M,"_pointerup"],[k,"_pointercancel"],[N,"_pointerleave"],[G,"_lostpointercapture"]],L={mouse:{[R]:y,[N]:g,[P]:v,[F]:C,[_]:E,[T]:O,[M]:x,[k]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[R]:"touchout",[N]:"touchleave",[P]:"touchover",[F]:"touchenter",[_]:I,[T]:Y,[M]:K,[k]:ie,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[R]:R,[N]:N,[P]:P,[F]:F,[_]:_,[T]:T,[M]:M,[k]:k,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},V=J=>J.indexOf("pointer")>=0?"pointer":J.indexOf("touch")>=0?"touch":"mouse",ee=J=>{const z=V(J);if(z==="pointer")return s.Konva.pointerEventsEnabled&&L.pointer;if(z==="touch")return L.touch;if(z==="mouse")return L.mouse};function H(J={}){return(J.clipFunc||J.clipWidth||J.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),J}const te="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ae extends r.Container{constructor(z){super(H(z)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{H(this.attrs)}),this._checkVisibility()}_validateAdd(z){const Z=z.getType()==="Layer",se=z.getType()==="FastLayer";Z||se||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const z=this.visible()?"":"none";this.content.style.display=z}setContainer(z){if(typeof z===p){let Z;if(z.charAt(0)==="."){const se=z.slice(1);z=document.getElementsByClassName(se)[0]}else z.charAt(0)!=="#"?Z=z:Z=z.slice(1),z=document.getElementById(Z);if(!z)throw"Can not find container in document with id "+Z}return this._setAttr("container",z),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),z.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const z=this.children,Z=z.length;for(let se=0;se<Z;se++)z[se].clear();return this}clone(z){return z||(z={}),z.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,z)}destroy(){super.destroy();const z=this.content;z&&e.Util._isInDocument(z)&&this.container().removeChild(z);const Z=t.stages.indexOf(this);return Z>-1&&t.stages.splice(Z,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const z=this._pointerPositions[0]||this._changedPointerPositions[0];return z?{x:z.x,y:z.y}:(e.Util.warn(te),null)}_getPointerById(z){return this._pointerPositions.find(Z=>Z.id===z)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(z){z=z||{},z.x=z.x||0,z.y=z.y||0,z.width=z.width||this.width(),z.height=z.height||this.height();const Z=new o.SceneCanvas({width:z.width,height:z.height,pixelRatio:z.pixelRatio||1}),se=Z.getContext()._context,ue=this.children;return(z.x||z.y)&&se.translate(-1*z.x,-1*z.y),ue.forEach(function(me){if(!me.isVisible())return;const Se=me._toKonvaCanvas(z);se.drawImage(Se._canvas,z.x,z.y,Se.getWidth()/Se.getPixelRatio(),Se.getHeight()/Se.getPixelRatio())}),Z}getIntersection(z){if(!z)return null;const Z=this.children,se=Z.length,ue=se-1;for(let me=ue;me>=0;me--){const Se=Z[me].getIntersection(z);if(Se)return Se}return null}_resizeDOM(){const z=this.width(),Z=this.height();this.content&&(this.content.style.width=z+b,this.content.style.height=Z+b),this.bufferCanvas.setSize(z,Z),this.bufferHitCanvas.setSize(z,Z),this.children.forEach(se=>{se.setSize({width:z,height:Z}),se.draw()})}add(z,...Z){if(arguments.length>1){for(let ue=0;ue<arguments.length;ue++)this.add(arguments[ue]);return this}super.add(z);const se=this.children.length;return se>D&&e.Util.warn("The stage has "+se+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),z.setSize({width:this.width(),height:this.height()}),z.draw(),s.Konva.isBrowser&&this.content.appendChild(z.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(z){return h.hasPointerCapture(z,this)}setPointerCapture(z){h.setPointerCapture(z,this)}releaseCapture(z){h.releaseCapture(z,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&U.forEach(([z,Z])=>{this.content.addEventListener(z,se=>{this[Z](se)},{passive:!1})})}_pointerenter(z){this.setPointersPositions(z);const Z=ee(z.type);Z&&this._fire(Z.pointerenter,{evt:z,target:this,currentTarget:this})}_pointerover(z){this.setPointersPositions(z);const Z=ee(z.type);Z&&this._fire(Z.pointerover,{evt:z,target:this,currentTarget:this})}_getTargetShape(z){let Z=this[z+"targetShape"];return Z&&!Z.getStage()&&(Z=null),Z}_pointerleave(z){const Z=ee(z.type),se=V(z.type);if(!Z)return;this.setPointersPositions(z);const ue=this._getTargetShape(se),me=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;ue&&me?(ue._fireAndBubble(Z.pointerout,{evt:z}),ue._fireAndBubble(Z.pointerleave,{evt:z}),this._fire(Z.pointerleave,{evt:z,target:this,currentTarget:this}),this[se+"targetShape"]=null):me&&(this._fire(Z.pointerleave,{evt:z,target:this,currentTarget:this}),this._fire(Z.pointerout,{evt:z,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(z){const Z=ee(z.type),se=V(z.type);if(!Z)return;this.setPointersPositions(z);let ue=!1;this._changedPointerPositions.forEach(me=>{const Se=this.getIntersection(me);if(c.DD.justDragged=!1,s.Konva["_"+se+"ListenClick"]=!0,!Se||!Se.isListening()){this[se+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&Se.setPointerCapture(me.id),this[se+"ClickStartShape"]=Se,Se._fireAndBubble(Z.pointerdown,{evt:z,pointerId:me.id}),ue=!0;const Me=z.type.indexOf("touch")>=0;Se.preventDefault()&&z.cancelable&&Me&&z.preventDefault()}),ue||this._fire(Z.pointerdown,{evt:z,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(z){const Z=ee(z.type),se=V(z.type);if(!Z||(s.Konva.isDragging()&&c.DD.node.preventDefault()&&z.cancelable&&z.preventDefault(),this.setPointersPositions(z),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const me={};let Se=!1;const Me=this._getTargetShape(se);this._changedPointerPositions.forEach(He=>{const Ce=h.getCapturedShape(He.id)||this.getIntersection(He),Qe=He.id,qe={evt:z,pointerId:Qe},Je=Me!==Ce;if(Je&&Me&&(Me._fireAndBubble(Z.pointerout,{...qe},Ce),Me._fireAndBubble(Z.pointerleave,{...qe},Ce)),Ce){if(me[Ce._id])return;me[Ce._id]=!0}Ce&&Ce.isListening()?(Se=!0,Je&&(Ce._fireAndBubble(Z.pointerover,{...qe},Me),Ce._fireAndBubble(Z.pointerenter,{...qe},Me),this[se+"targetShape"]=Ce),Ce._fireAndBubble(Z.pointermove,{...qe})):Me&&(this._fire(Z.pointerover,{evt:z,target:this,currentTarget:this,pointerId:Qe}),this[se+"targetShape"]=null)}),Se||this._fire(Z.pointermove,{evt:z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(z){const Z=ee(z.type),se=V(z.type);if(!Z)return;this.setPointersPositions(z);const ue=this[se+"ClickStartShape"],me=this[se+"ClickEndShape"],Se={};let Me=!1;this._changedPointerPositions.forEach(He=>{const Ce=h.getCapturedShape(He.id)||this.getIntersection(He);if(Ce){if(Ce.releaseCapture(He.id),Se[Ce._id])return;Se[Ce._id]=!0}const Qe=He.id,qe={evt:z,pointerId:Qe};let Je=!1;s.Konva["_"+se+"InDblClickWindow"]?(Je=!0,clearTimeout(this[se+"DblTimeout"])):c.DD.justDragged||(s.Konva["_"+se+"InDblClickWindow"]=!0,clearTimeout(this[se+"DblTimeout"])),this[se+"DblTimeout"]=setTimeout(function(){s.Konva["_"+se+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Ce&&Ce.isListening()?(Me=!0,this[se+"ClickEndShape"]=Ce,Ce._fireAndBubble(Z.pointerup,{...qe}),s.Konva["_"+se+"ListenClick"]&&ue&&ue===Ce&&(Ce._fireAndBubble(Z.pointerclick,{...qe}),Je&&me&&me===Ce&&Ce._fireAndBubble(Z.pointerdblclick,{...qe}))):(this[se+"ClickEndShape"]=null,s.Konva["_"+se+"ListenClick"]&&this._fire(Z.pointerclick,{evt:z,target:this,currentTarget:this,pointerId:Qe}),Je&&this._fire(Z.pointerdblclick,{evt:z,target:this,currentTarget:this,pointerId:Qe}))}),Me||this._fire(Z.pointerup,{evt:z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+se+"ListenClick"]=!1,z.cancelable&&se!=="touch"&&se!=="pointer"&&z.preventDefault()}_contextmenu(z){this.setPointersPositions(z);const Z=this.getIntersection(this.getPointerPosition());Z&&Z.isListening()?Z._fireAndBubble(j,{evt:z}):this._fire(j,{evt:z,target:this,currentTarget:this})}_wheel(z){this.setPointersPositions(z);const Z=this.getIntersection(this.getPointerPosition());Z&&Z.isListening()?Z._fireAndBubble(A,{evt:z}):this._fire(A,{evt:z,target:this,currentTarget:this})}_pointercancel(z){this.setPointersPositions(z);const Z=h.getCapturedShape(z.pointerId)||this.getIntersection(this.getPointerPosition());Z&&Z._fireAndBubble(M,h.createEvent(z)),h.releaseCapture(z.pointerId)}_lostpointercapture(z){h.releaseCapture(z.pointerId)}setPointersPositions(z){const Z=this._getContentPosition();let se=null,ue=null;z=z||window.event,z.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(z.touches,me=>{this._pointerPositions.push({id:me.identifier,x:(me.clientX-Z.left)/Z.scaleX,y:(me.clientY-Z.top)/Z.scaleY})}),Array.prototype.forEach.call(z.changedTouches||z.touches,me=>{this._changedPointerPositions.push({id:me.identifier,x:(me.clientX-Z.left)/Z.scaleX,y:(me.clientY-Z.top)/Z.scaleY})})):(se=(z.clientX-Z.left)/Z.scaleX,ue=(z.clientY-Z.top)/Z.scaleY,this.pointerPos={x:se,y:ue},this._pointerPositions=[{x:se,y:ue,id:e.Util._getFirstPointerId(z)}],this._changedPointerPositions=[{x:se,y:ue,id:e.Util._getFirstPointerId(z)}])}_setPointerPosition(z){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(z)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const z=this.content.getBoundingClientRect();return{top:z.top,left:z.left,scaleX:z.width/this.content.clientWidth||1,scaleY:z.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const z=this.container();if(!z)throw"Stage has no container. A container is required.";z.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),z.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(z){z.batchDraw()}),this}}t.Stage=ae,ae.prototype.nodeType=f,(0,u._registerNode)(ae),a.Factory.addGetterSetter(ae,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(J=>{J.batchDraw()})})}(Ku)),Ku}var qr={},Xu={},J0;function Tt(){return J0||(J0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=we(),a=rt(),r=Le(),s=ct(),o=Ge(),c=we(),u=vy(),h="hasShadow",f="shadowRGBA",p="patternImage",b="linearGradient",y="radialGradient";let g;function v(){return g||(g=a.Util.createCanvasElement().getContext("2d"),g)}t.shapes={};function C(N){const P=this.attrs.fillRule;P?N.fill(P):N.fill()}function E(N){N.stroke()}function O(N){const P=this.attrs.fillRule;P?N.fill(P):N.fill()}function x(N){N.stroke()}function _(){this._clearCache(h)}function T(){this._clearCache(f)}function M(){this._clearCache(p)}function k(){this._clearCache(b)}function G(){this._clearCache(y)}class R extends s.Node{constructor(P){super(P);let F;for(;F=a.Util.getRandomColor(),!(F&&!(F in t.shapes)););this.colorKey=F,t.shapes[F]=this}getContext(){return a.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return a.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const F=v().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(F&&F.setTransform){const j=new a.Transform;j.translate(this.fillPatternX(),this.fillPatternY()),j.rotate(e.Konva.getAngle(this.fillPatternRotation())),j.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),j.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const Y=j.getMatrix(),K=typeof DOMMatrix>"u"?{a:Y[0],b:Y[1],c:Y[2],d:Y[3],e:Y[4],f:Y[5]}:new DOMMatrix(Y);F.setTransform(K)}return F}}_getLinearGradient(){return this._getCache(b,this.__getLinearGradient)}__getLinearGradient(){const P=this.fillLinearGradientColorStops();if(P){const F=v(),j=this.fillLinearGradientStartPoint(),Y=this.fillLinearGradientEndPoint(),K=F.createLinearGradient(j.x,j.y,Y.x,Y.y);for(let I=0;I<P.length;I+=2)K.addColorStop(P[I],P[I+1]);return K}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const P=this.fillRadialGradientColorStops();if(P){const F=v(),j=this.fillRadialGradientStartPoint(),Y=this.fillRadialGradientEndPoint(),K=F.createRadialGradient(j.x,j.y,this.fillRadialGradientStartRadius(),Y.x,Y.y,this.fillRadialGradientEndRadius());for(let I=0;I<P.length;I+=2)K.addColorStop(P[I],P[I+1]);return K}}getShadowRGBA(){return this._getCache(f,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const P=a.Util.colorToRGBA(this.shadowColor());if(P)return"rgba("+P.r+","+P.g+","+P.b+","+P.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const P=this.hitStrokeWidth();return P==="auto"?this.hasStroke():this.strokeEnabled()&&!!P}intersects(P){const F=this.getStage();if(!F)return!1;const j=F.bufferHitCanvas;return j.getContext().clear(),this.drawHit(j,void 0,!0),j.context.getImageData(Math.round(P.x),Math.round(P.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(P){var F;if(!((F=this.attrs.perfectDrawEnabled)!==null&&F!==void 0?F:!0))return!1;const Y=P||this.hasFill(),K=this.hasStroke(),I=this.getAbsoluteOpacity()!==1;if(Y&&K&&I)return!0;const ie=this.hasShadow(),A=this.shadowForStrokeEnabled();return!!(Y&&K&&ie&&A)}setStrokeHitEnabled(P){a.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),P?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const P=this.size();return{x:this._centroid?-P.width/2:0,y:this._centroid?-P.height/2:0,width:P.width,height:P.height}}getClientRect(P={}){let F=!1,j=this.getParent();for(;j;){if(j.isCached()){F=!0;break}j=j.getParent()}const Y=P.skipTransform,K=P.relativeTo||F&&this.getStage()||void 0,I=this.getSelfRect(),A=!P.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,D=I.width+A,U=I.height+A,L=!P.skipShadow&&this.hasShadow(),V=L?this.shadowOffsetX():0,ee=L?this.shadowOffsetY():0,H=D+Math.abs(V),te=U+Math.abs(ee),ae=L&&this.shadowBlur()||0,J=H+ae*2,z=te+ae*2,Z={width:J,height:z,x:-(A/2+ae)+Math.min(V,0)+I.x,y:-(A/2+ae)+Math.min(ee,0)+I.y};return Y?Z:this._transformedRect(Z,K)}drawScene(P,F,j){const Y=this.getLayer(),K=P||Y.getCanvas(),I=K.getContext(),ie=this._getCanvasCache(),A=this.getSceneFunc(),D=this.hasShadow();let U;const L=F===this;if(!this.isVisible()&&!L)return this;if(ie){I.save();const V=this.getAbsoluteTransform(F).getMatrix();return I.transform(V[0],V[1],V[2],V[3],V[4],V[5]),this._drawCachedSceneCanvas(I),I.restore(),this}if(!A)return this;if(I.save(),this._useBufferCanvas()){U=this.getStage();const V=j||U.bufferCanvas,ee=V.getContext();ee.clear(),ee.save(),ee._applyLineJoin(this);const H=this.getAbsoluteTransform(F).getMatrix();ee.transform(H[0],H[1],H[2],H[3],H[4],H[5]),A.call(this,ee,this),ee.restore();const te=V.pixelRatio;D&&I._applyShadow(this),I._applyOpacity(this),I._applyGlobalCompositeOperation(this),I.drawImage(V._canvas,V.x||0,V.y||0,V.width/te,V.height/te)}else{if(I._applyLineJoin(this),!L){const V=this.getAbsoluteTransform(F).getMatrix();I.transform(V[0],V[1],V[2],V[3],V[4],V[5]),I._applyOpacity(this),I._applyGlobalCompositeOperation(this)}D&&I._applyShadow(this),A.call(this,I,this)}return I.restore(),this}drawHit(P,F,j=!1){if(!this.shouldDrawHit(F,j))return this;const Y=this.getLayer(),K=P||Y.hitCanvas,I=K&&K.getContext(),ie=this.hitFunc()||this.sceneFunc(),A=this._getCanvasCache(),D=A&&A.hit;if(this.colorKey||a.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),D){I.save();const L=this.getAbsoluteTransform(F).getMatrix();return I.transform(L[0],L[1],L[2],L[3],L[4],L[5]),this._drawCachedHitCanvas(I),I.restore(),this}if(!ie)return this;if(I.save(),I._applyLineJoin(this),!(this===F)){const L=this.getAbsoluteTransform(F).getMatrix();I.transform(L[0],L[1],L[2],L[3],L[4],L[5])}return ie.call(this,I,this),I.restore(),this}drawHitFromCache(P=0){const F=this._getCanvasCache(),j=this._getCachedSceneCanvas(),Y=F.hit,K=Y.getContext(),I=Y.getWidth(),ie=Y.getHeight();K.clear(),K.drawImage(j._canvas,0,0,I,ie);try{const A=K.getImageData(0,0,I,ie),D=A.data,U=D.length,L=a.Util._hexToRgb(this.colorKey);for(let V=0;V<U;V+=4)D[V+3]>P?(D[V]=L.r,D[V+1]=L.g,D[V+2]=L.b,D[V+3]=255):D[V+3]=0;K.putImageData(A,0,0)}catch(A){a.Util.error("Unable to draw hit graph from cached scene canvas. "+A.message)}return this}hasPointerCapture(P){return u.hasPointerCapture(P,this)}setPointerCapture(P){u.setPointerCapture(P,this)}releaseCapture(P){u.releaseCapture(P,this)}}t.Shape=R,R.prototype._fillFunc=C,R.prototype._strokeFunc=E,R.prototype._fillFuncHit=O,R.prototype._strokeFuncHit=x,R.prototype._centroid=!1,R.prototype.nodeType="Shape",(0,c._registerNode)(R),R.prototype.eventListeners={},R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),R.prototype.on.call(R.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",T),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",M),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k),R.prototype.on.call(R.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),r.Factory.addGetterSetter(R,"stroke",void 0,(0,o.getStringOrGradientValidator)()),r.Factory.addGetterSetter(R,"strokeWidth",2,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(R,"hitStrokeWidth","auto",(0,o.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(R,"strokeHitEnabled",!0,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(R,"perfectDrawEnabled",!0,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(R,"shadowForStrokeEnabled",!0,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(R,"lineJoin"),r.Factory.addGetterSetter(R,"lineCap"),r.Factory.addGetterSetter(R,"sceneFunc"),r.Factory.addGetterSetter(R,"hitFunc"),r.Factory.addGetterSetter(R,"dash"),r.Factory.addGetterSetter(R,"dashOffset",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowColor",void 0,(0,o.getStringValidator)()),r.Factory.addGetterSetter(R,"shadowBlur",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowOpacity",1,(0,o.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(R,"shadowOffsetX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"shadowOffsetY",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternImage"),r.Factory.addGetterSetter(R,"fill",void 0,(0,o.getStringOrGradientValidator)()),r.Factory.addGetterSetter(R,"fillPatternX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternY",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(R,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(R,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(R,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(R,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(R,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(R,"fillEnabled",!0),r.Factory.addGetterSetter(R,"strokeEnabled",!0),r.Factory.addGetterSetter(R,"shadowEnabled",!0),r.Factory.addGetterSetter(R,"dashEnabled",!0),r.Factory.addGetterSetter(R,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(R,"fillPriority","color"),r.Factory.addComponentsGetterSetter(R,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(R,"fillPatternOffsetX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternOffsetY",0,(0,o.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(R,"fillPatternScaleX",1,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(R,"fillPatternScaleY",1,(0,o.getNumberValidator)()),r.Factory.addComponentsGetterSetter(R,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(R,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(R,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(R,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(R,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(R,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(R,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(R,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(R,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(R,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(R,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(R,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(R,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(R,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(R,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(R,"fillPatternRotation",0),r.Factory.addGetterSetter(R,"fillRule",void 0,(0,o.getStringValidator)()),r.Factory.backCompat(R,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Xu)),Xu}var $0;function _y(){if($0)return qr;$0=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.Layer=void 0;const t=rt(),e=Il(),a=ct(),r=Le(),s=jl(),o=Ge(),c=Tt(),u=we(),h="#",f="beforeDraw",p="draw",b=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],y=b.length;class g extends e.Container{constructor(C){super(C),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(C){return this.getContext().clear(C),this.getHitCanvas().getContext().clear(C),this}setZIndex(C){super.setZIndex(C);const E=this.getStage();return E&&E.content&&(E.content.removeChild(this.getNativeCanvasElement()),C<E.children.length-1?E.content.insertBefore(this.getNativeCanvasElement(),E.children[C+1].getCanvas()._canvas):E.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){a.Node.prototype.moveToTop.call(this);const C=this.getStage();return C&&C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!a.Node.prototype.moveUp.call(this))return!1;const E=this.getStage();return!E||!E.content?!1:(E.content.removeChild(this.getNativeCanvasElement()),this.index<E.children.length-1?E.content.insertBefore(this.getNativeCanvasElement(),E.children[this.index+1].getCanvas()._canvas):E.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(a.Node.prototype.moveDown.call(this)){const C=this.getStage();if(C){const E=C.children;C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.insertBefore(this.getNativeCanvasElement(),E[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(a.Node.prototype.moveToBottom.call(this)){const C=this.getStage();if(C){const E=C.children;C.content&&(C.content.removeChild(this.getNativeCanvasElement()),C.content.insertBefore(this.getNativeCanvasElement(),E[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const C=this.getNativeCanvasElement();return a.Node.prototype.remove.call(this),C&&C.parentNode&&t.Util._isInDocument(C)&&C.parentNode.removeChild(C),this}getStage(){return this.parent}setSize({width:C,height:E}){return this.canvas.setSize(C,E),this.hitCanvas.setSize(C,E),this._setSmoothEnabled(),this}_validateAdd(C){const E=C.getType();E!=="Group"&&E!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(C){return C=C||{},C.width=C.width||this.getWidth(),C.height=C.height||this.getHeight(),C.x=C.x!==void 0?C.x:this.x(),C.y=C.y!==void 0?C.y:this.y(),a.Node.prototype._toKonvaCanvas.call(this,C)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(C){if(!this.isListening()||!this.isVisible())return null;let E=1,O=!1;for(;;){for(let x=0;x<y;x++){const _=b[x],T=this._getIntersection({x:C.x+_.x*E,y:C.y+_.y*E}),M=T.shape;if(M)return M;if(O=!!T.antialiased,!T.antialiased)break}if(O)E+=1;else return null}}_getIntersection(C){const E=this.hitCanvas.pixelRatio,O=this.hitCanvas.context.getImageData(Math.round(C.x*E),Math.round(C.y*E),1,1).data,x=O[3];if(x===255){const _=t.Util._rgbToHex(O[0],O[1],O[2]),T=c.shapes[h+_];return T?{shape:T}:{antialiased:!0}}else if(x>0)return{antialiased:!0};return{}}drawScene(C,E,O){const x=this.getLayer(),_=C||x&&x.getCanvas();return this._fire(f,{node:this}),this.clearBeforeDraw()&&_.getContext().clear(),e.Container.prototype.drawScene.call(this,_,E,O),this._fire(p,{node:this}),this}drawHit(C,E){const O=this.getLayer(),x=C||O&&O.hitCanvas;return O&&O.clearBeforeDraw()&&O.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,x,E),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(C){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(C)}getHitGraphEnabled(C){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const C=this.parent;!!this.hitCanvas._canvas.parentNode?C.content.removeChild(this.hitCanvas._canvas):C.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return qr.Layer=g,g.prototype.nodeType="Layer",(0,u._registerNode)(g),r.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),r.Factory.addGetterSetter(g,"clearBeforeDraw",!0),r.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,o.getBooleanValidator)()),qr}var Yr={},em;function rb(){if(em)return Yr;em=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.FastLayer=void 0;const t=rt(),e=_y(),a=we();let r=class extends e.Layer{constructor(o){super(o),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Yr.FastLayer=r,r.prototype.nodeType="FastLayer",(0,a._registerNode)(r),Yr}var Kr={},tm;function ah(){if(tm)return Kr;tm=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Group=void 0;const t=rt(),e=Il(),a=we();class r extends e.Container{_validateAdd(o){const c=o.getType();c!=="Group"&&c!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}}return Kr.Group=r,r.prototype.nodeType="Group",(0,a._registerNode)(r),Kr}var Xr={},nm;function rh(){if(nm)return Xr;nm=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Animation=void 0;const t=we(),e=rt(),a=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let r=class Ya{constructor(o,c){this.id=Ya.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:a(),frameRate:0},this.func=o,this.setLayers(c)}setLayers(o){let c=[];return o&&(c=Array.isArray(o)?o:[o]),this.layers=c,this}getLayers(){return this.layers}addLayer(o){const c=this.layers,u=c.length;for(let h=0;h<u;h++)if(c[h]._id===o._id)return!1;return this.layers.push(o),!0}isRunning(){const c=Ya.animations,u=c.length;for(let h=0;h<u;h++)if(c[h].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=a(),Ya._addAnimation(this),this}stop(){return Ya._removeAnimation(this),this}_updateFrameObject(o){this.frame.timeDiff=o-this.frame.lastTime,this.frame.lastTime=o,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(o){this.animations.push(o),this._handleAnimation()}static _removeAnimation(o){const c=o.id,u=this.animations,h=u.length;for(let f=0;f<h;f++)if(u[f].id===c){this.animations.splice(f,1);break}}static _runFrames(){const o={},c=this.animations;for(let u=0;u<c.length;u++){const h=c[u],f=h.layers,p=h.func;h._updateFrameObject(a());const b=f.length;let y;if(p?y=p.call(h,h.frame)!==!1:y=!0,!!y)for(let g=0;g<b;g++){const v=f[g];v._id!==void 0&&(o[v._id]=v)}}for(const u in o)o.hasOwnProperty(u)&&o[u].batchDraw()}static _animationLoop(){const o=Ya;o.animations.length?(o._runFrames(),e.Util.requestAnimFrame(o._animationLoop)):o.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return Xr.Animation=r,r.animations=[],r.animIdCounter=0,r.animRunning=!1,Xr}var Zu={},im;function sb(){return im||(im=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=rt(),a=rh(),r=ct(),s=we(),o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},c=1,u=2,h=3,f=["fill","stroke","shadowColor"];let p=0;class b{constructor(v,C,E,O,x,_,T){this.prop=v,this.propFunc=C,this.begin=O,this._pos=O,this.duration=_,this._change=0,this.prevPos=0,this.yoyo=T,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=E,this._change=x-this.begin,this.pause()}fire(v){const C=this[v];C&&C()}setTime(v){v>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():v<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=v,this.update())}getTime(){return this._time}setPosition(v){this.prevPos=this._pos,this.propFunc(v),this._pos=v}getPosition(v){return v===void 0&&(v=this._time),this.func(v,this.begin,this._change,this.duration)}play(){this.state=u,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(v){this.pause(),this._time=v,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const v=this.getTimer()-this._startTime;this.state===u?this.setTime(v):this.state===h&&this.setTime(this.duration-v)}pause(){this.state=c,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(v){const C=this,E=v.node,O=E._id,x=v.easing||t.Easings.Linear,_=!!v.yoyo;let T,M;typeof v.duration>"u"?T=.3:v.duration===0?T=.001:T=v.duration,this.node=E,this._id=p++;const k=E.getLayer()||(E instanceof s.Konva.Stage?E.getLayers():null);k||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new a.Animation(function(){C.tween.onEnterFrame()},k),this.tween=new b(M,function(G){C._tweenFunc(G)},x,0,1,T*1e3,_),this._addListeners(),y.attrs[O]||(y.attrs[O]={}),y.attrs[O][this._id]||(y.attrs[O][this._id]={}),y.tweens[O]||(y.tweens[O]={});for(M in v)o[M]===void 0&&this._addAttr(M,v[M]);this.reset(),this.onFinish=v.onFinish,this.onReset=v.onReset,this.onUpdate=v.onUpdate}_addAttr(v,C){const E=this.node,O=E._id;let x,_,T,M,k;const G=y.tweens[O][v];G&&delete y.attrs[O][G][v];let R=E.getAttr(v);if(e.Util._isArray(C))if(x=[],_=Math.max(C.length,R.length),v==="points"&&C.length!==R.length&&(C.length>R.length?(M=R,R=e.Util._prepareArrayForTween(R,C,E.closed())):(T=C,C=e.Util._prepareArrayForTween(C,R,E.closed()))),v.indexOf("fill")===0)for(let N=0;N<_;N++)if(N%2===0)x.push(C[N]-R[N]);else{const P=e.Util.colorToRGBA(R[N]);k=e.Util.colorToRGBA(C[N]),R[N]=P,x.push({r:k.r-P.r,g:k.g-P.g,b:k.b-P.b,a:k.a-P.a})}else for(let N=0;N<_;N++)x.push(C[N]-R[N]);else f.indexOf(v)!==-1?(R=e.Util.colorToRGBA(R),k=e.Util.colorToRGBA(C),x={r:k.r-R.r,g:k.g-R.g,b:k.b-R.b,a:k.a-R.a}):x=C-R;y.attrs[O][this._id][v]={start:R,diff:x,end:C,trueEnd:T,trueStart:M},y.tweens[O][v]=this._id}_tweenFunc(v){const C=this.node,E=y.attrs[C._id][this._id];let O,x,_,T,M,k,G,R;for(O in E){if(x=E[O],_=x.start,T=x.diff,R=x.end,e.Util._isArray(_))if(M=[],G=Math.max(_.length,R.length),O.indexOf("fill")===0)for(k=0;k<G;k++)k%2===0?M.push((_[k]||0)+T[k]*v):M.push("rgba("+Math.round(_[k].r+T[k].r*v)+","+Math.round(_[k].g+T[k].g*v)+","+Math.round(_[k].b+T[k].b*v)+","+(_[k].a+T[k].a*v)+")");else for(k=0;k<G;k++)M.push((_[k]||0)+T[k]*v);else f.indexOf(O)!==-1?M="rgba("+Math.round(_.r+T.r*v)+","+Math.round(_.g+T.g*v)+","+Math.round(_.b+T.b*v)+","+(_.a+T.a*v)+")":M=_+T*v;C.setAttr(O,M)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const v=this.node,C=y.attrs[v._id][this._id];C.points&&C.points.trueEnd&&v.setAttr("points",C.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const v=this.node,C=y.attrs[v._id][this._id];C.points&&C.points.trueStart&&v.points(C.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(v){return this.tween.seek(v*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const v=this.node._id,C=this._id,E=y.tweens[v];this.pause(),this.anim&&this.anim.stop();for(const O in E)delete y.tweens[v][O];delete y.attrs[v][C],y.tweens[v]&&(Object.keys(y.tweens[v]).length===0&&delete y.tweens[v],Object.keys(y.attrs[v]).length===0&&delete y.attrs[v])}}t.Tween=y,y.attrs={},y.tweens={},r.Node.prototype.to=function(g){const v=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),v&&v()},new y(g).play()},t.Easings={BackEaseIn(g,v,C,E){return C*(g/=E)*g*((1.70158+1)*g-1.70158)+v},BackEaseOut(g,v,C,E){return C*((g=g/E-1)*g*((1.70158+1)*g+1.70158)+1)+v},BackEaseInOut(g,v,C,E){let O=1.70158;return(g/=E/2)<1?C/2*(g*g*(((O*=1.525)+1)*g-O))+v:C/2*((g-=2)*g*(((O*=1.525)+1)*g+O)+2)+v},ElasticEaseIn(g,v,C,E,O,x){let _=0;return g===0?v:(g/=E)===1?v+C:(x||(x=E*.3),!O||O<Math.abs(C)?(O=C,_=x/4):_=x/(2*Math.PI)*Math.asin(C/O),-(O*Math.pow(2,10*(g-=1))*Math.sin((g*E-_)*(2*Math.PI)/x))+v)},ElasticEaseOut(g,v,C,E,O,x){let _=0;return g===0?v:(g/=E)===1?v+C:(x||(x=E*.3),!O||O<Math.abs(C)?(O=C,_=x/4):_=x/(2*Math.PI)*Math.asin(C/O),O*Math.pow(2,-10*g)*Math.sin((g*E-_)*(2*Math.PI)/x)+C+v)},ElasticEaseInOut(g,v,C,E,O,x){let _=0;return g===0?v:(g/=E/2)===2?v+C:(x||(x=E*(.3*1.5)),!O||O<Math.abs(C)?(O=C,_=x/4):_=x/(2*Math.PI)*Math.asin(C/O),g<1?-.5*(O*Math.pow(2,10*(g-=1))*Math.sin((g*E-_)*(2*Math.PI)/x))+v:O*Math.pow(2,-10*(g-=1))*Math.sin((g*E-_)*(2*Math.PI)/x)*.5+C+v)},BounceEaseOut(g,v,C,E){return(g/=E)<1/2.75?C*(7.5625*g*g)+v:g<2/2.75?C*(7.5625*(g-=1.5/2.75)*g+.75)+v:g<2.5/2.75?C*(7.5625*(g-=2.25/2.75)*g+.9375)+v:C*(7.5625*(g-=2.625/2.75)*g+.984375)+v},BounceEaseIn(g,v,C,E){return C-t.Easings.BounceEaseOut(E-g,0,C,E)+v},BounceEaseInOut(g,v,C,E){return g<E/2?t.Easings.BounceEaseIn(g*2,0,C,E)*.5+v:t.Easings.BounceEaseOut(g*2-E,0,C,E)*.5+C*.5+v},EaseIn(g,v,C,E){return C*(g/=E)*g+v},EaseOut(g,v,C,E){return-C*(g/=E)*(g-2)+v},EaseInOut(g,v,C,E){return(g/=E/2)<1?C/2*g*g+v:-C/2*(--g*(g-2)-1)+v},StrongEaseIn(g,v,C,E){return C*(g/=E)*g*g*g*g+v},StrongEaseOut(g,v,C,E){return C*((g=g/E-1)*g*g*g*g+1)+v},StrongEaseInOut(g,v,C,E){return(g/=E/2)<1?C/2*g*g*g*g*g+v:C/2*((g-=2)*g*g*g*g+2)+v},Linear(g,v,C,E){return C*g/E+v}}}(Zu)),Zu}var am;function Md(){return am||(am=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=we(),a=rt(),r=ct(),s=Il(),o=ab(),c=_y(),u=rb(),h=ah(),f=ih(),p=Tt(),b=rh(),y=sb(),g=yy(),v=jl();t.Konva=a.Util._assign(e.Konva,{Util:a.Util,Transform:a.Transform,Node:r.Node,Container:s.Container,Stage:o.Stage,stages:o.stages,Layer:c.Layer,FastLayer:u.FastLayer,Group:h.Group,DD:f.DD,Shape:p.Shape,shapes:p.shapes,Animation:b.Animation,Tween:y.Tween,Easings:y.Easings,Context:g.Context,Canvas:v.Canvas}),t.default=t.Konva}(ju)),ju}var Zr={},rm;function ob(){if(rm)return Zr;rm=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.Arc=void 0;const t=Le(),e=Tt(),a=we(),r=Ge(),s=we();let o=class extends e.Shape{_sceneFunc(u){const h=a.Konva.getAngle(this.angle()),f=this.clockwise();u.beginPath(),u.arc(0,0,this.outerRadius(),0,h,f),u.arc(0,0,this.innerRadius(),h,0,!f),u.closePath(),u.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(u){this.outerRadius(u/2)}setHeight(u){this.outerRadius(u/2)}getSelfRect(){const u=this.innerRadius(),h=this.outerRadius(),f=this.clockwise(),p=a.Konva.getAngle(f?360-this.angle():this.angle()),b=Math.cos(Math.min(p,Math.PI)),y=1,g=Math.sin(Math.min(Math.max(Math.PI,p),3*Math.PI/2)),v=Math.sin(Math.min(p,Math.PI/2)),C=b*(b>0?u:h),E=y*h,O=g*(g>0?u:h),x=v*(v>0?h:u);return{x:C,y:f?-1*x:O,width:E-C,height:x-O}}};return Zr.Arc=o,o.prototype._centroid=!0,o.prototype.className="Arc",o.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"innerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"outerRadius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"clockwise",!1,(0,r.getBooleanValidator)()),Zr}var Qr={},Wr={},sm;function by(){if(sm)return Wr;sm=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Line=void 0;const t=Le(),e=we(),a=Tt(),r=Ge();function s(u,h,f,p,b,y,g){const v=Math.sqrt(Math.pow(f-u,2)+Math.pow(p-h,2)),C=Math.sqrt(Math.pow(b-f,2)+Math.pow(y-p,2)),E=g*v/(v+C),O=g*C/(v+C),x=f-E*(b-u),_=p-E*(y-h),T=f+O*(b-u),M=p+O*(y-h);return[x,_,T,M]}function o(u,h){const f=u.length,p=[];for(let b=2;b<f-2;b+=2){const y=s(u[b-2],u[b-1],u[b],u[b+1],u[b+2],u[b+3],h);isNaN(y[0])||(p.push(y[0]),p.push(y[1]),p.push(u[b]),p.push(u[b+1]),p.push(y[2]),p.push(y[3]))}return p}let c=class extends a.Shape{constructor(h){super(h),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(h){const f=this.points(),p=f.length,b=this.tension(),y=this.closed(),g=this.bezier();if(!p)return;let v=0;if(h.beginPath(),h.moveTo(f[0],f[1]),b!==0&&p>4){const C=this.getTensionPoints(),E=C.length;for(v=y?0:4,y||h.quadraticCurveTo(C[0],C[1],C[2],C[3]);v<E-2;)h.bezierCurveTo(C[v++],C[v++],C[v++],C[v++],C[v++],C[v++]);y||h.quadraticCurveTo(C[E-2],C[E-1],f[p-2],f[p-1])}else if(g)for(v=2;v<p;)h.bezierCurveTo(f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]);else for(v=2;v<p;v+=2)h.lineTo(f[v],f[v+1]);y?(h.closePath(),h.fillStrokeShape(this)):h.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():o(this.points(),this.tension())}_getTensionPointsClosed(){const h=this.points(),f=h.length,p=this.tension(),b=s(h[f-2],h[f-1],h[0],h[1],h[2],h[3],p),y=s(h[f-4],h[f-3],h[f-2],h[f-1],h[0],h[1],p),g=o(h,p);return[b[2],b[3]].concat(g).concat([y[0],y[1],h[f-2],h[f-1],y[2],y[3],b[0],b[1],h[0],h[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let h=this.points();if(h.length<4)return{x:h[0]||0,y:h[1]||0,width:0,height:0};this.tension()!==0?h=[h[0],h[1],...this._getTensionPoints(),h[h.length-2],h[h.length-1]]:h=this.points();let f=h[0],p=h[0],b=h[1],y=h[1],g,v;for(let C=0;C<h.length/2;C++)g=h[C*2],v=h[C*2+1],f=Math.min(f,g),p=Math.max(p,g),b=Math.min(b,v),y=Math.max(y,v);return{x:f,y:b,width:p-f,height:y-b}}};return Wr.Line=c,c.prototype.className="Line",c.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(c),t.Factory.addGetterSetter(c,"closed",!1),t.Factory.addGetterSetter(c,"bezier",!1),t.Factory.addGetterSetter(c,"tension",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(c,"points",[],(0,r.getNumberArrayValidator)()),Wr}var Jr={},Qu={},om;function lb(){return om||(om=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(c,u,h)=>{let f,p;const y=h/2;f=0;for(let g=0;g<20;g++)p=y*t.tValues[20][g]+y,f+=t.cValues[20][g]*r(c,u,p);return y*f};t.getCubicArcLength=e;const a=(c,u,h)=>{h===void 0&&(h=1);const f=c[0]-2*c[1]+c[2],p=u[0]-2*u[1]+u[2],b=2*c[1]-2*c[0],y=2*u[1]-2*u[0],g=4*(f*f+p*p),v=4*(f*b+p*y),C=b*b+y*y;if(g===0)return h*Math.sqrt(Math.pow(c[2]-c[0],2)+Math.pow(u[2]-u[0],2));const E=v/(2*g),O=C/g,x=h+E,_=O-E*E,T=x*x+_>0?Math.sqrt(x*x+_):0,M=E*E+_>0?Math.sqrt(E*E+_):0,k=E+Math.sqrt(E*E+_)!==0?_*Math.log(Math.abs((x+T)/(E+M))):0;return Math.sqrt(g)/2*(x*T-E*M+k)};t.getQuadraticArcLength=a;function r(c,u,h){const f=s(1,h,c),p=s(1,h,u),b=f*f+p*p;return Math.sqrt(b)}const s=(c,u,h)=>{const f=h.length-1;let p,b;if(f===0)return 0;if(c===0){b=0;for(let y=0;y<=f;y++)b+=t.binomialCoefficients[f][y]*Math.pow(1-u,f-y)*Math.pow(u,y)*h[y];return b}else{p=new Array(f);for(let y=0;y<f;y++)p[y]=f*(h[y+1]-h[y]);return s(c-1,u,p)}},o=(c,u,h)=>{let f=1,p=c/u,b=(c-h(p))/u,y=0;for(;f>.001;){const g=h(p+b),v=Math.abs(c-g)/u;if(v<f)f=v,p+=b;else{const C=h(p-b),E=Math.abs(c-C)/u;E<f?(f=E,p-=b):b/=2}if(y++,y>500)break}return p};t.t2length=o}(Qu)),Qu}var lm;function sh(){if(lm)return Jr;lm=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.Path=void 0;const t=Le(),e=we(),a=Tt(),r=lb();let s=class Kt extends a.Shape{constructor(c){super(c),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Kt.parsePathData(this.data()),this.pathLength=Kt.getPathLength(this.dataArray)}_sceneFunc(c){const u=this.dataArray;c.beginPath();let h=!1;for(let f=0;f<u.length;f++){const p=u[f].command,b=u[f].points;switch(p){case"L":c.lineTo(b[0],b[1]);break;case"M":c.moveTo(b[0],b[1]);break;case"C":c.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5]);break;case"Q":c.quadraticCurveTo(b[0],b[1],b[2],b[3]);break;case"A":const y=b[0],g=b[1],v=b[2],C=b[3],E=b[4],O=b[5],x=b[6],_=b[7],T=v>C?v:C,M=v>C?1:v/C,k=v>C?C/v:1;c.translate(y,g),c.rotate(x),c.scale(M,k),c.arc(0,0,T,E,E+O,1-_),c.scale(1/M,1/k),c.rotate(-x),c.translate(-y,-g);break;case"z":h=!0,c.closePath();break}}!h&&!this.hasFill()?c.strokeShape(this):c.fillStrokeShape(this)}getSelfRect(){let c=[];this.dataArray.forEach(function(g){if(g.command==="A"){const v=g.points[4],C=g.points[5],E=g.points[4]+C;let O=Math.PI/180;if(Math.abs(v-E)<O&&(O=Math.abs(v-E)),C<0)for(let x=v-O;x>E;x-=O){const _=Kt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],x,0);c.push(_.x,_.y)}else for(let x=v+O;x<E;x+=O){const _=Kt.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],x,0);c.push(_.x,_.y)}}else if(g.command==="C")for(let v=0;v<=1;v+=.01){const C=Kt.getPointOnCubicBezier(v,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);c.push(C.x,C.y)}else c=c.concat(g.points)});let u=c[0],h=c[0],f=c[1],p=c[1],b,y;for(let g=0;g<c.length/2;g++)b=c[g*2],y=c[g*2+1],isNaN(b)||(u=Math.min(u,b),h=Math.max(h,b)),isNaN(y)||(f=Math.min(f,y),p=Math.max(p,y));return{x:u,y:f,width:h-u,height:p-f}}getLength(){return this.pathLength}getPointAtLength(c){return Kt.getPointAtLengthOfDataArray(c,this.dataArray)}static getLineLength(c,u,h,f){return Math.sqrt((h-c)*(h-c)+(f-u)*(f-u))}static getPathLength(c){let u=0;for(let h=0;h<c.length;++h)u+=c[h].pathLength;return u}static getPointAtLengthOfDataArray(c,u){let h,f=0,p=u.length;if(!p)return null;for(;f<p&&c>u[f].pathLength;)c-=u[f].pathLength,++f;if(f===p)return h=u[f-1].points.slice(-2),{x:h[0],y:h[1]};if(c<.01)return u[f].command==="M"?(h=u[f].points.slice(0,2),{x:h[0],y:h[1]}):{x:u[f].start.x,y:u[f].start.y};const b=u[f],y=b.points;switch(b.command){case"L":return Kt.getPointOnLine(c,b.start.x,b.start.y,y[0],y[1]);case"C":return Kt.getPointOnCubicBezier((0,r.t2length)(c,Kt.getPathLength(u),T=>(0,r.getCubicArcLength)([b.start.x,y[0],y[2],y[4]],[b.start.y,y[1],y[3],y[5]],T)),b.start.x,b.start.y,y[0],y[1],y[2],y[3],y[4],y[5]);case"Q":return Kt.getPointOnQuadraticBezier((0,r.t2length)(c,Kt.getPathLength(u),T=>(0,r.getQuadraticArcLength)([b.start.x,y[0],y[2]],[b.start.y,y[1],y[3]],T)),b.start.x,b.start.y,y[0],y[1],y[2],y[3]);case"A":const g=y[0],v=y[1],C=y[2],E=y[3],O=y[5],x=y[6];let _=y[4];return _+=O*c/b.pathLength,Kt.getPointOnEllipticalArc(g,v,C,E,_,x)}return null}static getPointOnLine(c,u,h,f,p,b,y){b=b??u,y=y??h;const g=this.getLineLength(u,h,f,p);if(g<1e-10)return{x:u,y:h};if(f===u)return{x:b,y:y+(p>h?c:-c)};const v=(p-h)/(f-u),C=Math.sqrt(c*c/(1+v*v))*(f<u?-1:1),E=v*C;if(Math.abs(y-h-v*(b-u))<1e-10)return{x:b+C,y:y+E};const O=((b-u)*(f-u)+(y-h)*(p-h))/(g*g),x=u+O*(f-u),_=h+O*(p-h),T=this.getLineLength(b,y,x,_),M=Math.sqrt(c*c-T*T),k=Math.sqrt(M*M/(1+v*v))*(f<u?-1:1),G=v*k;return{x:x+k,y:_+G}}static getPointOnCubicBezier(c,u,h,f,p,b,y,g,v){function C(M){return M*M*M}function E(M){return 3*M*M*(1-M)}function O(M){return 3*M*(1-M)*(1-M)}function x(M){return(1-M)*(1-M)*(1-M)}const _=g*C(c)+b*E(c)+f*O(c)+u*x(c),T=v*C(c)+y*E(c)+p*O(c)+h*x(c);return{x:_,y:T}}static getPointOnQuadraticBezier(c,u,h,f,p,b,y){function g(x){return x*x}function v(x){return 2*x*(1-x)}function C(x){return(1-x)*(1-x)}const E=b*g(c)+f*v(c)+u*C(c),O=y*g(c)+p*v(c)+h*C(c);return{x:E,y:O}}static getPointOnEllipticalArc(c,u,h,f,p,b){const y=Math.cos(b),g=Math.sin(b),v={x:h*Math.cos(p),y:f*Math.sin(p)};return{x:c+(v.x*y-v.y*g),y:u+(v.x*g+v.y*y)}}static parsePathData(c){if(!c)return[];let u=c;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];u=u.replace(new RegExp(" ","g"),",");for(let E=0;E<h.length;E++)u=u.replace(new RegExp(h[E],"g"),"|"+h[E]);const f=u.split("|"),p=[],b=[];let y=0,g=0;const v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let C;for(let E=1;E<f.length;E++){let O=f[E],x=O.charAt(0);for(O=O.slice(1),b.length=0;C=v.exec(O);)b.push(C[0]);const _=[];for(let T=0,M=b.length;T<M;T++){if(b[T]==="00"){_.push(0,0);continue}const k=parseFloat(b[T]);isNaN(k)?_.push(0):_.push(k)}for(;_.length>0&&!isNaN(_[0]);){let T="",M=[];const k=y,G=g;let R,N,P,F,j,Y,K,I,ie,A;switch(x){case"l":y+=_.shift(),g+=_.shift(),T="L",M.push(y,g);break;case"L":y=_.shift(),g=_.shift(),M.push(y,g);break;case"m":const D=_.shift(),U=_.shift();if(y+=D,g+=U,T="M",p.length>2&&p[p.length-1].command==="z"){for(let L=p.length-2;L>=0;L--)if(p[L].command==="M"){y=p[L].points[0]+D,g=p[L].points[1]+U;break}}M.push(y,g),x="l";break;case"M":y=_.shift(),g=_.shift(),T="M",M.push(y,g),x="L";break;case"h":y+=_.shift(),T="L",M.push(y,g);break;case"H":y=_.shift(),T="L",M.push(y,g);break;case"v":g+=_.shift(),T="L",M.push(y,g);break;case"V":g=_.shift(),T="L",M.push(y,g);break;case"C":M.push(_.shift(),_.shift(),_.shift(),_.shift()),y=_.shift(),g=_.shift(),M.push(y,g);break;case"c":M.push(y+_.shift(),g+_.shift(),y+_.shift(),g+_.shift()),y+=_.shift(),g+=_.shift(),T="C",M.push(y,g);break;case"S":N=y,P=g,R=p[p.length-1],R.command==="C"&&(N=y+(y-R.points[2]),P=g+(g-R.points[3])),M.push(N,P,_.shift(),_.shift()),y=_.shift(),g=_.shift(),T="C",M.push(y,g);break;case"s":N=y,P=g,R=p[p.length-1],R.command==="C"&&(N=y+(y-R.points[2]),P=g+(g-R.points[3])),M.push(N,P,y+_.shift(),g+_.shift()),y+=_.shift(),g+=_.shift(),T="C",M.push(y,g);break;case"Q":M.push(_.shift(),_.shift()),y=_.shift(),g=_.shift(),M.push(y,g);break;case"q":M.push(y+_.shift(),g+_.shift()),y+=_.shift(),g+=_.shift(),T="Q",M.push(y,g);break;case"T":N=y,P=g,R=p[p.length-1],R.command==="Q"&&(N=y+(y-R.points[0]),P=g+(g-R.points[1])),y=_.shift(),g=_.shift(),T="Q",M.push(N,P,y,g);break;case"t":N=y,P=g,R=p[p.length-1],R.command==="Q"&&(N=y+(y-R.points[0]),P=g+(g-R.points[1])),y+=_.shift(),g+=_.shift(),T="Q",M.push(N,P,y,g);break;case"A":F=_.shift(),j=_.shift(),Y=_.shift(),K=_.shift(),I=_.shift(),ie=y,A=g,y=_.shift(),g=_.shift(),T="A",M=this.convertEndpointToCenterParameterization(ie,A,y,g,K,I,F,j,Y);break;case"a":F=_.shift(),j=_.shift(),Y=_.shift(),K=_.shift(),I=_.shift(),ie=y,A=g,y+=_.shift(),g+=_.shift(),T="A",M=this.convertEndpointToCenterParameterization(ie,A,y,g,K,I,F,j,Y);break}p.push({command:T||x,points:M,start:{x:k,y:G},pathLength:this.calcLength(k,G,T||x,M)})}(x==="z"||x==="Z")&&p.push({command:"z",points:[],start:void 0,pathLength:0})}return p}static calcLength(c,u,h,f){let p,b,y,g;const v=Kt;switch(h){case"L":return v.getLineLength(c,u,f[0],f[1]);case"C":return(0,r.getCubicArcLength)([c,f[0],f[2],f[4]],[u,f[1],f[3],f[5]],1);case"Q":return(0,r.getQuadraticArcLength)([c,f[0],f[2]],[u,f[1],f[3]],1);case"A":p=0;const C=f[4],E=f[5],O=f[4]+E;let x=Math.PI/180;if(Math.abs(C-O)<x&&(x=Math.abs(C-O)),b=v.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],C,0),E<0)for(g=C-x;g>O;g-=x)y=v.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],g,0),p+=v.getLineLength(b.x,b.y,y.x,y.y),b=y;else for(g=C+x;g<O;g+=x)y=v.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],g,0),p+=v.getLineLength(b.x,b.y,y.x,y.y),b=y;return y=v.getPointOnEllipticalArc(f[0],f[1],f[2],f[3],O,0),p+=v.getLineLength(b.x,b.y,y.x,y.y),p}return 0}static convertEndpointToCenterParameterization(c,u,h,f,p,b,y,g,v){const C=v*(Math.PI/180),E=Math.cos(C)*(c-h)/2+Math.sin(C)*(u-f)/2,O=-1*Math.sin(C)*(c-h)/2+Math.cos(C)*(u-f)/2,x=E*E/(y*y)+O*O/(g*g);x>1&&(y*=Math.sqrt(x),g*=Math.sqrt(x));let _=Math.sqrt((y*y*(g*g)-y*y*(O*O)-g*g*(E*E))/(y*y*(O*O)+g*g*(E*E)));p===b&&(_*=-1),isNaN(_)&&(_=0);const T=_*y*O/g,M=_*-g*E/y,k=(c+h)/2+Math.cos(C)*T-Math.sin(C)*M,G=(u+f)/2+Math.sin(C)*T+Math.cos(C)*M,R=function(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])},N=function(I,ie){return(I[0]*ie[0]+I[1]*ie[1])/(R(I)*R(ie))},P=function(I,ie){return(I[0]*ie[1]<I[1]*ie[0]?-1:1)*Math.acos(N(I,ie))},F=P([1,0],[(E-T)/y,(O-M)/g]),j=[(E-T)/y,(O-M)/g],Y=[(-1*E-T)/y,(-1*O-M)/g];let K=P(j,Y);return N(j,Y)<=-1&&(K=Math.PI),N(j,Y)>=1&&(K=0),b===0&&K>0&&(K=K-2*Math.PI),b===1&&K<0&&(K=K+2*Math.PI),[k,G,y,g,F,K,C,b]}};return Jr.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(s),t.Factory.addGetterSetter(s,"data"),Jr}var cm;function cb(){if(cm)return Qr;cm=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.Arrow=void 0;const t=Le(),e=by(),a=Ge(),r=we(),s=sh();let o=class extends e.Line{_sceneFunc(u){super._sceneFunc(u);const h=Math.PI*2,f=this.points();let p=f;const b=this.tension()!==0&&f.length>4;b&&(p=this.getTensionPoints());const y=this.pointerLength(),g=f.length;let v,C;if(b){const x=[p[p.length-4],p[p.length-3],p[p.length-2],p[p.length-1],f[g-2],f[g-1]],_=s.Path.calcLength(p[p.length-4],p[p.length-3],"C",x),T=s.Path.getPointOnQuadraticBezier(Math.min(1,1-y/_),x[0],x[1],x[2],x[3],x[4],x[5]);v=f[g-2]-T.x,C=f[g-1]-T.y}else v=f[g-2]-f[g-4],C=f[g-1]-f[g-3];const E=(Math.atan2(C,v)+h)%h,O=this.pointerWidth();this.pointerAtEnding()&&(u.save(),u.beginPath(),u.translate(f[g-2],f[g-1]),u.rotate(E),u.moveTo(0,0),u.lineTo(-y,O/2),u.lineTo(-y,-O/2),u.closePath(),u.restore(),this.__fillStroke(u)),this.pointerAtBeginning()&&(u.save(),u.beginPath(),u.translate(f[0],f[1]),b?(v=(p[0]+p[2])/2-f[0],C=(p[1]+p[3])/2-f[1]):(v=f[2]-f[0],C=f[3]-f[1]),u.rotate((Math.atan2(-C,-v)+h)%h),u.moveTo(0,0),u.lineTo(-y,O/2),u.lineTo(-y,-O/2),u.closePath(),u.restore(),this.__fillStroke(u))}__fillStroke(u){const h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,u.setLineDash([])),u.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)}getSelfRect(){const u=super.getSelfRect(),h=this.pointerWidth()/2;return{x:u.x,y:u.y-h,width:u.width,height:u.height+h*2}}};return Qr.Arrow=o,o.prototype.className="Arrow",(0,r._registerNode)(o),t.Factory.addGetterSetter(o,"pointerLength",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(o,"pointerWidth",10,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(o,"pointerAtBeginning",!1),t.Factory.addGetterSetter(o,"pointerAtEnding",!0),Qr}var $r={},um;function ub(){if(um)return $r;um=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Circle=void 0;const t=Le(),e=Tt(),a=Ge(),r=we();class s extends e.Shape{_sceneFunc(c){c.beginPath(),c.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius()!==c/2&&this.radius(c/2)}setHeight(c){this.radius()!==c/2&&this.radius(c/2)}}return $r.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,a.getNumberValidator)()),$r}var es={},dm;function db(){if(dm)return es;dm=1,Object.defineProperty(es,"__esModule",{value:!0}),es.Ellipse=void 0;const t=Le(),e=Tt(),a=Ge(),r=we();let s=class extends e.Shape{_sceneFunc(c){const u=this.radiusX(),h=this.radiusY();c.beginPath(),c.save(),u!==h&&c.scale(1,h/u),c.arc(0,0,u,0,Math.PI*2,!1),c.restore(),c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(c){this.radiusX(c/2)}setHeight(c){this.radiusY(c/2)}};return es.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,r._registerNode)(s),t.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),t.Factory.addGetterSetter(s,"radiusX",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"radiusY",0,(0,a.getNumberValidator)()),es}var ts={},hm;function hb(){if(hm)return ts;hm=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.Image=void 0;const t=rt(),e=Le(),a=Tt(),r=we(),s=Ge();class o extends a.Shape{constructor(u){super(u),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",h=>{this._removeImageLoad(h.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const u=this.image();u&&u.complete||u&&u.readyState===4||u&&u.addEventListener&&u.addEventListener("load",this._loadListener)}_removeImageLoad(u){u&&u.removeEventListener&&u.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const u=!!this.cornerRadius(),h=this.hasShadow();return u&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(u){const h=this.getWidth(),f=this.getHeight(),p=this.cornerRadius(),b=this.attrs.image;let y;if(b){const g=this.attrs.cropWidth,v=this.attrs.cropHeight;g&&v?y=[b,this.cropX(),this.cropY(),g,v,0,0,h,f]:y=[b,0,0,h,f]}(this.hasFill()||this.hasStroke()||p)&&(u.beginPath(),p?t.Util.drawRoundedRectPath(u,h,f,p):u.rect(0,0,h,f),u.closePath(),u.fillStrokeShape(this)),b&&(p&&u.clip(),u.drawImage.apply(u,y))}_hitFunc(u){const h=this.width(),f=this.height(),p=this.cornerRadius();u.beginPath(),p?t.Util.drawRoundedRectPath(u,h,f,p):u.rect(0,0,h,f),u.closePath(),u.fillStrokeShape(this)}getWidth(){var u,h;return(u=this.attrs.width)!==null&&u!==void 0?u:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var u,h;return(u=this.attrs.height)!==null&&u!==void 0?u:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(u,h,f=null){const p=t.Util.createImageElement();p.onload=function(){const b=new o({image:p});h(b)},p.onerror=f,p.crossOrigin="Anonymous",p.src=u}}return ts.Image=o,o.prototype.className="Image",(0,r._registerNode)(o),e.Factory.addGetterSetter(o,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(o,"image"),e.Factory.addComponentsGetterSetter(o,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(o,"cropX",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropY",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropWidth",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(o,"cropHeight",0,(0,s.getNumberValidator)()),ts}var Wi={},fm;function fb(){if(fm)return Wi;fm=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.Tag=Wi.Label=void 0;const t=Le(),e=Tt(),a=ah(),r=Ge(),s=we(),o=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],c="Change.konva",u="none",h="up",f="right",p="down",b="left",y=o.length;class g extends a.Group{constructor(E){super(E),this.on("add.konva",function(O){this._addListeners(O.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(E){let O=this,x;const _=function(){O._sync()};for(x=0;x<y;x++)E.on(o[x]+c,_)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let E=this.getText(),O=this.getTag(),x,_,T,M,k,G,R;if(E&&O){switch(x=E.width(),_=E.height(),T=O.pointerDirection(),M=O.pointerWidth(),R=O.pointerHeight(),k=0,G=0,T){case h:k=x/2,G=-1*R;break;case f:k=x+M,G=_/2;break;case p:k=x/2,G=_+R;break;case b:k=-1*M,G=_/2;break}O.setAttrs({x:-1*k,y:-1*G,width:x,height:_}),E.setAttrs({x:-1*k,y:-1*G})}}}Wi.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class v extends e.Shape{_sceneFunc(E){const O=this.width(),x=this.height(),_=this.pointerDirection(),T=this.pointerWidth(),M=this.pointerHeight(),k=this.cornerRadius();let G=0,R=0,N=0,P=0;typeof k=="number"?G=R=N=P=Math.min(k,O/2,x/2):(G=Math.min(k[0]||0,O/2,x/2),R=Math.min(k[1]||0,O/2,x/2),P=Math.min(k[2]||0,O/2,x/2),N=Math.min(k[3]||0,O/2,x/2)),E.beginPath(),E.moveTo(G,0),_===h&&(E.lineTo((O-T)/2,0),E.lineTo(O/2,-1*M),E.lineTo((O+T)/2,0)),E.lineTo(O-R,0),E.arc(O-R,R,R,Math.PI*3/2,0,!1),_===f&&(E.lineTo(O,(x-M)/2),E.lineTo(O+T,x/2),E.lineTo(O,(x+M)/2)),E.lineTo(O,x-P),E.arc(O-P,x-P,P,0,Math.PI/2,!1),_===p&&(E.lineTo((O+T)/2,x),E.lineTo(O/2,x+M),E.lineTo((O-T)/2,x)),E.lineTo(N,x),E.arc(N,x-N,N,Math.PI/2,Math.PI,!1),_===b&&(E.lineTo(0,(x+M)/2),E.lineTo(-1*T,x/2),E.lineTo(0,(x-M)/2)),E.lineTo(0,G),E.arc(G,G,G,Math.PI,Math.PI*3/2,!1),E.closePath(),E.fillStrokeShape(this)}getSelfRect(){let E=0,O=0,x=this.pointerWidth(),_=this.pointerHeight(),T=this.pointerDirection(),M=this.width(),k=this.height();return T===h?(O-=_,k+=_):T===p?k+=_:T===b?(E-=x*1.5,M+=x):T===f&&(M+=x*1.5),{x:E,y:O,width:M,height:k}}}return Wi.Tag=v,v.prototype.className="Tag",(0,s._registerNode)(v),t.Factory.addGetterSetter(v,"pointerDirection",u),t.Factory.addGetterSetter(v,"pointerWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(v,"pointerHeight",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(v,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),Wi}var ns={},pm;function Sy(){if(pm)return ns;pm=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.Rect=void 0;const t=Le(),e=Tt(),a=we(),r=rt(),s=Ge();class o extends e.Shape{_sceneFunc(u){const h=this.cornerRadius(),f=this.width(),p=this.height();u.beginPath(),h?r.Util.drawRoundedRectPath(u,f,p,h):u.rect(0,0,f,p),u.closePath(),u.fillStrokeShape(this)}}return ns.Rect=o,o.prototype.className="Rect",(0,a._registerNode)(o),t.Factory.addGetterSetter(o,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),ns}var is={},mm;function pb(){if(mm)return is;mm=1,Object.defineProperty(is,"__esModule",{value:!0}),is.RegularPolygon=void 0;const t=Le(),e=Tt(),a=Ge(),r=we();let s=class extends e.Shape{_sceneFunc(c){const u=this._getPoints();c.beginPath(),c.moveTo(u[0].x,u[0].y);for(let h=1;h<u.length;h++)c.lineTo(u[h].x,u[h].y);c.closePath(),c.fillStrokeShape(this)}_getPoints(){const c=this.attrs.sides,u=this.attrs.radius||0,h=[];for(let f=0;f<c;f++)h.push({x:u*Math.sin(f*2*Math.PI/c),y:-1*u*Math.cos(f*2*Math.PI/c)});return h}getSelfRect(){const c=this._getPoints();let u=c[0].x,h=c[0].y,f=c[0].x,p=c[0].y;return c.forEach(b=>{u=Math.min(u,b.x),h=Math.max(h,b.x),f=Math.min(f,b.y),p=Math.max(p,b.y)}),{x:u,y:f,width:h-u,height:p-f}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(c){this.radius(c/2)}setHeight(c){this.radius(c/2)}};return is.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"radius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"sides",0,(0,a.getNumberValidator)()),is}var as={},gm;function mb(){if(gm)return as;gm=1,Object.defineProperty(as,"__esModule",{value:!0}),as.Ring=void 0;const t=Le(),e=Tt(),a=Ge(),r=we(),s=Math.PI*2;let o=class extends e.Shape{_sceneFunc(u){u.beginPath(),u.arc(0,0,this.innerRadius(),0,s,!1),u.moveTo(this.outerRadius(),0),u.arc(0,0,this.outerRadius(),s,0,!0),u.closePath(),u.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(u){this.outerRadius(u/2)}setHeight(u){this.outerRadius(u/2)}};return as.Ring=o,o.prototype.className="Ring",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(o),t.Factory.addGetterSetter(o,"innerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(o,"outerRadius",0,(0,a.getNumberValidator)()),as}var rs={},ym;function gb(){if(ym)return rs;ym=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.Sprite=void 0;const t=Le(),e=Tt(),a=rh(),r=Ge(),s=we();let o=class extends e.Shape{constructor(u){super(u),this._updated=!0,this.anim=new a.Animation(()=>{const h=this._updated;return this._updated=!1,h}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(u){const h=this.animation(),f=this.frameIndex(),p=f*4,b=this.animations()[h],y=this.frameOffsets(),g=b[p+0],v=b[p+1],C=b[p+2],E=b[p+3],O=this.image();if((this.hasFill()||this.hasStroke())&&(u.beginPath(),u.rect(0,0,C,E),u.closePath(),u.fillStrokeShape(this)),O)if(y){const x=y[h],_=f*2;u.drawImage(O,g,v,C,E,x[_+0],x[_+1],C,E)}else u.drawImage(O,g,v,C,E,0,0,C,E)}_hitFunc(u){const h=this.animation(),f=this.frameIndex(),p=f*4,b=this.animations()[h],y=this.frameOffsets(),g=b[p+2],v=b[p+3];if(u.beginPath(),y){const C=y[h],E=f*2;u.rect(C[E+0],C[E+1],g,v)}else u.rect(0,0,g,v);u.closePath(),u.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const u=this;this.interval=setInterval(function(){u._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const u=this.getLayer();this.anim.setLayers(u),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const u=this.frameIndex(),h=this.animation(),f=this.animations(),p=f[h],b=p.length/4;u<b-1?this.frameIndex(u+1):this.frameIndex(0)}};return rs.Sprite=o,o.prototype.className="Sprite",(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"animation"),t.Factory.addGetterSetter(o,"animations"),t.Factory.addGetterSetter(o,"frameOffsets"),t.Factory.addGetterSetter(o,"image"),t.Factory.addGetterSetter(o,"frameIndex",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"frameRate",17,(0,r.getNumberValidator)()),t.Factory.backCompat(o,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),rs}var ss={},vm;function yb(){if(vm)return ss;vm=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.Star=void 0;const t=Le(),e=Tt(),a=Ge(),r=we();let s=class extends e.Shape{_sceneFunc(c){const u=this.innerRadius(),h=this.outerRadius(),f=this.numPoints();c.beginPath(),c.moveTo(0,0-h);for(let p=1;p<f*2;p++){const b=p%2===0?h:u,y=b*Math.sin(p*Math.PI/f),g=-1*b*Math.cos(p*Math.PI/f);c.lineTo(y,g)}c.closePath(),c.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(c){this.outerRadius(c/2)}setHeight(c){this.outerRadius(c/2)}};return ss.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,r._registerNode)(s),t.Factory.addGetterSetter(s,"numPoints",5,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"innerRadius",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(s,"outerRadius",0,(0,a.getNumberValidator)()),ss}var qa={},_m;function Cy(){if(_m)return qa;_m=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.Text=void 0,qa.stringToArray=c;const t=rt(),e=Le(),a=Tt(),r=we(),s=Ge(),o=we();function c(ee){return[...ee].reduce((H,te,ae,J)=>{if(new RegExp("\\p{Emoji}","u").test(te)){const z=J[ae+1];z&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(z)?(H.push(te+z),J[ae+1]=""):H.push(te)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(te+(J[ae+1]||""))?H.push(te+J[ae+1]):ae>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(te)?H[H.length-1]+=te:te&&H.push(te);return H},[])}const u="auto",h="center",f="inherit",p="justify",b="Change.konva",y="2d",g="-",v="left",C="text",E="Text",O="top",x="bottom",_="middle",T="normal",M="px ",k=" ",G="right",R="rtl",N="word",P="char",F="none",j="",Y=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],K=Y.length;function I(ee){return ee.split(",").map(H=>{H=H.trim();const te=H.indexOf(" ")>=0,ae=H.indexOf('"')>=0||H.indexOf("'")>=0;return te&&!ae&&(H=`"${H}"`),H}).join(", ")}let ie;function A(){return ie||(ie=t.Util.createCanvasElement().getContext(y),ie)}function D(ee){ee.fillText(this._partialText,this._partialTextX,this._partialTextY)}function U(ee){ee.setAttr("miterLimit",2),ee.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function L(ee){return ee=ee||{},!ee.fillLinearGradientColorStops&&!ee.fillRadialGradientColorStops&&!ee.fillPatternImage&&(ee.fill=ee.fill||"black"),ee}let V=class extends a.Shape{constructor(H){super(L(H)),this._partialTextX=0,this._partialTextY=0;for(let te=0;te<K;te++)this.on(Y[te]+b,this._setTextData);this._setTextData()}_sceneFunc(H){const te=this.textArr,ae=te.length;if(!this.text())return;let J=this.padding(),z=this.fontSize(),Z=this.lineHeight()*z,se=this.verticalAlign(),ue=this.direction(),me=0,Se=this.align(),Me=this.getWidth(),He=this.letterSpacing(),Ce=this.fill(),Qe=this.textDecoration(),qe=Qe.indexOf("underline")!==-1,Je=Qe.indexOf("line-through")!==-1,un;ue=ue===f?H.direction:ue;let Rt=Z/2,Zt=_;if(r.Konva._fixTextRendering){const Oe=this.measureSize("M");Zt="alphabetic",Rt=(Oe.fontBoundingBoxAscent-Oe.fontBoundingBoxDescent)/2+Z/2}for(ue===R&&H.setAttr("direction",ue),H.setAttr("font",this._getContextFont()),H.setAttr("textBaseline",Zt),H.setAttr("textAlign",v),se===_?me=(this.getHeight()-ae*Z-J*2)/2:se===x&&(me=this.getHeight()-ae*Z-J*2),H.translate(J,me+J),un=0;un<ae;un++){let Oe=0,kt=0;const Qt=te[un],_n=Qt.text,ut=Qt.width,mt=Qt.lastInParagraph;if(H.save(),Se===G?Oe+=Me-ut-J*2:Se===h&&(Oe+=(Me-ut-J*2)/2),qe){H.save(),H.beginPath();const bt=r.Konva._fixTextRendering?Math.round(z/4):Math.round(z/2),Wt=Oe,Mt=Rt+kt+bt;H.moveTo(Wt,Mt);const At=Se===p&&!mt?Me-J*2:ut;H.lineTo(Wt+Math.round(At),Mt),H.lineWidth=z/15;const oi=this._getLinearGradient();H.strokeStyle=oi||Ce,H.stroke(),H.restore()}if(Je){H.save(),H.beginPath();const bt=r.Konva._fixTextRendering?-Math.round(z/4):0;H.moveTo(Oe,Rt+kt+bt);const Wt=Se===p&&!mt?Me-J*2:ut;H.lineTo(Oe+Math.round(Wt),Rt+kt+bt),H.lineWidth=z/15;const Mt=this._getLinearGradient();H.strokeStyle=Mt||Ce,H.stroke(),H.restore()}if(ue!==R&&(He!==0||Se===p)){const bt=_n.split(" ").length-1,Wt=c(_n);for(let Mt=0;Mt<Wt.length;Mt++){const At=Wt[Mt];At===" "&&!mt&&Se===p&&(Oe+=(Me-J*2-ut)/bt),this._partialTextX=Oe,this._partialTextY=Rt+kt,this._partialText=At,H.fillStrokeShape(this),Oe+=this.measureSize(At).width+He}}else He!==0&&H.setAttr("letterSpacing",`${He}px`),this._partialTextX=Oe,this._partialTextY=Rt+kt,this._partialText=_n,H.fillStrokeShape(this);H.restore(),ae>1&&(Rt+=Z)}}_hitFunc(H){const te=this.getWidth(),ae=this.getHeight();H.beginPath(),H.rect(0,0,te,ae),H.closePath(),H.fillStrokeShape(this)}setText(H){const te=t.Util._isString(H)?H:H==null?"":H+"";return this._setAttr(C,te),this}getWidth(){return this.attrs.width===u||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===u||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(H){var te,ae,J,z,Z,se,ue,me,Se,Me,He;let Ce=A(),Qe=this.fontSize(),qe;Ce.save(),Ce.font=this._getContextFont(),qe=Ce.measureText(H),Ce.restore();const Je=Qe/100;return{actualBoundingBoxAscent:(te=qe.actualBoundingBoxAscent)!==null&&te!==void 0?te:71.58203125*Je,actualBoundingBoxDescent:(ae=qe.actualBoundingBoxDescent)!==null&&ae!==void 0?ae:0,actualBoundingBoxLeft:(J=qe.actualBoundingBoxLeft)!==null&&J!==void 0?J:-7.421875*Je,actualBoundingBoxRight:(z=qe.actualBoundingBoxRight)!==null&&z!==void 0?z:75.732421875*Je,alphabeticBaseline:(Z=qe.alphabeticBaseline)!==null&&Z!==void 0?Z:0,emHeightAscent:(se=qe.emHeightAscent)!==null&&se!==void 0?se:100*Je,emHeightDescent:(ue=qe.emHeightDescent)!==null&&ue!==void 0?ue:-20*Je,fontBoundingBoxAscent:(me=qe.fontBoundingBoxAscent)!==null&&me!==void 0?me:91*Je,fontBoundingBoxDescent:(Se=qe.fontBoundingBoxDescent)!==null&&Se!==void 0?Se:21*Je,hangingBaseline:(Me=qe.hangingBaseline)!==null&&Me!==void 0?Me:72.80000305175781*Je,ideographicBaseline:(He=qe.ideographicBaseline)!==null&&He!==void 0?He:-21*Je,width:qe.width,height:Qe}}_getContextFont(){return this.fontStyle()+k+this.fontVariant()+k+(this.fontSize()+M)+I(this.fontFamily())}_addTextLine(H){this.align()===p&&(H=H.trim());const ae=this._getTextWidth(H);return this.textArr.push({text:H,width:ae,lastInParagraph:!1})}_getTextWidth(H){const te=this.letterSpacing(),ae=H.length;return A().measureText(H).width+te*ae}_setTextData(){let H=this.text().split(`
`),te=+this.fontSize(),ae=0,J=this.lineHeight()*te,z=this.attrs.width,Z=this.attrs.height,se=z!==u&&z!==void 0,ue=Z!==u&&Z!==void 0,me=this.padding(),Se=z-me*2,Me=Z-me*2,He=0,Ce=this.wrap(),Qe=Ce!==F,qe=Ce!==P&&Qe,Je=this.ellipsis();this.textArr=[],A().font=this._getContextFont();const un=Je?this._getTextWidth(j):0;for(let Rt=0,Zt=H.length;Rt<Zt;++Rt){let Oe=H[Rt],kt=this._getTextWidth(Oe);if(se&&kt>Se)for(;Oe.length>0;){let Qt=0,_n=c(Oe).length,ut="",mt=0;for(;Qt<_n;){const bt=Qt+_n>>>1,Wt=c(Oe),Mt=Wt.slice(0,bt+1).join(""),At=this._getTextWidth(Mt);(Je&&ue&&He+J>Me?At+un:At)<=Se?(Qt=bt+1,ut=Mt,mt=At):_n=bt}if(ut){if(qe){const Mt=c(Oe),At=c(ut),oi=Mt[At.length],ur=oi===k||oi===g;let da;if(ur&&mt<=Se)da=At.length;else{const dr=At.lastIndexOf(k),Xl=At.lastIndexOf(g);da=Math.max(dr,Xl)+1}da>0&&(Qt=da,ut=Mt.slice(0,Qt).join(""),mt=this._getTextWidth(ut))}if(ut=ut.trimRight(),this._addTextLine(ut),ae=Math.max(ae,mt),He+=J,this._shouldHandleEllipsis(He)){this._tryToAddEllipsisToLastLine();break}if(Oe=c(Oe).slice(Qt).join("").trimLeft(),Oe.length>0&&(kt=this._getTextWidth(Oe),kt<=Se)){this._addTextLine(Oe),He+=J,ae=Math.max(ae,kt);break}}else break}else this._addTextLine(Oe),He+=J,ae=Math.max(ae,kt),this._shouldHandleEllipsis(He)&&Rt<Zt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),ue&&He+J>Me)break}this.textHeight=te,this.textWidth=ae}_shouldHandleEllipsis(H){const te=+this.fontSize(),ae=this.lineHeight()*te,J=this.attrs.height,z=J!==u&&J!==void 0,Z=this.padding(),se=J-Z*2;return!(this.wrap()!==F)||z&&H+ae>se}_tryToAddEllipsisToLastLine(){const H=this.attrs.width,te=H!==u&&H!==void 0,ae=this.padding(),J=H-ae*2,z=this.ellipsis(),Z=this.textArr[this.textArr.length-1];!Z||!z||(te&&(this._getTextWidth(Z.text+j)<J||(Z.text=Z.text.slice(0,Z.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Z.text+j))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const H=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,te=this.hasShadow();return H&&te?!0:super._useBufferCanvas()}};return qa.Text=V,V.prototype._fillFunc=D,V.prototype._strokeFunc=U,V.prototype.className=E,V.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,o._registerNode)(V),e.Factory.overWriteSetter(V,"width",(0,s.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(V,"height",(0,s.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(V,"direction",f),e.Factory.addGetterSetter(V,"fontFamily","Arial"),e.Factory.addGetterSetter(V,"fontSize",12,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(V,"fontStyle",T),e.Factory.addGetterSetter(V,"fontVariant",T),e.Factory.addGetterSetter(V,"padding",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(V,"align",v),e.Factory.addGetterSetter(V,"verticalAlign",O),e.Factory.addGetterSetter(V,"lineHeight",1,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(V,"wrap",N),e.Factory.addGetterSetter(V,"ellipsis",!1,(0,s.getBooleanValidator)()),e.Factory.addGetterSetter(V,"letterSpacing",0,(0,s.getNumberValidator)()),e.Factory.addGetterSetter(V,"text","",(0,s.getStringValidator)()),e.Factory.addGetterSetter(V,"textDecoration",""),qa}var os={},bm;function vb(){if(bm)return os;bm=1,Object.defineProperty(os,"__esModule",{value:!0}),os.TextPath=void 0;const t=rt(),e=Le(),a=Tt(),r=sh(),s=Cy(),o=Ge(),c=we(),u="",h="normal";function f(y){y.fillText(this.partialText,0,0)}function p(y){y.strokeText(this.partialText,0,0)}let b=class extends a.Shape{constructor(g){super(g),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return r.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const v=this.pathLength;return g-1>v?null:r.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=r.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const v=this.textDecoration(),C=this.fill(),E=this.fontSize(),O=this.glyphInfo;v==="underline"&&g.beginPath();for(let x=0;x<O.length;x++){g.save();const _=O[x].p0;g.translate(_.x,_.y),g.rotate(O[x].rotation),this.partialText=O[x].text,g.fillStrokeShape(this),v==="underline"&&(x===0&&g.moveTo(0,E/2+1),g.lineTo(E,E/2+1)),g.restore()}v==="underline"&&(g.strokeStyle=C,g.lineWidth=E/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const v=this.glyphInfo;if(v.length>=1){const C=v[0].p0;g.moveTo(C.x,C.y)}for(let C=0;C<v.length;C++){const E=v[C].p1;g.lineTo(E.x,E.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const C=this.dummyCanvas.getContext("2d");C.save(),C.font=this._getContextFont();const E=C.measureText(g);return C.restore(),{width:E.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:v}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=v,this.glyphInfo=[],!this.attrs.data)return null;const C=this.letterSpacing(),E=this.align(),O=this.kerningFunc(),x=Math.max(this.textWidth+((this.attrs.text||"").length-1)*C,0);let _=0;E==="center"&&(_=Math.max(0,this.pathLength/2-x/2)),E==="right"&&(_=Math.max(0,this.pathLength-x));const T=(0,s.stringToArray)(this.text());let M=_;for(let k=0;k<T.length;k++){const G=this._getPointAtLength(M);if(!G)return;let R=this._getTextSize(T[k]).width+C;if(T[k]===" "&&E==="justify"){const K=this.text().split(" ").length-1;R+=(this.pathLength-x)/K}const N=this._getPointAtLength(M+R);if(!N)return;const P=r.Path.getLineLength(G.x,G.y,N.x,N.y);let F=0;if(O)try{F=O(T[k-1],T[k])*this.fontSize()}catch{F=0}G.x+=F,N.x+=F,this.textWidth+=F;const j=r.Path.getPointOnLine(F+P/2,G.x,G.y,N.x,N.y),Y=Math.atan2(N.y-G.y,N.x-G.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:T[k],rotation:Y,p0:G,p1:N}),M+=R}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(M){g.push(M.p0.x),g.push(M.p0.y),g.push(M.p1.x),g.push(M.p1.y)});let v=g[0]||0,C=g[0]||0,E=g[1]||0,O=g[1]||0,x,_;for(let M=0;M<g.length/2;M++)x=g[M*2],_=g[M*2+1],v=Math.min(v,x),C=Math.max(C,x),E=Math.min(E,_),O=Math.max(O,_);const T=this.fontSize();return{x:v-T/2,y:E-T/2,width:C-v+T,height:O-E+T}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return os.TextPath=b,b.prototype._fillFunc=f,b.prototype._strokeFunc=p,b.prototype._fillFuncHit=f,b.prototype._strokeFuncHit=p,b.prototype.className="TextPath",b.prototype._attrsAffectingSize=["text","fontSize","data"],(0,c._registerNode)(b),e.Factory.addGetterSetter(b,"data"),e.Factory.addGetterSetter(b,"fontFamily","Arial"),e.Factory.addGetterSetter(b,"fontSize",12,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(b,"fontStyle",h),e.Factory.addGetterSetter(b,"align","left"),e.Factory.addGetterSetter(b,"letterSpacing",0,(0,o.getNumberValidator)()),e.Factory.addGetterSetter(b,"textBaseline","middle"),e.Factory.addGetterSetter(b,"fontVariant",h),e.Factory.addGetterSetter(b,"text",u),e.Factory.addGetterSetter(b,"textDecoration",""),e.Factory.addGetterSetter(b,"kerningFunc",void 0),os}var ls={},Sm;function _b(){if(Sm)return ls;Sm=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.Transformer=void 0;const t=rt(),e=Le(),a=ct(),r=Tt(),s=Sy(),o=ah(),c=we(),u=Ge(),h=we(),f="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(R=>R+`.${f}`).join(" "),b="nodesRect",y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},v="ontouchstart"in c.Konva._global;function C(R,N,P){if(R==="rotater")return P;N+=t.Util.degToRad(g[R]||0);const F=(t.Util.radToDeg(N)%360+360)%360;return t.Util._inRange(F,315+22.5,360)||t.Util._inRange(F,0,22.5)?"ns-resize":t.Util._inRange(F,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(F,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(F,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(F,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(F,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(F,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(F,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+F),"pointer")}const E=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function O(R){return{x:R.x+R.width/2*Math.cos(R.rotation)+R.height/2*Math.sin(-R.rotation),y:R.y+R.height/2*Math.cos(R.rotation)+R.width/2*Math.sin(R.rotation)}}function x(R,N,P){const F=P.x+(R.x-P.x)*Math.cos(N)-(R.y-P.y)*Math.sin(N),j=P.y+(R.x-P.x)*Math.sin(N)+(R.y-P.y)*Math.cos(N);return{...R,rotation:R.rotation+N,x:F,y:j}}function _(R,N){const P=O(R);return x(R,N,P)}function T(R,N,P){let F=N;for(let j=0;j<R.length;j++){const Y=c.Konva.getAngle(R[j]),K=Math.abs(Y-N)%(Math.PI*2);Math.min(K,Math.PI*2-K)<P&&(F=Y)}return F}let M=0,k=class extends o.Group{constructor(N){super(N),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}attachTo(N){return this.setNode(N),this}setNode(N){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([N])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return f+this._id}setNodes(N=[]){this._nodes&&this._nodes.length&&this.detach();const P=N.filter(j=>j.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=N=P,N.length===1&&this.useSingleNodeRotation()?this.rotation(N[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(j=>{const Y=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(j._attrsAffectingSize.length){const K=j._attrsAffectingSize.map(I=>I+"Change."+this._getEventNamespace()).join(" ");j.on(K,Y)}j.on(y.map(K=>K+`.${this._getEventNamespace()}`).join(" "),Y),j.on(`absoluteTransformChange.${this._getEventNamespace()}`,Y),this._proxyDrag(j)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(N){let P;N.on(`dragstart.${this._getEventNamespace()}`,F=>{P=N.getAbsolutePosition(),!this.isDragging()&&N!==this.findOne(".back")&&this.startDrag(F,!1)}),N.on(`dragmove.${this._getEventNamespace()}`,F=>{if(!P)return;const j=N.getAbsolutePosition(),Y=j.x-P.x,K=j.y-P.y;this.nodes().forEach(I=>{if(I===N||I.isDragging())return;const ie=I.getAbsolutePosition();I.setAbsolutePosition({x:ie.x+Y,y:ie.y+K}),I.startDrag(F)}),P=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(N=>{N.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(b),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(b,this.__getNodeRect)}__getNodeShape(N,P=this.rotation(),F){const j=N.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Y=N.getAbsoluteScale(F),K=N.getAbsolutePosition(F),I=j.x*Y.x-N.offsetX()*Y.x,ie=j.y*Y.y-N.offsetY()*Y.y,A=(c.Konva.getAngle(N.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),D={x:K.x+I*Math.cos(A)+ie*Math.sin(-A),y:K.y+ie*Math.cos(A)+I*Math.sin(A),width:j.width*Y.x,height:j.height*Y.y,rotation:A};return x(D,-c.Konva.getAngle(P),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const P=[];this.nodes().map(A=>{const D=A.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),U=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],L=A.getAbsoluteTransform();U.forEach(function(V){const ee=L.point(V);P.push(ee)})});const F=new t.Transform;F.rotate(-c.Konva.getAngle(this.rotation()));let j=1/0,Y=1/0,K=-1/0,I=-1/0;P.forEach(function(A){const D=F.point(A);j===void 0&&(j=K=D.x,Y=I=D.y),j=Math.min(j,D.x),Y=Math.min(Y,D.y),K=Math.max(K,D.x),I=Math.max(I,D.y)}),F.invert();const ie=F.point({x:j,y:Y});return{x:ie.x,y:ie.y,width:K-j,height:I-Y,rotation:c.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),E.forEach(N=>{this._createAnchor(N)}),this._createAnchor("rotater")}_createAnchor(N){const P=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:N+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:v?10:"auto"}),F=this;P.on("mousedown touchstart",function(j){F._handleMouseDown(j)}),P.on("dragstart",j=>{P.stopDrag(),j.cancelBubble=!0}),P.on("dragend",j=>{j.cancelBubble=!0}),P.on("mouseenter",()=>{const j=c.Konva.getAngle(this.rotation()),Y=this.rotateAnchorCursor(),K=C(N,j,Y);P.getStage().content&&(P.getStage().content.style.cursor=K),this._cursorChange=!0}),P.on("mouseout",()=>{P.getStage().content&&(P.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(P)}_createBack(){const N=new r.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(P,F){const j=F.getParent(),Y=j.padding();P.beginPath(),P.rect(-Y,-Y,F.width()+Y*2,F.height()+Y*2),P.moveTo(F.width()/2,-Y),j.rotateEnabled()&&j.rotateLineVisible()&&P.lineTo(F.width()/2,-j.rotateAnchorOffset()*t.Util._sign(F.height())-Y),P.fillStrokeShape(F)},hitFunc:(P,F)=>{if(!this.shouldOverdrawWholeArea())return;const j=this.padding();P.beginPath(),P.rect(-j,-j,F.width()+j*2,F.height()+j*2),P.fillStrokeShape(F)}});this.add(N),this._proxyDrag(N),N.on("dragstart",P=>{P.cancelBubble=!0}),N.on("dragmove",P=>{P.cancelBubble=!0}),N.on("dragend",P=>{P.cancelBubble=!0}),this.on("dragmove",P=>{this.update()})}_handleMouseDown(N){if(this._transforming)return;this._movingAnchorName=N.target.name().split(" ")[0];const P=this._getNodeRect(),F=P.width,j=P.height,Y=Math.sqrt(Math.pow(F,2)+Math.pow(j,2));this.sin=Math.abs(j/Y),this.cos=Math.abs(F/Y),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const K=N.target.getAbsolutePosition(),I=N.target.getStage().getPointerPosition();this._anchorDragOffset={x:I.x-K.x,y:I.y-K.y},M++,this._fire("transformstart",{evt:N.evt,target:this.getNode()}),this._nodes.forEach(ie=>{ie._fire("transformstart",{evt:N.evt,target:ie})})}_handleMouseMove(N){let P,F,j;const Y=this.findOne("."+this._movingAnchorName),K=Y.getStage();K.setPointersPositions(N);const I=K.getPointerPosition();let ie={x:I.x-this._anchorDragOffset.x,y:I.y-this._anchorDragOffset.y};const A=Y.getAbsolutePosition();this.anchorDragBoundFunc()&&(ie=this.anchorDragBoundFunc()(A,ie,N)),Y.setAbsolutePosition(ie);const D=Y.getAbsolutePosition();if(A.x===D.x&&A.y===D.y)return;if(this._movingAnchorName==="rotater"){const J=this._getNodeRect();P=Y.x()-J.width/2,F=-Y.y()+J.height/2;let z=Math.atan2(-F,P)+Math.PI/2;J.height<0&&(z-=Math.PI);const se=c.Konva.getAngle(this.rotation())+z,ue=c.Konva.getAngle(this.rotationSnapTolerance()),Se=T(this.rotationSnaps(),se,ue)-J.rotation,Me=_(J,Se);this._fitNodesInto(Me,N);return}const U=this.shiftBehavior();let L;U==="inverted"?L=this.keepRatio()&&!N.shiftKey:U==="none"?L=this.keepRatio():L=this.keepRatio()||N.shiftKey;let V=this.centeredScaling()||N.altKey;if(this._movingAnchorName==="top-left"){if(L){const J=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};j=Math.sqrt(Math.pow(J.x-Y.x(),2)+Math.pow(J.y-Y.y(),2));const z=this.findOne(".top-left").x()>J.x?-1:1,Z=this.findOne(".top-left").y()>J.y?-1:1;P=j*this.cos*z,F=j*this.sin*Z,this.findOne(".top-left").x(J.x-P),this.findOne(".top-left").y(J.y-F)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(Y.y());else if(this._movingAnchorName==="top-right"){if(L){const J=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};j=Math.sqrt(Math.pow(Y.x()-J.x,2)+Math.pow(J.y-Y.y(),2));const z=this.findOne(".top-right").x()<J.x?-1:1,Z=this.findOne(".top-right").y()>J.y?-1:1;P=j*this.cos*z,F=j*this.sin*Z,this.findOne(".top-right").x(J.x+P),this.findOne(".top-right").y(J.y-F)}var ee=Y.position();this.findOne(".top-left").y(ee.y),this.findOne(".bottom-right").x(ee.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(Y.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(Y.x());else if(this._movingAnchorName==="bottom-left"){if(L){const J=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};j=Math.sqrt(Math.pow(J.x-Y.x(),2)+Math.pow(Y.y()-J.y,2));const z=J.x<Y.x()?-1:1,Z=Y.y()<J.y?-1:1;P=j*this.cos*z,F=j*this.sin*Z,Y.x(J.x-P),Y.y(J.y+F)}ee=Y.position(),this.findOne(".top-left").x(ee.x),this.findOne(".bottom-right").y(ee.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(Y.y());else if(this._movingAnchorName==="bottom-right"){if(L){const J=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};j=Math.sqrt(Math.pow(Y.x()-J.x,2)+Math.pow(Y.y()-J.y,2));const z=this.findOne(".bottom-right").x()<J.x?-1:1,Z=this.findOne(".bottom-right").y()<J.y?-1:1;P=j*this.cos*z,F=j*this.sin*Z,this.findOne(".bottom-right").x(J.x+P),this.findOne(".bottom-right").y(J.y+F)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(V=this.centeredScaling()||N.altKey,V){const J=this.findOne(".top-left"),z=this.findOne(".bottom-right"),Z=J.x(),se=J.y(),ue=this.getWidth()-z.x(),me=this.getHeight()-z.y();z.move({x:-Z,y:-se}),J.move({x:ue,y:me})}const H=this.findOne(".top-left").getAbsolutePosition();P=H.x,F=H.y;const te=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ae=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:P,y:F,width:te,height:ae,rotation:c.Konva.getAngle(this.rotation())},N)}_handleMouseUp(N){this._removeEvents(N)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(N){var P;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const F=this.getNode();M--,this._fire("transformend",{evt:N,target:F}),(P=this.getLayer())===null||P===void 0||P.batchDraw(),F&&this._nodes.forEach(j=>{var Y;j._fire("transformend",{evt:N,target:j}),(Y=j.getLayer())===null||Y===void 0||Y.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(N,P){const F=this._getNodeRect(),j=1;if(t.Util._inRange(N.width,-this.padding()*2-j,j)){this.update();return}if(t.Util._inRange(N.height,-this.padding()*2-j,j)){this.update();return}const Y=new t.Transform;if(Y.rotate(c.Konva.getAngle(this.rotation())),this._movingAnchorName&&N.width<0&&this._movingAnchorName.indexOf("left")>=0){const L=Y.point({x:-this.padding()*2,y:0});N.x+=L.x,N.y+=L.y,N.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=L.x,this._anchorDragOffset.y-=L.y}else if(this._movingAnchorName&&N.width<0&&this._movingAnchorName.indexOf("right")>=0){const L=Y.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=L.x,this._anchorDragOffset.y-=L.y,N.width+=this.padding()*2}if(this._movingAnchorName&&N.height<0&&this._movingAnchorName.indexOf("top")>=0){const L=Y.point({x:0,y:-this.padding()*2});N.x+=L.x,N.y+=L.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=L.x,this._anchorDragOffset.y-=L.y,N.height+=this.padding()*2}else if(this._movingAnchorName&&N.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const L=Y.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=L.x,this._anchorDragOffset.y-=L.y,N.height+=this.padding()*2}if(this.boundBoxFunc()){const L=this.boundBoxFunc()(F,N);L?N=L:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const K=1e7,I=new t.Transform;I.translate(F.x,F.y),I.rotate(F.rotation),I.scale(F.width/K,F.height/K);const ie=new t.Transform,A=N.width/K,D=N.height/K;this.flipEnabled()===!1?(ie.translate(N.x,N.y),ie.rotate(N.rotation),ie.translate(N.width<0?N.width:0,N.height<0?N.height:0),ie.scale(Math.abs(A),Math.abs(D))):(ie.translate(N.x,N.y),ie.rotate(N.rotation),ie.scale(A,D));const U=ie.multiply(I.invert());this._nodes.forEach(L=>{var V;const ee=L.getParent().getAbsoluteTransform(),H=L.getTransform().copy();H.translate(L.offsetX(),L.offsetY());const te=new t.Transform;te.multiply(ee.copy().invert()).multiply(U).multiply(ee).multiply(H);const ae=te.decompose();L.setAttrs(ae),(V=L.getLayer())===null||V===void 0||V.batchDraw()}),this.rotation(t.Util._getRotation(N.rotation)),this._nodes.forEach(L=>{this._fire("transform",{evt:P,target:L}),L._fire("transform",{evt:P,target:L})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(N,P){this.findOne(N).setAttrs(P)}update(){var N;const P=this._getNodeRect();this.rotation(t.Util._getRotation(P.rotation));const F=P.width,j=P.height,Y=this.enabledAnchors(),K=this.resizeEnabled(),I=this.padding(),ie=this.anchorSize(),A=this.find("._anchor");A.forEach(U=>{U.setAttrs({width:ie,height:ie,offsetX:ie/2,offsetY:ie/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ie/2+I,offsetY:ie/2+I,visible:K&&Y.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:F/2,y:0,offsetY:ie/2+I,visible:K&&Y.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:F,y:0,offsetX:ie/2-I,offsetY:ie/2+I,visible:K&&Y.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:j/2,offsetX:ie/2+I,visible:K&&Y.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:F,y:j/2,offsetX:ie/2-I,visible:K&&Y.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:j,offsetX:ie/2+I,offsetY:ie/2-I,visible:K&&Y.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:F/2,y:j,offsetY:ie/2-I,visible:K&&Y.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:F,y:j,offsetX:ie/2-I,offsetY:ie/2-I,visible:K&&Y.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:F/2,y:-this.rotateAnchorOffset()*t.Util._sign(j)-I,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:F,height:j,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const D=this.anchorStyleFunc();D&&A.forEach(U=>{D(U)}),(N=this.getLayer())===null||N===void 0||N.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const N=this.findOne("."+this._movingAnchorName);N&&N.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),o.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return a.Node.prototype.toObject.call(this)}clone(N){return a.Node.prototype.clone.call(this,N)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};ls.Transformer=k,k.isTransforming=()=>M>0;function G(R){return R instanceof Array||t.Util.warn("enabledAnchors value should be an array"),R instanceof Array&&R.forEach(function(N){E.indexOf(N)===-1&&t.Util.warn("Unknown anchor name: "+N+". Available names are: "+E.join(", "))}),R||[]}return k.prototype.className="Transformer",(0,h._registerNode)(k),e.Factory.addGetterSetter(k,"enabledAnchors",E,G),e.Factory.addGetterSetter(k,"flipEnabled",!0,(0,u.getBooleanValidator)()),e.Factory.addGetterSetter(k,"resizeEnabled",!0),e.Factory.addGetterSetter(k,"anchorSize",10,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"rotateEnabled",!0),e.Factory.addGetterSetter(k,"rotateLineVisible",!0),e.Factory.addGetterSetter(k,"rotationSnaps",[]),e.Factory.addGetterSetter(k,"rotateAnchorOffset",50,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(k,"rotationSnapTolerance",5,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"borderEnabled",!0),e.Factory.addGetterSetter(k,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(k,"anchorStrokeWidth",1,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"anchorFill","white"),e.Factory.addGetterSetter(k,"anchorCornerRadius",0,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(k,"borderStrokeWidth",1,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"borderDash"),e.Factory.addGetterSetter(k,"keepRatio",!0),e.Factory.addGetterSetter(k,"shiftBehavior","default"),e.Factory.addGetterSetter(k,"centeredScaling",!1),e.Factory.addGetterSetter(k,"ignoreStroke",!1),e.Factory.addGetterSetter(k,"padding",0,(0,u.getNumberValidator)()),e.Factory.addGetterSetter(k,"nodes"),e.Factory.addGetterSetter(k,"node"),e.Factory.addGetterSetter(k,"boundBoxFunc"),e.Factory.addGetterSetter(k,"anchorDragBoundFunc"),e.Factory.addGetterSetter(k,"anchorStyleFunc"),e.Factory.addGetterSetter(k,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(k,"useSingleNodeRotation",!0),e.Factory.backCompat(k,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ls}var cs={},Cm;function bb(){if(Cm)return cs;Cm=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.Wedge=void 0;const t=Le(),e=Tt(),a=we(),r=Ge(),s=we();let o=class extends e.Shape{_sceneFunc(u){u.beginPath(),u.arc(0,0,this.radius(),0,a.Konva.getAngle(this.angle()),this.clockwise()),u.lineTo(0,0),u.closePath(),u.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(u){this.radius(u/2)}setHeight(u){this.radius(u/2)}};return cs.Wedge=o,o.prototype.className="Wedge",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(o),t.Factory.addGetterSetter(o,"radius",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"angle",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(o,"clockwise",!1),t.Factory.backCompat(o,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),cs}var us={},xm;function Sb(){if(xm)return us;xm=1,Object.defineProperty(us,"__esModule",{value:!0}),us.Blur=void 0;const t=Le(),e=ct(),a=Ge();function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function c(h,f){const p=h.data,b=h.width,y=h.height;let g,v,C,E,O,x,_,T,M,k,G,R,N,P,F,j,Y,K,I,ie;const A=f+f+1,D=b-1,U=y-1,L=f+1,V=L*(L+1)/2,ee=new r,H=s[f],te=o[f];let ae=null,J=ee,z=null,Z=null;for(let se=1;se<A;se++)J=J.next=new r,se===L&&(ae=J);J.next=ee,C=v=0;for(let se=0;se<y;se++){R=N=P=F=E=O=x=_=0,T=L*(j=p[v]),M=L*(Y=p[v+1]),k=L*(K=p[v+2]),G=L*(I=p[v+3]),E+=V*j,O+=V*Y,x+=V*K,_+=V*I,J=ee;for(let ue=0;ue<L;ue++)J.r=j,J.g=Y,J.b=K,J.a=I,J=J.next;for(let ue=1;ue<L;ue++)g=v+((D<ue?D:ue)<<2),E+=(J.r=j=p[g])*(ie=L-ue),O+=(J.g=Y=p[g+1])*ie,x+=(J.b=K=p[g+2])*ie,_+=(J.a=I=p[g+3])*ie,R+=j,N+=Y,P+=K,F+=I,J=J.next;z=ee,Z=ae;for(let ue=0;ue<b;ue++)p[v+3]=I=_*H>>te,I!==0?(I=255/I,p[v]=(E*H>>te)*I,p[v+1]=(O*H>>te)*I,p[v+2]=(x*H>>te)*I):p[v]=p[v+1]=p[v+2]=0,E-=T,O-=M,x-=k,_-=G,T-=z.r,M-=z.g,k-=z.b,G-=z.a,g=C+((g=ue+f+1)<D?g:D)<<2,R+=z.r=p[g],N+=z.g=p[g+1],P+=z.b=p[g+2],F+=z.a=p[g+3],E+=R,O+=N,x+=P,_+=F,z=z.next,T+=j=Z.r,M+=Y=Z.g,k+=K=Z.b,G+=I=Z.a,R-=j,N-=Y,P-=K,F-=I,Z=Z.next,v+=4;C+=b}for(let se=0;se<b;se++){N=P=F=R=O=x=_=E=0,v=se<<2,T=L*(j=p[v]),M=L*(Y=p[v+1]),k=L*(K=p[v+2]),G=L*(I=p[v+3]),E+=V*j,O+=V*Y,x+=V*K,_+=V*I,J=ee;for(let me=0;me<L;me++)J.r=j,J.g=Y,J.b=K,J.a=I,J=J.next;let ue=b;for(let me=1;me<=f;me++)v=ue+se<<2,E+=(J.r=j=p[v])*(ie=L-me),O+=(J.g=Y=p[v+1])*ie,x+=(J.b=K=p[v+2])*ie,_+=(J.a=I=p[v+3])*ie,R+=j,N+=Y,P+=K,F+=I,J=J.next,me<U&&(ue+=b);v=se,z=ee,Z=ae;for(let me=0;me<y;me++)g=v<<2,p[g+3]=I=_*H>>te,I>0?(I=255/I,p[g]=(E*H>>te)*I,p[g+1]=(O*H>>te)*I,p[g+2]=(x*H>>te)*I):p[g]=p[g+1]=p[g+2]=0,E-=T,O-=M,x-=k,_-=G,T-=z.r,M-=z.g,k-=z.b,G-=z.a,g=se+((g=me+L)<U?g:U)*b<<2,E+=R+=z.r=p[g],O+=N+=z.g=p[g+1],x+=P+=z.b=p[g+2],_+=F+=z.a=p[g+3],z=z.next,T+=j=Z.r,M+=Y=Z.g,k+=K=Z.b,G+=I=Z.a,R-=j,N-=Y,P-=K,F-=I,Z=Z.next,v+=b}}const u=function(f){const p=Math.round(this.blurRadius());p>0&&c(f,p)};return us.Blur=u,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),us}var ds={},Em;function Cb(){if(Em)return ds;Em=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.Brighten=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=this.brightness()*255,c=s.data,u=c.length;for(let h=0;h<u;h+=4)c[h]+=o,c[h+1]+=o,c[h+2]+=o};return ds.Brighten=r,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),ds}var hs={},Tm;function xb(){if(Tm)return hs;Tm=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.Contrast=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=Math.pow((this.contrast()+100)/100,2),c=s.data,u=c.length;let h=150,f=150,p=150;for(let b=0;b<u;b+=4)h=c[b],f=c[b+1],p=c[b+2],h/=255,h-=.5,h*=o,h+=.5,h*=255,f/=255,f-=.5,f*=o,f+=.5,f*=255,p/=255,p-=.5,p*=o,p+=.5,p*=255,h=h<0?0:h>255?255:h,f=f<0?0:f>255?255:f,p=p<0?0:p>255?255:p,c[b]=h,c[b+1]=f,c[b+2]=p};return hs.Contrast=r,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),hs}var fs={},Rm;function Eb(){if(Rm)return fs;Rm=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.Emboss=void 0;const t=Le(),e=ct(),a=rt(),r=Ge(),s=function(o){const c=this.embossStrength()*10,u=this.embossWhiteLevel()*255,h=this.embossDirection(),f=this.embossBlend(),p=o.data,b=o.width,y=o.height,g=b*4;let v=0,C=0,E=y;switch(h){case"top-left":v=-1,C=-1;break;case"top":v=-1,C=0;break;case"top-right":v=-1,C=1;break;case"right":v=0,C=1;break;case"bottom-right":v=1,C=1;break;case"bottom":v=1,C=0;break;case"bottom-left":v=1,C=-1;break;case"left":v=0,C=-1;break;default:a.Util.error("Unknown emboss direction: "+h)}do{const O=(E-1)*g;let x=v;E+x<1&&(x=0),E+x>y&&(x=0);const _=(E-1+x)*b*4;let T=b;do{const M=O+(T-1)*4;let k=C;T+k<1&&(k=0),T+k>b&&(k=0);const G=_+(T-1+k)*4,R=p[M]-p[G],N=p[M+1]-p[G+1],P=p[M+2]-p[G+2];let F=R;const j=F>0?F:-F,Y=N>0?N:-N,K=P>0?P:-P;if(Y>j&&(F=N),K>j&&(F=P),F*=c,f){const I=p[M]+F,ie=p[M+1]+F,A=p[M+2]+F;p[M]=I>255?255:I<0?0:I,p[M+1]=ie>255?255:ie<0?0:ie,p[M+2]=A>255?255:A<0?0:A}else{let I=u-F;I<0?I=0:I>255&&(I=255),p[M]=p[M+1]=p[M+2]=I}}while(--T)}while(--E)};return fs.Emboss=s,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),fs}var ps={},Mm;function Tb(){if(Mm)return ps;Mm=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.Enhance=void 0;const t=Le(),e=ct(),a=Ge();function r(o,c,u,h,f){const p=u-c,b=f-h;if(p===0)return h+b/2;if(b===0)return h;let y=(o-c)/p;return y=b*y+h,y}const s=function(o){const c=o.data,u=c.length;let h=c[0],f=h,p,b=c[1],y=b,g,v=c[2],C=v,E;const O=this.enhance();if(O===0)return;for(let R=0;R<u;R+=4)p=c[R+0],p<h?h=p:p>f&&(f=p),g=c[R+1],g<b?b=g:g>y&&(y=g),E=c[R+2],E<v?v=E:E>C&&(C=E);f===h&&(f=255,h=0),y===b&&(y=255,b=0),C===v&&(C=255,v=0);let x,_,T,M,k,G;if(O>0)x=f+O*(255-f),_=h-O*(h-0),T=y+O*(255-y),M=b-O*(b-0),k=C+O*(255-C),G=v-O*(v-0);else{const R=(f+h)*.5;x=f+O*(f-R),_=h+O*(h-R);const N=(y+b)*.5;T=y+O*(y-N),M=b+O*(b-N);const P=(C+v)*.5;k=C+O*(C-P),G=v+O*(v-P)}for(let R=0;R<u;R+=4)c[R+0]=r(c[R+0],h,f,_,x),c[R+1]=r(c[R+1],b,y,M,T),c[R+2]=r(c[R+2],v,C,G,k)};return ps.Enhance=s,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),ps}var ms={},Am;function Rb(){if(Am)return ms;Am=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.Grayscale=void 0;const t=function(e){const a=e.data,r=a.length;for(let s=0;s<r;s+=4){const o=.34*a[s]+.5*a[s+1]+.16*a[s+2];a[s]=o,a[s+1]=o,a[s+2]=o}};return ms.Grayscale=t,ms}var gs={},Om;function Mb(){if(Om)return gs;Om=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.HSL=void 0;const t=Le(),e=ct(),a=Ge();t.Factory.addGetterSetter(e.Node,"hue",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter);const r=function(s){const o=s.data,c=o.length,u=1,h=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,p=this.luminance()*127,b=u*h*Math.cos(f*Math.PI/180),y=u*h*Math.sin(f*Math.PI/180),g=.299*u+.701*b+.167*y,v=.587*u-.587*b+.33*y,C=.114*u-.114*b-.497*y,E=.299*u-.299*b-.328*y,O=.587*u+.413*b+.035*y,x=.114*u-.114*b+.293*y,_=.299*u-.3*b+1.25*y,T=.587*u-.586*b-1.05*y,M=.114*u+.886*b-.2*y;let k,G,R,N;for(let P=0;P<c;P+=4)k=o[P+0],G=o[P+1],R=o[P+2],N=o[P+3],o[P+0]=g*k+v*G+C*R+p,o[P+1]=E*k+O*G+x*R+p,o[P+2]=_*k+T*G+M*R+p,o[P+3]=N};return gs.HSL=r,gs}var ys={},Nm;function Ab(){if(Nm)return ys;Nm=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.HSV=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=s.data,c=o.length,u=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),f=Math.abs(this.hue()+360)%360,p=u*h*Math.cos(f*Math.PI/180),b=u*h*Math.sin(f*Math.PI/180),y=.299*u+.701*p+.167*b,g=.587*u-.587*p+.33*b,v=.114*u-.114*p-.497*b,C=.299*u-.299*p-.328*b,E=.587*u+.413*p+.035*b,O=.114*u-.114*p+.293*b,x=.299*u-.3*p+1.25*b,_=.587*u-.586*p-1.05*b,T=.114*u+.886*p-.2*b;for(let M=0;M<c;M+=4){const k=o[M+0],G=o[M+1],R=o[M+2],N=o[M+3];o[M+0]=y*k+g*G+v*R,o[M+1]=C*k+E*G+O*R,o[M+2]=x*k+_*G+T*R,o[M+3]=N}};return ys.HSV=r,t.Factory.addGetterSetter(e.Node,"hue",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),ys}var vs={},Dm;function Ob(){if(Dm)return vs;Dm=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.Invert=void 0;const t=function(e){const a=e.data,r=a.length;for(let s=0;s<r;s+=4)a[s]=255-a[s],a[s+1]=255-a[s+1],a[s+2]=255-a[s+2]};return vs.Invert=t,vs}var _s={},km;function Nb(){if(km)return _s;km=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.Kaleidoscope=void 0;const t=Le(),e=ct(),a=rt(),r=Ge(),s=function(u,h,f){const p=u.data,b=h.data,y=u.width,g=u.height,v=f.polarCenterX||y/2,C=f.polarCenterY||g/2;let E=Math.sqrt(v*v+C*C),O=y-v,x=g-C;const _=Math.sqrt(O*O+x*x);E=_>E?_:E;const T=g,M=y,k=360/M*Math.PI/180;for(let G=0;G<M;G+=1){const R=Math.sin(G*k),N=Math.cos(G*k);for(let P=0;P<T;P+=1){O=Math.floor(v+E*P/T*N),x=Math.floor(C+E*P/T*R);let F=(x*y+O)*4;const j=p[F+0],Y=p[F+1],K=p[F+2],I=p[F+3];F=(G+P*y)*4,b[F+0]=j,b[F+1]=Y,b[F+2]=K,b[F+3]=I}}},o=function(u,h,f){const p=u.data,b=h.data,y=u.width,g=u.height,v=f.polarCenterX||y/2,C=f.polarCenterY||g/2;let E=Math.sqrt(v*v+C*C),O=y-v,x=g-C;const _=Math.sqrt(O*O+x*x);E=_>E?_:E;const T=g,M=y,k=0;let G,R;for(O=0;O<y;O+=1)for(x=0;x<g;x+=1){const N=O-v,P=x-C,F=Math.sqrt(N*N+P*P)*T/E;let j=(Math.atan2(P,N)*180/Math.PI+360+k)%360;j=j*M/360,G=Math.floor(j),R=Math.floor(F);let Y=(R*y+G)*4;const K=p[Y+0],I=p[Y+1],ie=p[Y+2],A=p[Y+3];Y=(x*y+O)*4,b[Y+0]=K,b[Y+1]=I,b[Y+2]=ie,b[Y+3]=A}},c=function(u){const h=u.width,f=u.height;let p,b,y,g,v,C,E,O,x,_,T=Math.round(this.kaleidoscopePower());const M=Math.round(this.kaleidoscopeAngle()),k=Math.floor(h*(M%360)/360);if(T<1)return;const G=a.Util.createCanvasElement();G.width=h,G.height=f;const R=G.getContext("2d").getImageData(0,0,h,f);a.Util.releaseCanvas(G),s(u,R,{polarCenterX:h/2,polarCenterY:f/2});let N=h/Math.pow(2,T);for(;N<=8;)N=N*2,T-=1;N=Math.ceil(N);let P=N,F=0,j=P,Y=1;for(k+N>h&&(F=P,j=0,Y=-1),b=0;b<f;b+=1)for(p=F;p!==j;p+=Y)y=Math.round(p+k)%h,x=(h*b+y)*4,v=R.data[x+0],C=R.data[x+1],E=R.data[x+2],O=R.data[x+3],_=(h*b+p)*4,R.data[_+0]=v,R.data[_+1]=C,R.data[_+2]=E,R.data[_+3]=O;for(b=0;b<f;b+=1)for(P=Math.floor(N),g=0;g<T;g+=1){for(p=0;p<P+1;p+=1)x=(h*b+p)*4,v=R.data[x+0],C=R.data[x+1],E=R.data[x+2],O=R.data[x+3],_=(h*b+P*2-p-1)*4,R.data[_+0]=v,R.data[_+1]=C,R.data[_+2]=E,R.data[_+3]=O;P*=2}o(R,u,{})};return _s.Kaleidoscope=c,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),_s}var bs={},Pm;function Db(){if(Pm)return bs;Pm=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.Mask=void 0;const t=Le(),e=ct(),a=Ge();function r(y,g,v){let C=(v*y.width+g)*4;const E=[];return E.push(y.data[C++],y.data[C++],y.data[C++],y.data[C++]),E}function s(y,g){return Math.sqrt(Math.pow(y[0]-g[0],2)+Math.pow(y[1]-g[1],2)+Math.pow(y[2]-g[2],2))}function o(y){const g=[0,0,0];for(let v=0;v<y.length;v++)g[0]+=y[v][0],g[1]+=y[v][1],g[2]+=y[v][2];return g[0]/=y.length,g[1]/=y.length,g[2]/=y.length,g}function c(y,g){const v=r(y,0,0),C=r(y,y.width-1,0),E=r(y,0,y.height-1),O=r(y,y.width-1,y.height-1),x=g||10;if(s(v,C)<x&&s(C,O)<x&&s(O,E)<x&&s(E,v)<x){const _=o([C,v,O,E]),T=[];for(let M=0;M<y.width*y.height;M++){const k=s(_,[y.data[M*4],y.data[M*4+1],y.data[M*4+2]]);T[M]=k<x?0:255}return T}}function u(y,g){for(let v=0;v<y.width*y.height;v++)y.data[4*v+3]=g[v]}function h(y,g,v){const C=[1,1,1,1,0,1,1,1,1],E=Math.round(Math.sqrt(C.length)),O=Math.floor(E/2),x=[];for(let _=0;_<v;_++)for(let T=0;T<g;T++){const M=_*g+T;let k=0;for(let G=0;G<E;G++)for(let R=0;R<E;R++){const N=_+G-O,P=T+R-O;if(N>=0&&N<v&&P>=0&&P<g){const F=N*g+P,j=C[G*E+R];k+=y[F]*j}}x[M]=k===2040?255:0}return x}function f(y,g,v){const C=[1,1,1,1,1,1,1,1,1],E=Math.round(Math.sqrt(C.length)),O=Math.floor(E/2),x=[];for(let _=0;_<v;_++)for(let T=0;T<g;T++){const M=_*g+T;let k=0;for(let G=0;G<E;G++)for(let R=0;R<E;R++){const N=_+G-O,P=T+R-O;if(N>=0&&N<v&&P>=0&&P<g){const F=N*g+P,j=C[G*E+R];k+=y[F]*j}}x[M]=k>=1020?255:0}return x}function p(y,g,v){const C=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],E=Math.round(Math.sqrt(C.length)),O=Math.floor(E/2),x=[];for(let _=0;_<v;_++)for(let T=0;T<g;T++){const M=_*g+T;let k=0;for(let G=0;G<E;G++)for(let R=0;R<E;R++){const N=_+G-O,P=T+R-O;if(N>=0&&N<v&&P>=0&&P<g){const F=N*g+P,j=C[G*E+R];k+=y[F]*j}}x[M]=k}return x}const b=function(y){const g=this.threshold();let v=c(y,g);return v&&(v=h(v,y.width,y.height),v=f(v,y.width,y.height),v=p(v,y.width,y.height),u(y,v)),y};return bs.Mask=b,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),bs}var Ss={},wm;function kb(){if(wm)return Ss;wm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Noise=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=this.noise()*255,c=s.data,u=c.length,h=o/2;for(let f=0;f<u;f+=4)c[f+0]+=h-2*h*Math.random(),c[f+1]+=h-2*h*Math.random(),c[f+2]+=h-2*h*Math.random()};return Ss.Noise=r,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),Ss}var Cs={},zm;function Pb(){if(zm)return Cs;zm=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.Pixelate=void 0;const t=Le(),e=rt(),a=ct(),r=Ge(),s=function(o){let c=Math.ceil(this.pixelSize()),u=o.width,h=o.height,f=Math.ceil(u/c),p=Math.ceil(h/c),b=o.data;if(c<=0){e.Util.error("pixelSize value can not be <= 0");return}for(let y=0;y<f;y+=1)for(let g=0;g<p;g+=1){let v=0,C=0,E=0,O=0;const x=y*c,_=x+c,T=g*c,M=T+c;let k=0;for(let G=x;G<_;G+=1)if(!(G>=u))for(let R=T;R<M;R+=1){if(R>=h)continue;const N=(u*R+G)*4;v+=b[N+0],C+=b[N+1],E+=b[N+2],O+=b[N+3],k+=1}v=v/k,C=C/k,E=E/k,O=O/k;for(let G=x;G<_;G+=1)if(!(G>=u))for(let R=T;R<M;R+=1){if(R>=h)continue;const N=(u*R+G)*4;b[N+0]=v,b[N+1]=C,b[N+2]=E,b[N+3]=O}}};return Cs.Pixelate=s,t.Factory.addGetterSetter(a.Node,"pixelSize",8,(0,r.getNumberValidator)(),t.Factory.afterSetFilter),Cs}var xs={},Um;function wb(){if(Um)return xs;Um=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.Posterize=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=Math.round(this.levels()*254)+1,c=s.data,u=c.length,h=255/o;for(let f=0;f<u;f+=1)c[f]=Math.floor(c[f]/h)*h};return xs.Posterize=r,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),xs}var Es={},Lm;function zb(){if(Lm)return Es;Lm=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.RGB=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=s.data,c=o.length,u=this.red(),h=this.green(),f=this.blue();for(let p=0;p<c;p+=4){const b=(.34*o[p]+.5*o[p+1]+.16*o[p+2])/255;o[p]=b*u,o[p+1]=b*h,o[p+2]=b*f,o[p+3]=o[p+3]}};return Es.RGB=r,t.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"blue",0,a.RGBComponent,t.Factory.afterSetFilter),Es}var Ts={},Gm;function Ub(){if(Gm)return Ts;Gm=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.RGBA=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=s.data,c=o.length,u=this.red(),h=this.green(),f=this.blue(),p=this.alpha();for(let b=0;b<c;b+=4){const y=1-p;o[b]=u*p+o[b]*y,o[b+1]=h*p+o[b+1]*y,o[b+2]=f*p+o[b+2]*y}};return Ts.RGBA=r,t.Factory.addGetterSetter(e.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),t.Factory.addGetterSetter(e.Node,"blue",0,a.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),Ts}var Rs={},Fm;function Lb(){if(Fm)return Rs;Fm=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Sepia=void 0;const t=function(e){const a=e.data,r=a.length;for(let s=0;s<r;s+=4){const o=a[s+0],c=a[s+1],u=a[s+2];a[s+0]=Math.min(255,o*.393+c*.769+u*.189),a[s+1]=Math.min(255,o*.349+c*.686+u*.168),a[s+2]=Math.min(255,o*.272+c*.534+u*.131)}};return Rs.Sepia=t,Rs}var Ms={},Vm;function Gb(){if(Vm)return Ms;Vm=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.Solarize=void 0;const t=function(e){const a=e.data,r=e.width,s=e.height,o=r*4;let c=s;do{const u=(c-1)*o;let h=r;do{const f=u+(h-1)*4;let p=a[f],b=a[f+1],y=a[f+2];p>127&&(p=255-p),b>127&&(b=255-b),y>127&&(y=255-y),a[f]=p,a[f+1]=b,a[f+2]=y}while(--h)}while(--c)};return Ms.Solarize=t,Ms}var As={},Bm;function Fb(){if(Bm)return As;Bm=1,Object.defineProperty(As,"__esModule",{value:!0}),As.Threshold=void 0;const t=Le(),e=ct(),a=Ge(),r=function(s){const o=this.threshold()*255,c=s.data,u=c.length;for(let h=0;h<u;h+=1)c[h]=c[h]<o?0:255};return As.Threshold=r,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,a.getNumberValidator)(),t.Factory.afterSetFilter),As}var jm;function Vb(){if(jm)return jr;jm=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Konva=void 0;const t=Md(),e=ob(),a=cb(),r=ub(),s=db(),o=hb(),c=fb(),u=by(),h=sh(),f=Sy(),p=pb(),b=mb(),y=gb(),g=yb(),v=Cy(),C=vb(),E=_b(),O=bb(),x=Sb(),_=Cb(),T=xb(),M=Eb(),k=Tb(),G=Rb(),R=Mb(),N=Ab(),P=Ob(),F=Nb(),j=Db(),Y=kb(),K=Pb(),I=wb(),ie=zb(),A=Ub(),D=Lb(),U=Gb(),L=Fb();return jr.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:a.Arrow,Circle:r.Circle,Ellipse:s.Ellipse,Image:o.Image,Label:c.Label,Tag:c.Tag,Line:u.Line,Path:h.Path,Rect:f.Rect,RegularPolygon:p.RegularPolygon,Ring:b.Ring,Sprite:y.Sprite,Star:g.Star,Text:v.Text,TextPath:C.TextPath,Transformer:E.Transformer,Wedge:O.Wedge,Filters:{Blur:x.Blur,Brighten:_.Brighten,Contrast:T.Contrast,Emboss:M.Emboss,Enhance:k.Enhance,Grayscale:G.Grayscale,HSL:R.HSL,HSV:N.HSV,Invert:P.Invert,Kaleidoscope:F.Kaleidoscope,Mask:j.Mask,Noise:Y.Noise,Pixelate:K.Pixelate,Posterize:I.Posterize,RGB:ie.RGB,RGBA:A.RGBA,Sepia:D.Sepia,Solarize:U.Solarize,Threshold:L.Threshold}}),jr}var Bb=pl.exports,Im;function jb(){if(Im)return pl.exports;Im=1,Object.defineProperty(Bb,"__esModule",{value:!0});const t=Vb();return pl.exports=t.Konva,pl.exports}jb();var tl={exports:{}},Hm;function Ib(){return Hm||(Hm=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var a=Md();Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return a.Konva}});const r=Md();t.exports=r.Konva}(tl,tl.exports)),tl.exports}var Hb=Ib();const El=Hd(Hb);var Wu={exports:{}},Ju={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function qb(){return qm||(qm=1,function(t){t.exports=function(e){function a(n,i,l,d){return new u2(n,i,l,d)}function r(){}function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function c(n){if(o(n)!==n)throw Error(s(188))}function u(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,d=i;;){var m=l.return;if(m===null)break;var S=m.alternate;if(S===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===S.child){for(S=m.child;S;){if(S===l)return c(m),n;if(S===d)return c(m),i;S=S.sibling}throw Error(s(188))}if(l.return!==d.return)l=m,d=S;else{for(var w=!1,B=m.child;B;){if(B===l){w=!0,l=m,d=S;break}if(B===d){w=!0,d=m,l=S;break}B=B.sibling}if(!w){for(B=S.child;B;){if(B===l){w=!0,l=S,d=m;break}if(B===d){w=!0,d=S,l=m;break}B=B.sibling}if(!w)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function h(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=h(n),i!==null)return i;n=n.sibling}return null}function f(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(n.tag!==4&&(i=f(n),i!==null))return i;n=n.sibling}return null}function p(n){return n===null||typeof n!="object"?null:(n=vp&&n[vp]||n["@@iterator"],typeof n=="function"?n:null)}function b(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===g2?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case va:return"Fragment";case Zc:return"Profiler";case gp:return"StrictMode";case Wc:return"Suspense";case Jc:return"SuspenseList";case eu:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case ya:return"Portal";case gi:return(n.displayName||"Context")+".Provider";case yp:return(n._context.displayName||"Context")+".Consumer";case Qc:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $c:return i=n.displayName||null,i!==null?i:b(n.type)||"Memo";case yi:i=n._payload,n=n._init;try{return b(n(i))}catch{}}return null}function y(n){return{current:n}}function g(n){0>Sa||(n.current=ru[Sa],ru[Sa]=null,Sa--)}function v(n,i){Sa++,ru[Sa]=n.current,n.current=i}function C(n){return n>>>=0,n===0?32:31-(Pv(n)/wv|0)|0}function E(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function O(n,i,l){var d=n.pendingLanes;if(d===0)return 0;var m=0,S=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var B=d&134217727;return B!==0?(d=B&~S,d!==0?m=E(d):(w&=B,w!==0?m=E(w):l||(l=B&~n,l!==0&&(m=E(l))))):(B=d&~S,B!==0?m=E(B):w!==0?m=E(w):l||(l=d&~n,l!==0&&(m=E(l)))),m===0?0:i!==0&&i!==m&&(i&S)===0&&(S=m&-m,l=i&-i,S>=l||S===32&&(l&4194048)!==0)?i:m}function x(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function _(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T(){var n=Ro;return Ro<<=1,(Ro&4194048)===0&&(Ro=256),n}function M(){var n=Mo;return Mo<<=1,(Mo&62914560)===0&&(Mo=4194304),n}function k(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function G(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function R(n,i,l,d,m,S){var w=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var B=n.entanglements,W=n.expirationTimes,re=n.hiddenUpdates;for(l=w&~l;0<l;){var ce=31-nn(l),he=1<<ce;B[ce]=0,W[ce]=-1;var fe=re[ce];if(fe!==null)for(re[ce]=null,ce=0;ce<fe.length;ce++){var Ne=fe[ce];Ne!==null&&(Ne.lane&=-536870913)}l&=~he}d!==0&&N(n,d,0),S!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=S&~(w&~i))}function N(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var d=31-nn(i);n.entangledLanes|=i,n.entanglements[d]=n.entanglements[d]|1073741824|l&4194090}function P(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var d=31-nn(l),m=1<<d;m&i|n[d]&i&&(n[d]|=i),l&=~m}}function F(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function j(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Y(n){if(typeof Fv=="function"&&Vv(n),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ar,n)}catch{}}function K(n){if(lu===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);lu=i&&i[1]||"",Ip=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lu+n+Ip}function I(n,i){if(!n||cu)return"";cu=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(Ne){var fe=Ne}Reflect.construct(n,[],he)}else{try{he.call()}catch(Ne){fe=Ne}n.call(he.prototype)}}else{try{throw Error()}catch(Ne){fe=Ne}(he=n())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(Ne){if(Ne&&fe&&typeof Ne.stack=="string")return[Ne.stack,fe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=d.DetermineComponentFrameRoot(),w=S[0],B=S[1];if(w&&B){var W=w.split(`
`),re=B.split(`
`);for(m=d=0;d<W.length&&!W[d].includes("DetermineComponentFrameRoot");)d++;for(;m<re.length&&!re[m].includes("DetermineComponentFrameRoot");)m++;if(d===W.length||m===re.length)for(d=W.length-1,m=re.length-1;1<=d&&0<=m&&W[d]!==re[m];)m--;for(;1<=d&&0<=m;d--,m--)if(W[d]!==re[m]){if(d!==1||m!==1)do if(d--,m--,0>m||W[d]!==re[m]){var ce=`
`+W[d].replace(" at new "," at ");return n.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",n.displayName)),ce}while(1<=d&&0<=m);break}}}finally{cu=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?K(l):""}function ie(n){switch(n.tag){case 26:case 27:case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return I(n.type,!1);case 11:return I(n.type.render,!1);case 1:return I(n.type,!0);case 31:return K("Activity");default:return""}}function A(n){try{var i="";do i+=ie(n),n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function D(n,i){if(typeof n=="object"&&n!==null){var l=Hp.get(n);return l!==void 0?l:(i={value:n,source:i,stack:A(i)},Hp.set(n,i),i)}return{value:n,source:i,stack:A(i)}}function U(n,i){xa[Ea++]=No,xa[Ea++]=Oo,Oo=n,No=i}function L(n,i,l){hn[fn++]=qn,hn[fn++]=Yn,hn[fn++]=Ii,Ii=n;var d=qn;n=Yn;var m=32-nn(d)-1;d&=~(1<<m),l+=1;var S=32-nn(i)+m;if(30<S){var w=m-m%5;S=(d&(1<<w)-1).toString(32),d>>=w,m-=w,qn=1<<32-nn(i)+m|l<<m|d,Yn=S+n}else qn=1<<S|l<<m|d,Yn=n}function V(n){n.return!==null&&(U(n,1),L(n,1,0))}function ee(n){for(;n===Oo;)Oo=xa[--Ea],xa[Ea]=null,No=xa[--Ea],xa[Ea]=null;for(;n===Ii;)Ii=hn[--fn],hn[fn]=null,Yn=hn[--fn],hn[fn]=null,qn=hn[--fn],hn[fn]=null}function H(n,i){v(_i,i),v(Or,n),v(Nt,null),n=_2(i),g(Nt),v(Nt,n)}function te(){g(Nt),g(Or),g(_i)}function ae(n){n.memoizedState!==null&&v(Do,n);var i=Nt.current,l=b2(i,n.type);i!==l&&(v(Or,n),v(Nt,l))}function J(n){Or.current===n&&(g(Nt),g(Or)),Do.current===n&&(g(Do),In?ji._currentValue=_a:ji._currentValue2=_a)}function z(n){var i=Error(s(418,""));throw Me(D(i,n)),uu}function Z(n,i){if(!dn)throw Error(s(175));yv(n.stateNode,n.type,n.memoizedProps,i,n)||z(n)}function se(n){for(Ft=n.return;Ft;)switch(Ft.tag){case 5:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Ft=Ft.return}}function ue(n){if(!dn||n!==Ft)return!1;if(!Ye)return se(n),Ye=!0,!1;var i=n.tag;if(gt?i!==3&&i!==27&&(i!==5||Dp(n.type)&&!To(n.type,n.memoizedProps))&&yt&&z(n):i!==3&&(i!==5||Dp(n.type)&&!To(n.type,n.memoizedProps))&&yt&&z(n),se(n),i===13){if(!dn)throw Error(s(316));if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));yt=bv(n)}else yt=gt&&i===27?cv(n.type,yt):Ft?Np(n.stateNode):null;return!0}function me(){dn&&(yt=Ft=null,Ye=!1)}function Se(){var n=Hi;return n!==null&&(qt===null?qt=n:qt.push.apply(qt,n),Hi=null),n}function Me(n){Hi===null?Hi=[n]:Hi.push(n)}function He(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}function Ce(n,i,l){In?(v(ko,i._currentValue),i._currentValue=l):(v(ko,i._currentValue2),i._currentValue2=l)}function Qe(n){var i=ko.current;In?n._currentValue=i:n._currentValue2=i,g(ko)}function qe(n,i,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===l)break;n=n.return}}function Je(n,i,l,d){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var S=m.dependencies;if(S!==null){var w=m.child;S=S.firstContext;e:for(;S!==null;){var B=S;S=m;for(var W=0;W<i.length;W++)if(B.context===i[W]){S.lanes|=l,B=S.alternate,B!==null&&(B.lanes|=l),qe(S.return,l,n),d||(w=null);break e}S=B.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=l,S=w.alternate,S!==null&&(S.lanes|=l),qe(w,l,n),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===n){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function un(n,i,l,d){n=null;for(var m=i,S=!1;m!==null;){if(!S){if((m.flags&524288)!==0)S=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var B=m.type;rn(m.pendingProps.value,w.value)||(n!==null?n.push(B):n=[B])}}else if(m===Do.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(ji):n=[ji])}m=m.return}n!==null&&Je(i,n,l,d),i.flags|=262144}function Rt(n){for(n=n.firstContext;n!==null;){var i=n.context;if(!rn(In?i._currentValue:i._currentValue2,n.memoizedValue))return!0;n=n.next}return!1}function Zt(n){qi=n,Kn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Oe(n){return Qt(qi,n)}function kt(n,i){return qi===null&&Zt(n),Qt(n,i)}function Qt(n,i){var l=In?i._currentValue:i._currentValue2;if(i={context:i,memoizedValue:l,next:null},Kn===null){if(n===null)throw Error(s(308));Kn=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Kn=Kn.next=i;return l}function _n(){return{controller:new Bv,data:new Map,refCount:0}}function ut(n){n.refCount--,n.refCount===0&&jv(Iv,function(){n.controller.abort()})}function mt(n){n!==Ta&&n.next===null&&(Ta===null?Po=Ta=n:Ta=Ta.next=n),wo=!0,du||(du=!0,da())}function bt(n,i){if(!hu&&wo){hu=!0;do for(var l=!1,d=Po;d!==null;){if(n!==0){var m=d.pendingLanes;if(m===0)var S=0;else{var w=d.suspendedLanes,B=d.pingedLanes;S=(1<<31-nn(42|n)+1)-1,S&=m&~(w&~B),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(l=!0,ur(d,S))}else S=Ve,S=O(d,d===We?S:0,d.cancelPendingCommit!==null||d.timeoutHandle!==Bi),(S&3)===0||x(d,S)||(l=!0,ur(d,S));d=d.next}while(l);hu=!1}}function Wt(){Mt()}function Mt(){wo=du=!1;var n=0;Ra!==0&&(O2()&&(n=Ra),Ra=0);for(var i=Cn(),l=null,d=Po;d!==null;){var m=d.next,S=At(d,i);S===0?(d.next=null,l===null?Po=m:l.next=m,m===null&&(Ta=l)):(l=d,(n!==0||(S&3)!==0)&&(wo=!0)),d=m}bt(n)}function At(n,i){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,S=n.pendingLanes&-62914561;0<S;){var w=31-nn(S),B=1<<w,W=m[w];W===-1?((B&l)===0||(B&d)!==0)&&(m[w]=_(B,i)):W<=i&&(n.expiredLanes|=B),S&=~B}if(i=We,l=Ve,l=O(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==Bi),d=n.callbackNode,l===0||n===i&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&su(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||x(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(d!==null&&su(d),j(l)){case 2:case 8:l=Lv;break;case 32:l=ou;break;case 268435456:l=Gv;break;default:l=ou}return d=oi.bind(null,n),l=Ao(l,d),n.callbackPriority=i,n.callbackNode=l,i}return d!==null&&d!==null&&su(d),n.callbackPriority=2,n.callbackNode=null,2}function oi(n,i){if(Dt!==0&&Dt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Er()&&n.callbackNode!==l)return null;var d=Ve;return d=O(n,n===We?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==Bi),d===0?null:(Yf(n,d,i),At(n,Cn()),n.callbackNode!=null&&n.callbackNode===l?oi.bind(null,n):null)}function ur(n,i){if(Er())return null;Yf(n,i,!0)}function da(){z2?U2(function(){(Fe&6)!==0?Ao(jp,Wt):Mt()}):Ao(jp,Wt)}function dr(){return Ra===0&&(Ra=T()),Ra}function Xl(n,i){if(Nr===null){var l=Nr=[];fu=0,Ma=dr(),Aa={status:"pending",value:void 0,then:function(d){l.push(d)}}}return fu++,i.then(dh,dh),i}function dh(){if(--fu===0&&Nr!==null){Aa!==null&&(Aa.status="fulfilled");var n=Nr;Nr=null,Ma=0,Aa=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Hy(n,i){var l=[],d={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return n.then(function(){d.status="fulfilled",d.value=i;for(var m=0;m<l.length;m++)(0,l[m])(i)},function(m){for(d.status="rejected",d.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),d}function Zl(){var n=Yi.current;return n!==null?n:We.pooledCache}function eo(n,i){i===null?v(Yi,Yi.current):v(Yi,i.pool)}function hh(){var n=Zl();return n===null?null:{parent:In?it._currentValue:it._currentValue2,pool:n}}function to(n,i){if(rn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!Hv.call(i,m)||!rn(n[m],i[m]))return!1}return!0}function fh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function no(){}function ph(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(no,no),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,gh(n),n;default:if(typeof i.status=="string")i.then(no,no);else{if(n=We,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(d){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=d}},function(d){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,gh(n),n}throw Oa=i,Dr}}function mh(){if(Oa===null)throw Error(s(459));var n=Oa;return Oa=null,n}function gh(n){if(n===Dr||n===zo)throw Error(s(483))}function io(){for(var n=Na,i=mu=Na=0;i<n;){var l=pn[i];pn[i++]=null;var d=pn[i];pn[i++]=null;var m=pn[i];pn[i++]=null;var S=pn[i];if(pn[i++]=null,d!==null&&m!==null){var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}S!==0&&yh(l,m,S)}}function ao(n,i,l,d){pn[Na++]=n,pn[Na++]=i,pn[Na++]=l,pn[Na++]=d,mu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Ql(n,i,l,d){return ao(n,i,l,d),ro(n)}function ha(n,i){return ao(n,null,null,i),ro(n)}function yh(n,i,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var m=!1,S=n.return;S!==null;)S.childLanes|=l,d=S.alternate,d!==null&&(d.childLanes|=l),S.tag===22&&(n=S.stateNode,n===null||n._visibility&1||(m=!0)),n=S,S=S.return;return n.tag===3?(S=n.stateNode,m&&i!==null&&(m=31-nn(l),n=S.hiddenUpdates,d=n[m],d===null?n[m]=[i]:d.push(i),i.lane=l|536870912),S):null}function ro(n){if(50<Lr)throw Lr=0,Ru=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}function Wl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jl(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ci(n,i,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Fe&2)!==0){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,i=ro(n),yh(n,null,l),i}return ao(n,d,i,l),ro(n)}function hr(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,P(n,l)}}function $l(n,i){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};S===null?m=S=w:S=S.next=w,l=l.next}while(l!==null);S===null?m=S=i:S=S.next=i}else m=S=i;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:S,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function fr(){if(gu){var n=Aa;if(n!==null)throw n}}function pr(n,i,l,d){gu=!1;var m=n.updateQueue;bi=!1;var S=m.firstBaseUpdate,w=m.lastBaseUpdate,B=m.shared.pending;if(B!==null){m.shared.pending=null;var W=B,re=W.next;W.next=null,w===null?S=re:w.next=re,w=W;var ce=n.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==w&&(B===null?ce.firstBaseUpdate=re:B.next=re,ce.lastBaseUpdate=W))}if(S!==null){var he=m.baseState;w=0,ce=re=W=null,B=S;do{var fe=B.lane&-536870913,Ne=fe!==B.lane;if(Ne?(Ve&fe)===fe:(d&fe)===fe){fe!==0&&fe===Ma&&(gu=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var yn=n,Gr=B;fe=i;var Zi=l;switch(Gr.tag){case 1:if(yn=Gr.payload,typeof yn=="function"){he=yn.call(Zi,he,fe);break e}he=yn;break e;case 3:yn.flags=yn.flags&-65537|128;case 0:if(yn=Gr.payload,fe=typeof yn=="function"?yn.call(Zi,he,fe):yn,fe==null)break e;he=Xc({},he,fe);break e;case 2:bi=!0}}fe=B.callback,fe!==null&&(n.flags|=64,Ne&&(n.flags|=8192),Ne=m.callbacks,Ne===null?m.callbacks=[fe]:Ne.push(fe))}else Ne={lane:fe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(re=ce=Ne,W=he):ce=ce.next=Ne,w|=fe;if(B=B.next,B===null){if(B=m.shared.pending,B===null)break;Ne=B,B=Ne.next,Ne.next=null,m.lastBaseUpdate=Ne,m.shared.pending=null}}while(!0);ce===null&&(W=he),m.baseState=W,m.firstBaseUpdate=re,m.lastBaseUpdate=ce,S===null&&(m.shared.lanes=0),xi|=w,n.lanes=w,n.memoizedState=he}}function vh(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function _h(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)vh(l[n],i)}function bh(n,i){n=Zn,v(Lo,n),v(Da,i),Zn=n|i.baseLanes}function ec(){v(Lo,Zn),v(Da,Da.current)}function tc(){Zn=Lo.current,g(Da),g(Lo)}function st(){throw Error(s(321))}function nc(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!rn(n[l],i[l]))return!1;return!0}function ic(n,i,l,d,m,S){return Si=S,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,xe.H=n===null||n.memoizedState===null?Yp:Kp,Ki=!1,S=l(d,m),Ki=!1,ka&&(S=Ch(i,l,d,m)),Sh(n),S}function Sh(n){xe.H=Vo;var i=Ze!==null&&Ze.next!==null;if(Si=0,ht=Ze=ke=null,Go=!1,kr=0,Pa=null,i)throw Error(s(300));n===null||Ct||(n=n.dependencies,n!==null&&Rt(n)&&(Ct=!0))}function Ch(n,i,l,d){ke=n;var m=0;do{if(ka&&(Pa=null),kr=0,ka=!1,25<=m)throw Error(s(301));if(m+=1,ht=Ze=null,n.updateQueue!=null){var S=n.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}xe.H=Yv,S=i(l,d)}while(ka);return S}function qy(){var n=xe.H,i=n.useState()[0];return i=typeof i.then=="function"?mr(i):i,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(ke.flags|=1024),i}function ac(){var n=Fo!==0;return Fo=0,n}function rc(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function sc(n){if(Go){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Go=!1}Si=0,ht=Ze=ke=null,ka=!1,kr=Fo=0,Pa=null}function jt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?ke.memoizedState=ht=n:ht=ht.next=n,ht}function dt(){if(Ze===null){var n=ke.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var i=ht===null?ke.memoizedState:ht.next;if(i!==null)ht=i,Ze=n;else{if(n===null)throw ke.alternate===null?Error(s(467)):Error(s(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},ht===null?ke.memoizedState=ht=n:ht=ht.next=n}return ht}function oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mr(n){var i=kr;return kr+=1,Pa===null&&(Pa=[]),n=ph(Pa,n,i),i=ke,(ht===null?i.memoizedState:ht.next)===null&&(i=i.alternate,xe.H=i===null||i.memoizedState===null?Yp:Kp),n}function so(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return mr(n);if(n.$$typeof===gi)return Oe(n)}throw Error(s(438,String(n)))}function lc(n){var i=null,l=ke.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=ke.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=oc(),ke.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),d=0;d<n;d++)l[d]=m2;return i.index++,l}function Fn(n,i){return typeof i=="function"?i(n):i}function oo(n){var i=dt();return cc(i,Ze,n)}function cc(n,i,l){var d=n.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var m=n.baseQueue,S=d.pending;if(S!==null){if(m!==null){var w=m.next;m.next=S.next,S.next=w}i.baseQueue=m=S,d.pending=null}if(S=n.baseState,m===null)n.memoizedState=S;else{i=m.next;var B=w=null,W=null,re=i,ce=!1;do{var he=re.lane&-536870913;if(he!==re.lane?(Ve&he)===he:(Si&he)===he){var fe=re.revertLane;if(fe===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),he===Ma&&(ce=!0);else if((Si&fe)===fe){re=re.next,fe===Ma&&(ce=!0);continue}else he={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},W===null?(B=W=he,w=S):W=W.next=he,ke.lanes|=fe,xi|=fe;he=re.action,Ki&&l(S,he),S=re.hasEagerState?re.eagerState:l(S,he)}else fe={lane:he,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},W===null?(B=W=fe,w=S):W=W.next=fe,ke.lanes|=he,xi|=he;re=re.next}while(re!==null&&re!==i);if(W===null?w=S:W.next=B,!rn(S,n.memoizedState)&&(Ct=!0,ce&&(l=Aa,l!==null)))throw l;n.memoizedState=S,n.baseState=w,n.baseQueue=W,d.lastRenderedState=S}return m===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function uc(n){var i=dt(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,S=i.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do S=n(S,w.action),w=w.next;while(w!==m);rn(S,i.memoizedState)||(Ct=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),l.lastRenderedState=S}return[S,d]}function xh(n,i,l){var d=ke,m=dt(),S=Ye;if(S){if(l===void 0)throw Error(s(407));l=l()}else l=i();var w=!rn((Ze||m).memoizedState,l);w&&(m.memoizedState=l,Ct=!0),m=m.queue;var B=Rh.bind(null,d,m,n);if(gr(2048,8,B,[n]),m.getSnapshot!==i||w||ht!==null&&ht.memoizedState.tag&1){if(d.flags|=2048,fa(9,lo(),Th.bind(null,d,m,l,i),null),We===null)throw Error(s(349));S||(Si&124)!==0||Eh(d,i,l)}return l}function Eh(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=ke.updateQueue,i===null?(i=oc(),ke.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Th(n,i,l,d){i.value=l,i.getSnapshot=d,Mh(i)&&Ah(n)}function Rh(n,i,l){return l(function(){Mh(i)&&Ah(n)})}function Mh(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!rn(n,l)}catch{return!0}}function Ah(n){var i=ha(n,2);i!==null&&en(i,n,2)}function dc(n){var i=jt();if(typeof n=="function"){var l=n;if(n=l(),Ki){Y(!0);try{l()}finally{Y(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:n},i}function Oh(n,i,l,d){return n.baseState=l,cc(n,Ze,typeof d=="function"?d:Fn)}function Yy(n,i,l,d,m){if(uo(n))throw Error(s(485));if(n=i.action,n!==null){var S={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){S.listeners.push(w)}};xe.T!==null?l(!0):S.isTransition=!1,d(S),l=i.pending,l===null?(S.next=i.pending=S,Nh(i,S)):(S.next=l.next,i.pending=l.next=S)}}function Nh(n,i){var l=i.action,d=i.payload,m=n.state;if(i.isTransition){var S=xe.T,w={};xe.T=w;try{var B=l(m,d),W=xe.S;W!==null&&W(w,B),Dh(n,i,B)}catch(re){hc(n,i,re)}finally{xe.T=S}}else try{S=l(m,d),Dh(n,i,S)}catch(re){hc(n,i,re)}}function Dh(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){kh(n,i,d)},function(d){return hc(n,i,d)}):kh(n,i,l)}function kh(n,i,l){i.status="fulfilled",i.value=l,Ph(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,Nh(n,l)))}function hc(n,i,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,Ph(i),i=i.next;while(i!==d)}n.action=null}function Ph(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function wh(n,i){return i}function zh(n,i){if(Ye){var l=We.formState;if(l!==null){e:{var d=ke;if(Ye){if(yt){var m=ov(yt,Dn);if(m){yt=Np(m),d=lv(m);break e}}z(d)}d=!1}d&&(i=l[0])}}l=jt(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wh,lastRenderedState:i},l.queue=d,l=$h.bind(null,ke,d),d.dispatch=l,d=dc(!1);var S=gc.bind(null,ke,!1,d.queue);return d=jt(),m={state:i,dispatch:null,action:n,pending:null},d.queue=m,l=Yy.bind(null,ke,m,S,l),m.dispatch=l,d.memoizedState=n,[i,l,!1]}function Uh(n){var i=dt();return Lh(i,Ze,n)}function Lh(n,i,l){if(i=cc(n,i,wh)[0],n=oo(Fn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=mr(i)}catch(w){throw w===Dr?zo:w}else d=i;i=dt();var m=i.queue,S=m.dispatch;return l!==i.memoizedState&&(ke.flags|=2048,fa(9,lo(),Ky.bind(null,m,l),null)),[d,S,n]}function Ky(n,i){n.action=i}function Gh(n){var i=dt(),l=Ze;if(l!==null)return Lh(i,l,n);dt(),i=i.memoizedState,l=dt();var d=l.queue.dispatch;return l.memoizedState=n,[i,d,!1]}function fa(n,i,l,d){return n={tag:n,create:l,deps:d,inst:i,next:null},i=ke.updateQueue,i===null&&(i=oc(),ke.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,i.lastEffect=n),n}function lo(){return{destroy:void 0,resource:void 0}}function Fh(){return dt().memoizedState}function co(n,i,l,d){var m=jt();d=d===void 0?null:d,ke.flags|=n,m.memoizedState=fa(1|i,lo(),l,d)}function gr(n,i,l,d){var m=dt();d=d===void 0?null:d;var S=m.memoizedState.inst;Ze!==null&&d!==null&&nc(d,Ze.memoizedState.deps)?m.memoizedState=fa(i,S,l,d):(ke.flags|=n,m.memoizedState=fa(1|i,S,l,d))}function Vh(n,i){co(8390656,8,n,i)}function Bh(n,i){gr(2048,8,n,i)}function jh(n,i){return gr(4,2,n,i)}function Ih(n,i){return gr(4,4,n,i)}function Hh(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function qh(n,i,l){l=l!=null?l.concat([n]):null,gr(4,4,Hh.bind(null,i,n),l)}function fc(){}function Yh(n,i){var l=dt();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&nc(i,d[1])?d[0]:(l.memoizedState=[n,i],n)}function Kh(n,i){var l=dt();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&nc(i,d[1]))return d[0];if(d=n(),Ki){Y(!0);try{n()}finally{Y(!1)}}return l.memoizedState=[d,i],d}function pc(n,i,l){return l===void 0||(Si&1073741824)!==0?n.memoizedState=i:(n.memoizedState=l,n=qf(),ke.lanes|=n,xi|=n,l)}function Xh(n,i,l,d){return rn(l,i)?l:Da.current!==null?(n=pc(n,l,d),rn(n,i)||(Ct=!0),n):(Si&42)===0?(Ct=!0,n.memoizedState=l):(n=qf(),ke.lanes|=n,xi|=n,i)}function Zh(n,i,l,d,m){var S=Hn();St(S!==0&&8>S?S:8);var w=xe.T,B={};xe.T=B,gc(n,!1,i,l);try{var W=m(),re=xe.S;if(re!==null&&re(B,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ce=Hy(W,d);yr(n,i,ce,$t(n))}else yr(n,i,d,$t(n))}catch(he){yr(n,i,{then:function(){},status:"rejected",reason:he},$t())}finally{St(S),xe.T=w}}function Qh(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_a,baseState:_a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:_a},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function mc(){return Oe(ji)}function Wh(){return dt().memoizedState}function Jh(){return dt().memoizedState}function Xy(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=$t();n=li(l);var d=ci(i,n,l);d!==null&&(en(d,i,l),hr(d,i,l)),i={cache:_n()},n.payload=i;return}i=i.return}}function Zy(n,i,l){var d=$t();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},uo(n)?ef(i,l):(l=Ql(n,i,l,d),l!==null&&(en(l,n,d),tf(l,i,d)))}function $h(n,i,l){var d=$t();yr(n,i,l,d)}function yr(n,i,l,d){var m={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(uo(n))ef(i,m);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var w=i.lastRenderedState,B=S(w,l);if(m.hasEagerState=!0,m.eagerState=B,rn(B,w))return ao(n,i,m,0),We===null&&io(),!1}catch{}finally{}if(l=Ql(n,i,m,d),l!==null)return en(l,n,d),tf(l,i,d),!0}return!1}function gc(n,i,l,d){if(d={lane:2,revertLane:dr(),action:d,hasEagerState:!1,eagerState:null,next:null},uo(n)){if(i)throw Error(s(479))}else i=Ql(n,l,d,2),i!==null&&en(i,n,2)}function uo(n){var i=n.alternate;return n===ke||i!==null&&i===ke}function ef(n,i){ka=Go=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function tf(n,i,l){if((l&4194048)!==0){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,P(n,l)}}function ho(n){var i=Pr;return Pr+=1,wa===null&&(wa=[]),ph(wa,n,i)}function vr(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function fo(n,i){throw i.$$typeof===f2?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function nf(n){var i=n._init;return i(n._payload)}function af(n){function i(Q,X){if(n){var $=Q.deletions;$===null?(Q.deletions=[X],Q.flags|=16):$.push(X)}}function l(Q,X){if(!n)return null;for(;X!==null;)i(Q,X),X=X.sibling;return null}function d(Q){for(var X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function m(Q,X){return Q=jn(Q,X),Q.index=0,Q.sibling=null,Q}function S(Q,X,$){return Q.index=$,n?($=Q.alternate,$!==null?($=$.index,$<X?(Q.flags|=67108866,X):$):(Q.flags|=67108866,X)):(Q.flags|=1048576,X)}function w(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function B(Q,X,$,le){return X===null||X.tag!==6?(X=qc($,Q.mode,le),X.return=Q,X):(X=m(X,$),X.return=Q,X)}function W(Q,X,$,le){var be=$.type;return be===va?ce(Q,X,$.props.children,le,$.key):X!==null&&(X.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===yi&&nf(be)===X.type)?(X=m(X,$.props),vr(X,$),X.return=Q,X):(X=Co($.type,$.key,$.props,null,Q.mode,le),vr(X,$),X.return=Q,X)}function re(Q,X,$,le){return X===null||X.tag!==4||X.stateNode.containerInfo!==$.containerInfo||X.stateNode.implementation!==$.implementation?(X=Yc($,Q.mode,le),X.return=Q,X):(X=m(X,$.children||[]),X.return=Q,X)}function ce(Q,X,$,le,be){return X===null||X.tag!==7?(X=Vi($,Q.mode,le,be),X.return=Q,X):(X=m(X,$),X.return=Q,X)}function he(Q,X,$){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=qc(""+X,Q.mode,$),X.return=Q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case xo:return $=Co(X.type,X.key,X.props,null,Q.mode,$),vr($,X),$.return=Q,$;case ya:return X=Yc(X,Q.mode,$),X.return=Q,X;case yi:var le=X._init;return X=le(X._payload),he(Q,X,$)}if(Eo(X)||p(X))return X=Vi(X,Q.mode,$,null),X.return=Q,X;if(typeof X.then=="function")return he(Q,ho(X),$);if(X.$$typeof===gi)return he(Q,kt(Q,X),$);fo(Q,X)}return null}function fe(Q,X,$,le){var be=X!==null?X.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return be!==null?null:B(Q,X,""+$,le);if(typeof $=="object"&&$!==null){switch($.$$typeof){case xo:return $.key===be?W(Q,X,$,le):null;case ya:return $.key===be?re(Q,X,$,le):null;case yi:return be=$._init,$=be($._payload),fe(Q,X,$,le)}if(Eo($)||p($))return be!==null?null:ce(Q,X,$,le,null);if(typeof $.then=="function")return fe(Q,X,ho($),le);if($.$$typeof===gi)return fe(Q,X,kt(Q,$),le);fo(Q,$)}return null}function Ne(Q,X,$,le,be){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Q=Q.get($)||null,B(X,Q,""+le,be);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case xo:return Q=Q.get(le.key===null?$:le.key)||null,W(X,Q,le,be);case ya:return Q=Q.get(le.key===null?$:le.key)||null,re(X,Q,le,be);case yi:var $e=le._init;return le=$e(le._payload),Ne(Q,X,$,le,be)}if(Eo(le)||p(le))return Q=Q.get($)||null,ce(X,Q,le,be,null);if(typeof le.then=="function")return Ne(Q,X,$,ho(le),be);if(le.$$typeof===gi)return Ne(Q,X,$,kt(X,le),be);fo(X,le)}return null}function yn(Q,X,$,le){for(var be=null,$e=null,Re=X,je=X=0,Et=null;Re!==null&&je<$.length;je++){Re.index>je?(Et=Re,Re=null):Et=Re.sibling;var Ie=fe(Q,Re,$[je],le);if(Ie===null){Re===null&&(Re=Et);break}n&&Re&&Ie.alternate===null&&i(Q,Re),X=S(Ie,X,je),$e===null?be=Ie:$e.sibling=Ie,$e=Ie,Re=Et}if(je===$.length)return l(Q,Re),Ye&&U(Q,je),be;if(Re===null){for(;je<$.length;je++)Re=he(Q,$[je],le),Re!==null&&(X=S(Re,X,je),$e===null?be=Re:$e.sibling=Re,$e=Re);return Ye&&U(Q,je),be}for(Re=d(Re);je<$.length;je++)Et=Ne(Re,Q,je,$[je],le),Et!==null&&(n&&Et.alternate!==null&&Re.delete(Et.key===null?je:Et.key),X=S(Et,X,je),$e===null?be=Et:$e.sibling=Et,$e=Et);return n&&Re.forEach(function(Ri){return i(Q,Ri)}),Ye&&U(Q,je),be}function Gr(Q,X,$,le){if($==null)throw Error(s(151));for(var be=null,$e=null,Re=X,je=X=0,Et=null,Ie=$.next();Re!==null&&!Ie.done;je++,Ie=$.next()){Re.index>je?(Et=Re,Re=null):Et=Re.sibling;var Ri=fe(Q,Re,Ie.value,le);if(Ri===null){Re===null&&(Re=Et);break}n&&Re&&Ri.alternate===null&&i(Q,Re),X=S(Ri,X,je),$e===null?be=Ri:$e.sibling=Ri,$e=Ri,Re=Et}if(Ie.done)return l(Q,Re),Ye&&U(Q,je),be;if(Re===null){for(;!Ie.done;je++,Ie=$.next())Ie=he(Q,Ie.value,le),Ie!==null&&(X=S(Ie,X,je),$e===null?be=Ie:$e.sibling=Ie,$e=Ie);return Ye&&U(Q,je),be}for(Re=d(Re);!Ie.done;je++,Ie=$.next())Ie=Ne(Re,Q,je,Ie.value,le),Ie!==null&&(n&&Ie.alternate!==null&&Re.delete(Ie.key===null?je:Ie.key),X=S(Ie,X,je),$e===null?be=Ie:$e.sibling=Ie,$e=Ie);return n&&Re.forEach(function(Zv){return i(Q,Zv)}),Ye&&U(Q,je),be}function Zi(Q,X,$,le){if(typeof $=="object"&&$!==null&&$.type===va&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case xo:e:{for(var be=$.key;X!==null;){if(X.key===be){if(be=$.type,be===va){if(X.tag===7){l(Q,X.sibling),le=m(X,$.props.children),le.return=Q,Q=le;break e}}else if(X.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===yi&&nf(be)===X.type){l(Q,X.sibling),le=m(X,$.props),vr(le,$),le.return=Q,Q=le;break e}l(Q,X);break}else i(Q,X);X=X.sibling}$.type===va?(le=Vi($.props.children,Q.mode,le,$.key),le.return=Q,Q=le):(le=Co($.type,$.key,$.props,null,Q.mode,le),vr(le,$),le.return=Q,Q=le)}return w(Q);case ya:e:{for(be=$.key;X!==null;){if(X.key===be)if(X.tag===4&&X.stateNode.containerInfo===$.containerInfo&&X.stateNode.implementation===$.implementation){l(Q,X.sibling),le=m(X,$.children||[]),le.return=Q,Q=le;break e}else{l(Q,X);break}else i(Q,X);X=X.sibling}le=Yc($,Q.mode,le),le.return=Q,Q=le}return w(Q);case yi:return be=$._init,$=be($._payload),Zi(Q,X,$,le)}if(Eo($))return yn(Q,X,$,le);if(p($)){if(be=p($),typeof be!="function")throw Error(s(150));return $=be.call($),Gr(Q,X,$,le)}if(typeof $.then=="function")return Zi(Q,X,ho($),le);if($.$$typeof===gi)return Zi(Q,X,kt(Q,$),le);fo(Q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,X!==null&&X.tag===6?(l(Q,X.sibling),le=m(X,$),le.return=Q,Q=le):(l(Q,X),le=qc($,Q.mode,le),le.return=Q,Q=le),w(Q)):l(Q,X)}return function(Q,X,$,le){try{Pr=0;var be=Zi(Q,X,$,le);return wa=null,be}catch(Re){if(Re===Dr||Re===zo)throw Re;var $e=a(29,Re,null,Q.mode);return $e.lanes=le,$e.return=Q,$e}finally{}}}function ui(n){var i=n.alternate;v(vt,vt.current&1),v(mn,n),kn===null&&(i===null||Da.current!==null||i.memoizedState!==null)&&(kn=n)}function rf(n){if(n.tag===22){if(v(vt,vt.current),v(mn,n),kn===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(kn=n)}}else di()}function di(){v(vt,vt.current),v(mn,mn.current)}function Vn(n){g(mn),kn===n&&(kn=null),g(vt)}function po(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||nu(l)||iu(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function yc(n,i,l,d){i=n.memoizedState,l=l(d,i),l=l==null?i:Xc({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}function sf(n,i,l,d,m,S,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,S,w):i.prototype&&i.prototype.isPureReactComponent?!to(l,d)||!to(m,S):!0}function of(n,i,l,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==n&&yu.enqueueReplaceState(i,i.state,null)}function Li(n,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(n=n.defaultProps){l===i&&(l=Xc({},l));for(var m in n)l[m]===void 0&&(l[m]=n[m])}return l}function mo(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function lf(n,i,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function vc(n,i,l){return l=li(l),l.tag=3,l.payload={element:null},l.callback=function(){mo(n,i)},l}function cf(n){return n=li(n),n.tag=3,n}function uf(n,i,l,d){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var S=d.value;n.payload=function(){return m(S)},n.callback=function(){lf(i,l,d)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){lf(i,l,d),typeof m!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var B=d.stack;this.componentDidCatch(d.value,{componentStack:B!==null?B:""})})}function Qy(n,i,l,d,m){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&un(i,l,m,!0),l=mn.current,l!==null){switch(l.tag){case 13:return kn===null?Bc():l.alternate===null&&at===0&&(at=3),l.flags&=-257,l.flags|=65536,l.lanes=m,d===Uo?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),Ic(n,d,m)),!1;case 22:return l.flags|=65536,d===Uo?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),Ic(n,d,m)),!1}throw Error(s(435,l.tag))}return Ic(n,d,m),Bc(),!1}if(Ye)return i=mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,d!==uu&&(n=Error(s(422),{cause:d}),Me(D(n,l)))):(d!==uu&&(i=Error(s(423),{cause:d}),Me(D(i,l))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,d=D(d,l),m=vc(n.stateNode,d,m),$l(n,m),at!==4&&(at=2)),!1;var S=Error(s(520),{cause:d});if(S=D(S,l),zr===null?zr=[S]:zr.push(S),at!==4&&(at=2),i===null)return!0;d=D(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=m&-m,l.lanes|=n,n=vc(l.stateNode,d,n),$l(l,n),!1;case 1:if(i=l.type,S=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ei===null||!Ei.has(S))))return l.flags|=65536,m&=-m,l.lanes|=m,m=cf(m),uf(m,n,l,d),$l(l,m),!1}l=l.return}while(l!==null);return!1}function Ot(n,i,l,d){i.child=n===null?Xp(i,null,l,d):za(i,n.child,l,d)}function df(n,i,l,d,m){l=l.render;var S=i.ref;if("ref"in d){var w={};for(var B in d)B!=="ref"&&(w[B]=d[B])}else w=d;return Zt(i),d=ic(n,i,l,w,S,m),B=ac(),n!==null&&!Ct?(rc(n,i,m),Bn(n,i,m)):(Ye&&B&&V(i),i.flags|=1,Ot(n,i,d,m),i.child)}function hf(n,i,l,d,m){if(n===null){var S=l.type;return typeof S=="function"&&!Hc(S)&&S.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=S,ff(n,i,S,d,m)):(n=Co(l.type,null,d,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(S=n.child,!Tc(n,m)){var w=S.memoizedProps;if(l=l.compare,l=l!==null?l:to,l(w,d)&&n.ref===i.ref)return Bn(n,i,m)}return i.flags|=1,n=jn(S,d),n.ref=i.ref,n.return=i,i.child=n}function ff(n,i,l,d,m){if(n!==null){var S=n.memoizedProps;if(to(S,d)&&n.ref===i.ref)if(Ct=!1,i.pendingProps=d=S,Tc(n,m))(n.flags&131072)!==0&&(Ct=!0);else return i.lanes=n.lanes,Bn(n,i,m)}return _c(n,i,l,d,m)}function pf(n,i,l){var d=i.pendingProps,m=d.children,S=n!==null?n.memoizedState:null;if(d.mode==="hidden"){if((i.flags&128)!==0){if(d=S!==null?S.baseLanes|l:l,n!==null){for(m=i.child=n.child,S=0;m!==null;)S=S|m.lanes|m.childLanes,m=m.sibling;i.childLanes=S&~d}else i.childLanes=0,i.child=null;return mf(n,i,d,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&eo(i,S!==null?S.cachePool:null),S!==null?bh(i,S):ec(),rf(i);else return i.lanes=i.childLanes=536870912,mf(n,i,S!==null?S.baseLanes|l:l,l)}else S!==null?(eo(i,S.cachePool),bh(i,S),di(),i.memoizedState=null):(n!==null&&eo(i,null),ec(),di());return Ot(n,i,m,l),i.child}function mf(n,i,l,d){var m=Zl();return m=m===null?null:{parent:In?it._currentValue:it._currentValue2,pool:m},i.memoizedState={baseLanes:l,cachePool:m},n!==null&&eo(i,null),ec(),rf(i),n!==null&&un(n,i,d,!0),null}function go(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function _c(n,i,l,d,m){return Zt(i),l=ic(n,i,l,d,void 0,m),d=ac(),n!==null&&!Ct?(rc(n,i,m),Bn(n,i,m)):(Ye&&d&&V(i),i.flags|=1,Ot(n,i,l,m),i.child)}function gf(n,i,l,d,m,S){return Zt(i),i.updateQueue=null,l=Ch(i,d,l,m),Sh(n),d=ac(),n!==null&&!Ct?(rc(n,i,S),Bn(n,i,S)):(Ye&&d&&V(i),i.flags|=1,Ot(n,i,l,S),i.child)}function yf(n,i,l,d,m){if(Zt(i),i.stateNode===null){var S=Ca,w=l.contextType;typeof w=="object"&&w!==null&&(S=Oe(w)),S=new l(d,S),i.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=yu,i.stateNode=S,S._reactInternals=i,S=i.stateNode,S.props=d,S.state=i.memoizedState,S.refs={},Wl(i),w=l.contextType,S.context=typeof w=="object"&&w!==null?Oe(w):Ca,S.state=i.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(yc(i,l,w,d),S.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(w=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),w!==S.state&&yu.enqueueReplaceState(S,S.state,null),pr(i,d,S,m),fr(),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(n===null){S=i.stateNode;var B=i.memoizedProps,W=Li(l,B);S.props=W;var re=S.context,ce=l.contextType;w=Ca,typeof ce=="object"&&ce!==null&&(w=Oe(ce));var he=l.getDerivedStateFromProps;ce=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function",B=i.pendingProps!==B,ce||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(B||re!==w)&&of(i,S,d,w),bi=!1;var fe=i.memoizedState;S.state=fe,pr(i,d,S,m),fr(),re=i.memoizedState,B||fe!==re||bi?(typeof he=="function"&&(yc(i,l,he,d),re=i.memoizedState),(W=bi||sf(i,l,W,d,fe,re,w))?(ce||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=re),S.props=d,S.state=re,S.context=w,d=W):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{S=i.stateNode,Jl(n,i),w=i.memoizedProps,ce=Li(l,w),S.props=ce,he=i.pendingProps,fe=S.context,re=l.contextType,W=Ca,typeof re=="object"&&re!==null&&(W=Oe(re)),B=l.getDerivedStateFromProps,(re=typeof B=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(w!==he||fe!==W)&&of(i,S,d,W),bi=!1,fe=i.memoizedState,S.state=fe,pr(i,d,S,m),fr();var Ne=i.memoizedState;w!==he||fe!==Ne||bi||n!==null&&n.dependencies!==null&&Rt(n.dependencies)?(typeof B=="function"&&(yc(i,l,B,d),Ne=i.memoizedState),(ce=bi||sf(i,l,ce,d,fe,Ne,W)||n!==null&&n.dependencies!==null&&Rt(n.dependencies))?(re||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,Ne,W),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,Ne,W)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Ne),S.props=d,S.state=Ne,S.context=W,d=ce):(typeof S.componentDidUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&fe===n.memoizedState||(i.flags|=1024),d=!1)}return S=d,go(n,i),d=(i.flags&128)!==0,S||d?(S=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:S.render(),i.flags|=1,n!==null&&d?(i.child=za(i,n.child,null,m),i.child=za(i,null,l,m)):Ot(n,i,l,m),i.memoizedState=S.state,n=i.child):n=Bn(n,i,m),n}function vf(n,i,l,d){return me(),i.flags|=256,Ot(n,i,l,d),i.child}function bc(n){return{baseLanes:n,cachePool:hh()}}function Sc(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=gn),n}function _f(n,i,l){var d=i.pendingProps,m=!1,S=(i.flags&128)!==0,w;if((w=S)||(w=n!==null&&n.memoizedState===null?!1:(vt.current&2)!==0),w&&(m=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ye){if(m?ui(i):di(),Ye){var B=yt,W;(W=B)&&(B=gv(B,Dn),B!==null?(i.memoizedState={dehydrated:B,treeContext:Ii!==null?{id:qn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},W=a(18,null,null,0),W.stateNode=B,W.return=i,i.child=W,Ft=i,yt=null,W=!0):W=!1),W||z(i)}if(B=i.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return iu(B)?i.lanes=32:i.lanes=536870912,null;Vn(i)}return B=d.children,d=d.fallback,m?(di(),m=i.mode,B=yo({mode:"hidden",children:B},m),d=Vi(d,m,l,null),B.return=i,d.return=i,B.sibling=d,i.child=B,m=i.child,m.memoizedState=bc(l),m.childLanes=Sc(n,w,l),i.memoizedState=vu,d):(ui(i),Cc(i,B))}if(W=n.memoizedState,W!==null&&(B=W.dehydrated,B!==null)){if(S)i.flags&256?(ui(i),i.flags&=-257,i=xc(n,i,l)):i.memoizedState!==null?(di(),i.child=n.child,i.flags|=128,i=null):(di(),m=d.fallback,B=i.mode,d=yo({mode:"visible",children:d.children},B),m=Vi(m,B,l,null),m.flags|=2,d.return=i,m.return=i,d.sibling=m,i.child=d,za(i,n.child,null,l),d=i.child,d.memoizedState=bc(l),d.childLanes=Sc(n,w,l),i.memoizedState=vu,i=m);else if(ui(i),iu(B))w=rv(B).digest,d=Error(s(419)),d.stack="",d.digest=w,Me({value:d,source:null,stack:null}),i=xc(n,i,l);else if(Ct||un(n,i,l,!1),w=(l&n.childLanes)!==0,Ct||w){if(w=We,w!==null&&(d=l&-l,d=(d&42)!==0?1:F(d),d=(d&(w.suspendedLanes|l))!==0?0:d,d!==0&&d!==W.retryLane))throw W.retryLane=d,ha(n,d),en(w,n,d),Qp;nu(B)||Bc(),i=xc(n,i,l)}else nu(B)?(i.flags|=192,i.child=n.child,i=null):(n=W.treeContext,dn&&(yt=hv(B),Ft=i,Ye=!0,Hi=null,Dn=!1,n!==null&&(hn[fn++]=qn,hn[fn++]=Yn,hn[fn++]=Ii,qn=n.id,Yn=n.overflow,Ii=i)),i=Cc(i,d.children),i.flags|=4096);return i}return m?(di(),m=d.fallback,B=i.mode,W=n.child,S=W.sibling,d=jn(W,{mode:"hidden",children:d.children}),d.subtreeFlags=W.subtreeFlags&65011712,S!==null?m=jn(S,m):(m=Vi(m,B,l,null),m.flags|=2),m.return=i,d.return=i,d.sibling=m,i.child=d,d=m,m=i.child,B=n.child.memoizedState,B===null?B=bc(l):(W=B.cachePool,W!==null?(S=In?it._currentValue:it._currentValue2,W=W.parent!==S?{parent:S,pool:S}:W):W=hh(),B={baseLanes:B.baseLanes|l,cachePool:W}),m.memoizedState=B,m.childLanes=Sc(n,w,l),i.memoizedState=vu,d):(ui(i),l=n.child,n=l.sibling,l=jn(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=l,i.memoizedState=null,l)}function Cc(n,i){return i=yo({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function yo(n,i){return n=a(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function xc(n,i,l){return za(i,n.child,null,l),n=Cc(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function bf(n,i,l){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),qe(n.return,i,l)}function Ec(n,i,l,d,m){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=m)}function Sf(n,i,l){var d=i.pendingProps,m=d.revealOrder,S=d.tail;if(Ot(n,i,d.children,l),d=vt.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bf(n,l,i);else if(n.tag===19)bf(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}switch(v(vt,d),m){case"forwards":for(l=i.child,m=null;l!==null;)n=l.alternate,n!==null&&po(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),Ec(i,!1,m,l,S);break;case"backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&po(n)===null){i.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}Ec(i,!0,l,null,S);break;case"together":Ec(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Bn(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),xi|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(un(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=jn(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=jn(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Tc(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Rt(n)))}function Wy(n,i,l){switch(i.tag){case 3:H(i,i.stateNode.containerInfo),Ce(i,it,n.memoizedState.cache),me();break;case 27:case 5:ae(i);break;case 4:H(i,i.stateNode.containerInfo);break;case 10:Ce(i,i.type,i.memoizedProps.value);break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(ui(i),i.flags|=128,null):(l&i.child.childLanes)!==0?_f(n,i,l):(ui(i),n=Bn(n,i,l),n!==null?n.sibling:null);ui(i);break;case 19:var m=(n.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(un(n,i,l,!1),d=(l&i.childLanes)!==0),m){if(d)return Sf(n,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),v(vt,vt.current),d)break;return null;case 22:case 23:return i.lanes=0,pf(n,i,l);case 24:Ce(i,it,n.memoizedState.cache)}return Bn(n,i,l)}function Cf(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ct=!0;else{if(!Tc(n,l)&&(i.flags&128)===0)return Ct=!1,Wy(n,i,l);Ct=(n.flags&131072)!==0}else Ct=!1,Ye&&(i.flags&1048576)!==0&&L(i,No,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var d=i.elementType,m=d._init;if(d=m(d._payload),i.type=d,typeof d=="function")Hc(d)?(n=Li(d,n),i.tag=1,i=yf(null,i,d,n,l)):(i.tag=0,i=_c(null,i,d,n,l));else{if(d!=null){if(m=d.$$typeof,m===Qc){i.tag=11,i=df(null,i,d,n,l);break e}else if(m===$c){i.tag=14,i=hf(null,i,d,n,l);break e}}throw i=b(d)||d,Error(s(306,i,""))}}return i;case 0:return _c(n,i,i.type,i.pendingProps,l);case 1:return d=i.type,m=Li(d,i.pendingProps),yf(n,i,d,m,l);case 3:e:{if(H(i,i.stateNode.containerInfo),n===null)throw Error(s(387));var S=i.pendingProps;m=i.memoizedState,d=m.element,Jl(n,i),pr(i,S,null,l);var w=i.memoizedState;if(S=w.cache,Ce(i,it,S),S!==m.cache&&Je(i,[it],l,!0),fr(),S=w.element,dn&&m.isDehydrated)if(m={element:S,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=vf(n,i,S,l);break e}else if(S!==d){d=D(Error(s(424)),i),Me(d),i=vf(n,i,S,l);break e}else for(dn&&(yt=dv(i.stateNode.containerInfo),Ft=i,Ye=!0,Hi=null,Dn=!0),l=Xp(i,null,S,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(me(),S===d){i=Bn(n,i,l);break e}Ot(n,i,S,l)}i=i.child}return i;case 26:if(Sn)return go(n,i),n===null?(l=Pp(i.type,null,i.pendingProps,null))?i.memoizedState=l:Ye||(i.stateNode=Av(i.type,i.pendingProps,_i.current,i)):i.memoizedState=Pp(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:if(gt)return ae(i),n===null&&gt&&Ye&&(d=i.stateNode=Fp(i.type,i.pendingProps,_i.current,Nt.current,!1),Ft=i,Dn=!0,yt=fv(i.type,d,yt)),Ot(n,i,i.pendingProps.children,l),go(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ye&&(Tv(i.type,i.pendingProps,Nt.current),(m=d=yt)&&(d=pv(d,i.type,i.pendingProps,Dn),d!==null?(i.stateNode=d,Ft=i,yt=uv(d),Dn=!1,m=!0):m=!1),m||z(i)),ae(i),m=i.type,S=i.pendingProps,w=n!==null?n.memoizedProps:null,d=S.children,To(m,S)?d=null:w!==null&&To(m,w)&&(i.flags|=32),i.memoizedState!==null&&(m=ic(n,i,qy,null,null,l),In?ji._currentValue=m:ji._currentValue2=m),go(n,i),Ot(n,i,d,l),i.child;case 6:return n===null&&Ye&&(Rv(i.pendingProps,Nt.current),(n=l=yt)&&(l=mv(l,i.pendingProps,Dn),l!==null?(i.stateNode=l,Ft=i,yt=null,n=!0):n=!1),n||z(i)),null;case 13:return _f(n,i,l);case 4:return H(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=za(i,null,d,l):Ot(n,i,d,l),i.child;case 11:return df(n,i,i.type,i.pendingProps,l);case 7:return Ot(n,i,i.pendingProps,l),i.child;case 8:return Ot(n,i,i.pendingProps.children,l),i.child;case 12:return Ot(n,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,Ce(i,i.type,d.value),Ot(n,i,d.children,l),i.child;case 9:return m=i.type._context,d=i.pendingProps.children,Zt(i),m=Oe(m),d=d(m),i.flags|=1,Ot(n,i,d,l),i.child;case 14:return hf(n,i,i.type,i.pendingProps,l);case 15:return ff(n,i,i.type,i.pendingProps,l);case 19:return Sf(n,i,l);case 31:return d=i.pendingProps,l=i.mode,d={mode:d.mode,children:d.children},n===null?(l=yo(d,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=jn(n.child,d),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return pf(n,i,l);case 24:return Zt(i),d=Oe(it),n===null?(m=Zl(),m===null&&(m=We,S=_n(),m.pooledCache=S,S.refCount++,S!==null&&(m.pooledCacheLanes|=l),m=S),i.memoizedState={parent:d,cache:m},Wl(i),Ce(i,it,m)):((n.lanes&l)!==0&&(Jl(n,i),pr(i,null,null,l),fr()),m=n.memoizedState,S=i.memoizedState,m.parent!==d?(m={parent:d,cache:d},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Ce(i,it,d)):(d=S.cache,Ce(i,it,d),d!==m.cache&&Je(i,[it],l,!0))),Ot(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Jt(n){n.flags|=4}function xf(n,i){if(n!==null&&n.child===i.child)return!1;if((i.flags&16)!==0)return!0;for(n=i.child;n!==null;){if((n.flags&13878)!==0||(n.subtreeFlags&13878)!==0)return!0;n=n.sibling}return!1}function Rc(n,i,l,d){if(Pt)for(l=i.child;l!==null;){if(l.tag===5||l.tag===6)tu(n,l.stateNode);else if(!(l.tag===4||gt&&l.tag===27)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}else if(vi)for(var m=i.child;m!==null;){if(m.tag===5){var S=m.stateNode;l&&d&&(S=Ap(S,m.type,m.memoizedProps)),tu(n,S)}else if(m.tag===6)S=m.stateNode,l&&d&&(S=Op(S,m.memoizedProps)),tu(n,S);else if(m.tag!==4){if(m.tag===22&&m.memoizedState!==null)S=m.child,S!==null&&(S.return=m),Rc(n,m,!0,!0);else if(m.child!==null){m.child.return=m,m=m.child;continue}}if(m===i)break;for(;m.sibling===null;){if(m.return===null||m.return===i)return;m=m.return}m.sibling.return=m.return,m=m.sibling}}function Ef(n,i,l,d){var m=!1;if(vi)for(var S=i.child;S!==null;){if(S.tag===5){var w=S.stateNode;l&&d&&(w=Ap(w,S.type,S.memoizedProps)),Rp(n,w)}else if(S.tag===6)w=S.stateNode,l&&d&&(w=Op(w,S.memoizedProps)),Rp(n,w);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)m=S.child,m!==null&&(m.return=S),Ef(n,S,!0,!0),m=!0;else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===i)break;for(;S.sibling===null;){if(S.return===null||S.return===i)return m;S=S.return}S.sibling.return=S.return,S=S.sibling}return m}function Tf(n,i){if(vi&&xf(n,i)){n=i.stateNode;var l=n.containerInfo,d=Tp();Ef(d,i,!1,!1),n.pendingChildren=d,Jt(i),av(l,d)}}function Mc(n,i,l,d){if(Pt)n.memoizedProps!==d&&Jt(i);else if(vi){var m=n.stateNode,S=n.memoizedProps;if((n=xf(n,i))||S!==d){var w=Nt.current;S=iv(m,l,S,d,!n,null),S===m?i.stateNode=m:(bp(S,l,d,w)&&Jt(i),i.stateNode=S,n?Rc(S,i,!1,!1):Jt(i))}else i.stateNode=m}}function Ac(n,i,l){if(D2(i,l)){if(n.flags|=16777216,!Cp(i,l))if(Qf())n.flags|=8192;else throw Oa=Uo,pu}else n.flags&=-16777217}function Rf(n,i){if(Nv(i)){if(n.flags|=16777216,!Gp(i))if(Qf())n.flags|=8192;else throw Oa=Uo,pu}else n.flags&=-16777217}function vo(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?M():536870912,n.lanes|=i,Ga|=i)}function _r(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function tt(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(i)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,i}function Jy(n,i,l){var d=i.pendingProps;switch(ee(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(i),null;case 1:return tt(i),null;case 3:return l=i.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Qe(it),te(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(ue(i)?Jt(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Se())),Tf(n,i),tt(i),null;case 26:if(Sn){l=i.type;var m=i.memoizedState;return n===null?(Jt(i),m!==null?(tt(i),Rf(i,m)):(tt(i),Ac(i,l,d))):m?m!==n.memoizedState?(Jt(i),tt(i),Rf(i,m)):(tt(i),i.flags&=-16777217):(Pt?n.memoizedProps!==d&&Jt(i):Mc(n,i,l,d),tt(i),Ac(i,l,d)),null}case 27:if(gt){if(J(i),l=_i.current,m=i.type,n!==null&&i.stateNode!=null)Pt?n.memoizedProps!==d&&Jt(i):Mc(n,i,m,d);else{if(!d){if(i.stateNode===null)throw Error(s(166));return tt(i),null}n=Nt.current,ue(i)?Z(i,n):(n=Fp(m,d,l,n,!0),i.stateNode=n,Jt(i))}return tt(i),null}case 5:if(J(i),l=i.type,n!==null&&i.stateNode!=null)Mc(n,i,l,d);else{if(!d){if(i.stateNode===null)throw Error(s(166));return tt(i),null}n=Nt.current,ue(i)?Z(i,n):(m=x2(l,d,_i.current,n,i),Rc(m,i,!1,!1),i.stateNode=m,bp(m,l,d,n)&&Jt(i))}return tt(i),Ac(i,i.type,i.pendingProps),null;case 6:if(n&&i.stateNode!=null)l=n.memoizedProps,Pt?l!==d&&Jt(i):vi&&(l!==d?(i.stateNode=Sp(d,_i.current,Nt.current,i),Jt(i)):i.stateNode=n.stateNode);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(n=_i.current,l=Nt.current,ue(i)){if(!dn)throw Error(s(176));if(n=i.stateNode,l=i.memoizedProps,d=null,m=Ft,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}vv(n,l,i,d)||z(i)}else i.stateNode=Sp(d,n,l,i)}return tt(i),null;case 13:if(d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=ue(i),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(!dn)throw Error(s(344));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));_v(m,i)}else me(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;tt(i),m=!1}else m=Se(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Vn(i),i):(Vn(i),null)}if(Vn(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=d!==null,n=n!==null&&n.memoizedState!==null,l){d=i.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var S=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(S=d.memoizedState.cachePool.pool),S!==m&&(d.flags|=2048)}return l!==n&&l&&(i.child.flags|=8192),vo(i,i.updateQueue),tt(i),null;case 4:return te(),Tf(n,i),n===null&&M2(i.stateNode.containerInfo),tt(i),null;case 10:return Qe(i.type),tt(i),null;case 19:if(g(vt),m=i.memoizedState,m===null)return tt(i),null;if(d=(i.flags&128)!==0,S=m.rendering,S===null)if(d)_r(m,!1);else{if(at!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(S=po(n),S!==null){for(i.flags|=128,_r(m,!1),n=S.updateQueue,i.updateQueue=n,vo(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)up(l,n),l=l.sibling;return v(vt,vt.current&1|2),i.child}n=n.sibling}m.tail!==null&&Cn()>Ur&&(i.flags|=128,d=!0,_r(m,!1),i.lanes=4194304)}else{if(!d)if(n=po(S),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,vo(i,n),_r(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!Ye)return tt(i),null}else 2*Cn()-m.renderingStartTime>Ur&&l!==536870912&&(i.flags|=128,d=!0,_r(m,!1),i.lanes=4194304);m.isBackwards?(S.sibling=i.child,i.child=S):(n=m.last,n!==null?n.sibling=S:i.child=S,m.last=S)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Cn(),i.sibling=null,n=vt.current,v(vt,d?n&1|2:n&1),i):(tt(i),null);case 22:case 23:return Vn(i),tc(),d=i.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(tt(i),i.subtreeFlags&6&&(i.flags|=8192)):tt(i),l=i.updateQueue,l!==null&&vo(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),n!==null&&g(Yi),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Qe(it),tt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function $y(n,i){switch(ee(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Qe(it),te(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return J(i),null;case 13:if(Vn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));me()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return g(vt),null;case 4:return te(),null;case 10:return Qe(i.type),null;case 22:case 23:return Vn(i),tc(),n!==null&&g(Yi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Qe(it),null;case 25:return null;default:return null}}function Mf(n,i){switch(ee(i),i.tag){case 3:Qe(it),te();break;case 26:case 27:case 5:J(i);break;case 4:te();break;case 13:Vn(i);break;case 19:g(vt);break;case 10:Qe(i.type);break;case 22:case 23:Vn(i),tc(),n!==null&&g(Yi);break;case 24:Qe(it)}}function br(n,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&n)===n){d=void 0;var S=l.create,w=l.inst;d=S(),w.destroy=d}l=l.next}while(l!==m)}}catch(B){Ke(i,i.return,B)}}function hi(n,i,l){try{var d=i.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var S=m.next;d=S;do{if((d.tag&n)===n){var w=d.inst,B=w.destroy;if(B!==void 0){w.destroy=void 0,m=i;var W=l,re=B;try{re()}catch(ce){Ke(m,W,ce)}}}d=d.next}while(d!==S)}}catch(ce){Ke(i,i.return,ce)}}function Af(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{_h(i,l)}catch(d){Ke(n,n.return,d)}}}function Of(n,i,l){l.props=Li(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){Ke(n,i,d)}}function Sr(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=Tr(n.stateNode);break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(m){Ke(n,i,m)}}function On(n,i){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(m){Ke(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ke(n,i,m)}else l.current=null}function Nf(n){var i=n.type,l=n.memoizedProps,d=n.stateNode;try{Y2(d,i,l,n)}catch(m){Ke(n,n.return,m)}}function Oc(n,i,l){try{K2(n.stateNode,n.type,l,i,n)}catch(d){Ke(n,n.return,d)}}function Df(n){return n.tag===5||n.tag===3||(Sn?n.tag===26:!1)||(gt?n.tag===27&&ba(n.type):!1)||n.tag===4}function Nc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Df(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(gt&&n.tag===27&&ba(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Dc(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?Z2(l,n,i):H2(l,n);else if(d!==4&&(gt&&d===27&&ba(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(Dc(n,i,l),n=n.sibling;n!==null;)Dc(n,i,l),n=n.sibling}function _o(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?X2(l,n,i):I2(l,n);else if(d!==4&&(gt&&d===27&&ba(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(_o(n,i,l),n=n.sibling;n!==null;)_o(n,i,l),n=n.sibling}function kf(n,i,l){n=n.containerInfo;try{Mp(n,l)}catch(d){Ke(i,i.return,d)}}function Pf(n){var i=n.stateNode,l=n.memoizedProps;try{kv(n.type,l,i,n)}catch(d){Ke(n,n.return,d)}}function e2(n,i){for(S2(n.containerInfo),xt=i;xt!==null;)if(n=xt,i=n.child,(n.subtreeFlags&1024)!==0&&i!==null)i.return=n,xt=i;else for(;xt!==null;){n=xt;var l=n.alternate;switch(i=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&l!==null){i=void 0;var d=n,m=l.memoizedProps;l=l.memoizedState;var S=d.stateNode;try{var w=Li(d.type,m,d.elementType===d.type);i=S.getSnapshotBeforeUpdate(w,l),S.__reactInternalSnapshotBeforeUpdate=i}catch(B){Ke(d,d.return,B)}}break;case 3:(i&1024)!==0&&Pt&&nv(n.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=n.sibling,i!==null){i.return=n.return,xt=i;break}xt=n.return}}function wf(n,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:fi(n,l),d&4&&br(5,l);break;case 1:if(fi(n,l),d&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(w){Ke(l,l.return,w)}else{var m=Li(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Ke(l,l.return,w)}}d&64&&Af(l),d&512&&Sr(l,l.return);break;case 3:if(fi(n,l),d&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=Tr(l.child.stateNode);break;case 1:i=l.child.stateNode}try{_h(n,i)}catch(w){Ke(l,l.return,w)}}break;case 27:gt&&i===null&&d&4&&Pf(l);case 26:case 5:fi(n,l),i===null&&d&4&&Nf(l),d&512&&Sr(l,l.return);break;case 12:fi(n,l);break;case 13:fi(n,l),d&4&&Uf(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=o2.bind(null,l),sv(n,l))));break;case 22:if(d=l.memoizedState!==null||Xn,!d){i=i!==null&&i.memoizedState!==null||ot,m=Xn;var S=ot;Xn=d,(ot=i)&&!S?pi(n,l,(l.subtreeFlags&8772)!==0):fi(n,l),Xn=m,ot=S}break;case 30:break;default:fi(n,l)}}function zf(n){var i=n.alternate;i!==null&&(n.alternate=null,zf(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&N2(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bn(n,i,l){for(l=l.child;l!==null;)kc(n,i,l),l=l.sibling}function kc(n,i,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ar,l)}catch{}switch(l.tag){case 26:if(Sn){ot||On(l,i),bn(n,i,l),l.memoizedState?zp(l.memoizedState):l.stateNode&&Lp(l.stateNode);break}case 27:if(gt){ot||On(l,i);var d=ft,m=Ht;ba(l.type)&&(ft=l.stateNode,Ht=!1),bn(n,i,l),Vp(l.stateNode),ft=d,Ht=m;break}case 5:ot||On(l,i);case 6:if(Pt){if(d=ft,m=Ht,ft=null,bn(n,i,l),ft=d,Ht=m,ft!==null)if(Ht)try{W2(ft,l.stateNode)}catch(S){Ke(l,i,S)}else try{Q2(ft,l.stateNode)}catch(S){Ke(l,i,S)}}else bn(n,i,l);break;case 18:Pt&&ft!==null&&(Ht?Ev(ft,l.stateNode):xv(ft,l.stateNode));break;case 4:Pt?(d=ft,m=Ht,ft=l.stateNode.containerInfo,Ht=!0,bn(n,i,l),ft=d,Ht=m):(vi&&kf(l.stateNode,l,Tp()),bn(n,i,l));break;case 0:case 11:case 14:case 15:ot||hi(2,l,i),ot||hi(4,l,i),bn(n,i,l);break;case 1:ot||(On(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Of(l,i,d)),bn(n,i,l);break;case 21:bn(n,i,l);break;case 22:ot=(d=ot)||l.memoizedState!==null,bn(n,i,l),ot=d;break;default:bn(n,i,l)}}function Uf(n,i){if(dn&&i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Cv(n)}catch(l){Ke(i,i.return,l)}}function t2(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Wp),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Wp),i;default:throw Error(s(435,n.tag))}}function Pc(n,i){var l=t2(n);i.forEach(function(d){var m=l2.bind(null,n,d);l.has(d)||(l.add(d),d.then(m,m))})}function Gt(n,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d],S=n,w=i;if(Pt){var B=w;e:for(;B!==null;){switch(B.tag){case 27:if(gt){if(ba(B.type)){ft=B.stateNode,Ht=!1;break e}break}case 5:ft=B.stateNode,Ht=!1;break e;case 3:case 4:ft=B.stateNode.containerInfo,Ht=!0;break e}B=B.return}if(ft===null)throw Error(s(160));kc(S,w,m),ft=null,Ht=!1}else kc(S,w,m);S=m.alternate,S!==null&&(S.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Lf(i,n),i=i.sibling}function Lf(n,i){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gt(i,n),It(n),d&4&&(hi(3,n,n.return),br(3,n),hi(5,n,n.return));break;case 1:Gt(i,n),It(n),d&512&&(ot||l===null||On(l,l.return)),d&64&&Xn&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:if(Sn){var m=xn;if(Gt(i,n),It(n),d&512&&(ot||l===null||On(l,l.return)),d&4){d=l!==null?l.memoizedState:null;var S=n.memoizedState;l===null?S===null?n.stateNode===null?n.stateNode=Mv(m,n.type,n.memoizedProps,n):Up(m,n.type,n.stateNode):n.stateNode=wp(m,S,n.memoizedProps):d!==S?(d===null?l.stateNode!==null&&Lp(l.stateNode):zp(d),S===null?Up(m,n.type,n.stateNode):wp(m,S,n.memoizedProps)):S===null&&n.stateNode!==null&&Oc(n,n.memoizedProps,l.memoizedProps)}break}case 27:if(gt){Gt(i,n),It(n),d&512&&(ot||l===null||On(l,l.return)),l!==null&&d&4&&Oc(n,n.memoizedProps,l.memoizedProps);break}case 5:if(Gt(i,n),It(n),d&512&&(ot||l===null||On(l,l.return)),Pt){if(n.flags&32){m=n.stateNode;try{Ep(m)}catch(ce){Ke(n,n.return,ce)}}d&4&&n.stateNode!=null&&(m=n.memoizedProps,Oc(n,m,l!==null?l.memoizedProps:m)),d&1024&&(_u=!0)}break;case 6:if(Gt(i,n),It(n),d&4&&Pt){if(n.stateNode===null)throw Error(s(162));d=n.memoizedProps,l=l!==null?l.memoizedProps:d,m=n.stateNode;try{q2(m,l,d)}catch(ce){Ke(n,n.return,ce)}}break;case 3:if(Sn?(Ov(),m=xn,xn=au(i.containerInfo),Gt(i,n),xn=m):Gt(i,n),It(n),d&4){if(Pt&&dn&&l!==null&&l.memoizedState.isDehydrated)try{Sv(i.containerInfo)}catch(ce){Ke(n,n.return,ce)}if(vi){d=i.containerInfo,l=i.pendingChildren;try{Mp(d,l)}catch(ce){Ke(n,n.return,ce)}}}_u&&(_u=!1,Gf(n));break;case 4:Sn?(l=xn,xn=au(n.stateNode.containerInfo),Gt(i,n),It(n),xn=l):(Gt(i,n),It(n)),d&4&&vi&&kf(n.stateNode,n,n.stateNode.pendingChildren);break;case 12:Gt(i,n),It(n);break;case 13:Gt(i,n),It(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xu=Cn()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pc(n,d)));break;case 22:m=n.memoizedState!==null;var w=l!==null&&l.memoizedState!==null,B=Xn,W=ot;if(Xn=B||m,ot=W||w,Gt(i,n),ot=W,Xn=B,It(n),d&8192&&(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(l===null||w||Xn||ot||Gi(n)),Pt)){e:if(l=null,Pt)for(i=n;;){if(i.tag===5||Sn&&i.tag===26){if(l===null){w=l=i;try{S=w.stateNode,m?J2(S):ev(w.stateNode,w.memoizedProps)}catch(ce){Ke(w,w.return,ce)}}}else if(i.tag===6){if(l===null){w=i;try{var re=w.stateNode;m?$2(re):tv(re,w.memoizedProps)}catch(ce){Ke(w,w.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Pc(n,l))));break;case 19:Gt(i,n),It(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pc(n,d)));break;case 30:break;case 21:break;default:Gt(i,n),It(n)}}function It(n){var i=n.flags;if(i&2){try{if(Pt){for(var l,d=n.return;d!==null;){if(Df(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:if(gt){var m=l.stateNode,S=Nc(n);_o(n,S,m);break}case 5:var w=l.stateNode;l.flags&32&&(Ep(w),l.flags&=-33);var B=Nc(n);_o(n,B,w);break;case 3:case 4:var W=l.stateNode.containerInfo,re=Nc(n);Dc(n,re,W);break;default:throw Error(s(161))}}}catch(ce){Ke(n,n.return,ce)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Gf(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Gf(i),i.tag===5&&i.flags&1024&&w2(i.stateNode),n=n.sibling}}function fi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)wf(n,i.alternate,i),i=i.sibling}function Gi(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:hi(4,i,i.return),Gi(i);break;case 1:On(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Of(i,i.return,l),Gi(i);break;case 27:gt&&Vp(i.stateNode);case 26:case 5:On(i,i.return),Gi(i);break;case 22:i.memoizedState===null&&Gi(i);break;case 30:Gi(i);break;default:Gi(i)}n=n.sibling}}function pi(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,m=n,S=i,w=S.flags;switch(S.tag){case 0:case 11:case 15:pi(m,S,l),br(4,S);break;case 1:if(pi(m,S,l),d=S,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(re){Ke(d,d.return,re)}if(d=S,m=d.updateQueue,m!==null){var B=d.stateNode;try{var W=m.shared.hiddenCallbacks;if(W!==null)for(m.shared.hiddenCallbacks=null,m=0;m<W.length;m++)vh(W[m],B)}catch(re){Ke(d,d.return,re)}}l&&w&64&&Af(S),Sr(S,S.return);break;case 27:gt&&Pf(S);case 26:case 5:pi(m,S,l),l&&d===null&&w&4&&Nf(S),Sr(S,S.return);break;case 12:pi(m,S,l);break;case 13:pi(m,S,l),l&&w&4&&Uf(m,S);break;case 22:S.memoizedState===null&&pi(m,S,l),Sr(S,S.return);break;case 30:break;default:pi(m,S,l)}i=i.sibling}}function wc(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&ut(l))}function zc(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ut(n))}function Nn(n,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ff(n,i,l,d),i=i.sibling}function Ff(n,i,l,d){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Nn(n,i,l,d),m&2048&&br(9,i);break;case 1:Nn(n,i,l,d);break;case 3:Nn(n,i,l,d),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ut(n)));break;case 12:if(m&2048){Nn(n,i,l,d),n=i.stateNode;try{var S=i.memoizedProps,w=S.id,B=S.onPostCommit;typeof B=="function"&&B(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(W){Ke(i,i.return,W)}}else Nn(n,i,l,d);break;case 13:Nn(n,i,l,d);break;case 23:break;case 22:S=i.stateNode,w=i.alternate,i.memoizedState!==null?S._visibility&2?Nn(n,i,l,d):Cr(n,i):S._visibility&2?Nn(n,i,l,d):(S._visibility|=2,pa(n,i,l,d,(i.subtreeFlags&10256)!==0)),m&2048&&wc(w,i);break;case 24:Nn(n,i,l,d),m&2048&&zc(i.alternate,i);break;default:Nn(n,i,l,d)}}function pa(n,i,l,d,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var S=n,w=i,B=l,W=d,re=w.flags;switch(w.tag){case 0:case 11:case 15:pa(S,w,B,W,m),br(8,w);break;case 23:break;case 22:var ce=w.stateNode;w.memoizedState!==null?ce._visibility&2?pa(S,w,B,W,m):Cr(S,w):(ce._visibility|=2,pa(S,w,B,W,m)),m&&re&2048&&wc(w.alternate,w);break;case 24:pa(S,w,B,W,m),m&&re&2048&&zc(w.alternate,w);break;default:pa(S,w,B,W,m)}i=i.sibling}}function Cr(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,d=i,m=d.flags;switch(d.tag){case 22:Cr(l,d),m&2048&&wc(d.alternate,d);break;case 24:Cr(l,d),m&2048&&zc(d.alternate,d);break;default:Cr(l,d)}i=i.sibling}}function Fi(n){if(n.subtreeFlags&Ua)for(n=n.child;n!==null;)Vf(n),n=n.sibling}function Vf(n){switch(n.tag){case 26:Fi(n),n.flags&Ua&&(n.memoizedState!==null?Dv(xn,n.memoizedState,n.memoizedProps):xp(n.type,n.memoizedProps));break;case 5:Fi(n),n.flags&Ua&&xp(n.type,n.memoizedProps);break;case 3:case 4:if(Sn){var i=xn;xn=au(n.stateNode.containerInfo),Fi(n),xn=i}else Fi(n);break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Ua,Ua=16777216,Fi(n),Ua=i):Fi(n));break;default:Fi(n)}}function Bf(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function xr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];xt=d,If(d,n)}Bf(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jf(n),n=n.sibling}function jf(n){switch(n.tag){case 0:case 11:case 15:xr(n),n.flags&2048&&hi(9,n,n.return);break;case 3:xr(n);break;case 12:xr(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,bo(n)):xr(n);break;default:xr(n)}}function bo(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];xt=d,If(d,n)}Bf(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:hi(8,i,i.return),bo(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,bo(i));break;default:bo(i)}n=n.sibling}}function If(n,i){for(;xt!==null;){var l=xt;switch(l.tag){case 0:case 11:case 15:hi(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ut(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,xt=d;else e:for(l=n;xt!==null;){d=xt;var m=d.sibling,S=d.return;if(zf(d),d===l){xt=null;break e}if(m!==null){m.return=S,xt=m;break e}xt=S}}}function Uc(n){var i=R2(n);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(s(364));return i}if(n=L2(n),n===null)throw Error(s(362));return n.stateNode.current}function Lc(n,i){var l=n.tag;switch(i.$$typeof){case Bo:if(n.type===i.value)return!0;break;case jo:e:{for(i=i.value,n=[n,0],l=0;l<n.length;){var d=n[l++],m=d.tag,S=n[l++],w=i[S];if(m!==5&&m!==26&&m!==27||!Mr(d)){for(;w!=null&&Lc(d,w);)S++,w=i[S];if(S===i.length){i=!0;break e}else for(d=d.child;d!==null;)n.push(d,S),d=d.sibling}}i=!1}return i;case Io:if((l===5||l===26||l===27)&&V2(n.stateNode,i.value))return!0;break;case qo:if((l===5||l===6||l===26||l===27)&&(n=F2(n),n!==null&&0<=n.indexOf(i.value)))return!0;break;case Ho:if((l===5||l===26||l===27)&&(n=n.memoizedProps["data-testname"],typeof n=="string"&&n.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Gc(n){switch(n.$$typeof){case Bo:return"<"+(b(n.value)||"Unknown")+">";case jo:return":has("+(Gc(n)||"")+")";case Io:return'[role="'+n.value+'"]';case qo:return'"'+n.value+'"';case Ho:return'[data-testname="'+n.value+'"]';default:throw Error(s(365))}}function Hf(n,i){var l=[];n=[n,0];for(var d=0;d<n.length;){var m=n[d++],S=m.tag,w=n[d++],B=i[w];if(S!==5&&S!==26&&S!==27||!Mr(m)){for(;B!=null&&Lc(m,B);)w++,B=i[w];if(w===i.length)l.push(m);else for(m=m.child;m!==null;)n.push(m,w),m=m.sibling}}return l}function Fc(n,i){if(!Rr)throw Error(s(363));n=Uc(n),n=Hf(n,i),i=[],n=Array.from(n);for(var l=0;l<n.length;){var d=n[l++],m=d.tag;if(m===5||m===26||m===27)Mr(d)||i.push(d.stateNode);else for(d=d.child;d!==null;)n.push(d),d=d.sibling}return i}function $t(){if((Fe&2)!==0&&Ve!==0)return Ve&-Ve;if(xe.T!==null){var n=Ma;return n!==0?n:dr()}return A2()}function qf(){gn===0&&(gn=(Ve&536870912)===0||Ye?T():536870912);var n=mn.current;return n!==null&&(n.flags|=32),gn}function en(n,i,l){(n===We&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(ma(n,0),mi(n,Ve,gn,!1)),G(n,l),((Fe&2)===0||n!==We)&&(n===We&&((Fe&2)===0&&(Xi|=l),at===4&&mi(n,Ve,gn,!1)),mt(n))}function Yf(n,i,l){if((Fe&6)!==0)throw Error(s(327));var d=!l&&(i&124)===0&&(i&n.expiredLanes)===0||x(n,i),m=d?a2(n,i):jc(n,i,!0),S=d;do{if(m===0){La&&!d&&mi(n,i,0,!1);break}else{if(l=n.current.alternate,S&&!n2(l)){m=jc(n,i,!1),S=!1;continue}if(m===2){if(S=i,n.errorRecoveryDisabledLanes&S)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var B=n;m=zr;var W=dn&&B.current.memoizedState.isDehydrated;if(W&&(ma(B,w).flags|=256),w=jc(B,w,!1),w!==2){if(bu&&!W){B.errorRecoveryDisabledLanes|=S,Xi|=S,m=4;break e}S=qt,qt=m,S!==null&&(qt===null?qt=S:qt.push.apply(qt,S))}m=w}if(S=!1,m!==2)continue}}if(m===1){ma(n,0),mi(n,i,0,!0);break}e:{switch(d=n,S=m,S){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:mi(d,i,gn,!Ci);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=xu+300-Cn(),10<m)){if(mi(d,i,gn,!Ci),O(d,0,!0)!==0)break e;d.timeoutHandle=E2(Kf.bind(null,d,l,qt,Yo,Cu,i,gn,Xi,Ga,Ci,S,2,-0,0),m);break e}Kf(d,l,qt,Yo,Cu,i,gn,Xi,Ga,Ci,S,0,-0,0)}}break}while(!0);mt(n)}function Kf(n,i,l,d,m,S,w,B,W,re,ce,he,fe,Ne){if(n.timeoutHandle=Bi,he=i.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(k2(),Vf(i),he=P2(),he!==null)){n.cancelPendingCommit=he(np.bind(null,n,i,S,l,d,m,w,B,W,ce,1,fe,Ne)),mi(n,S,w,!re);return}np(n,i,S,l,d,m,w,B,W)}function n2(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var m=l[d],S=m.getSnapshot;m=m.value;try{if(!rn(S(),m))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function mi(n,i,l,d){i&=~Su,i&=~Xi,n.suspendedLanes|=i,n.pingedLanes&=~i,d&&(n.warmLanes|=i),d=n.expirationTimes;for(var m=i;0<m;){var S=31-nn(m),w=1<<S;d[S]=-1,m&=~w}l!==0&&N(n,l,i)}function Xf(){return(Fe&6)===0?(bt(0),!1):!0}function Vc(){if(Ue!==null){if(Xe===0)var n=Ue.return;else n=Ue,Kn=qi=null,sc(n),wa=null,Pr=0,n=Ue;for(;n!==null;)Mf(n.alternate,n),n=n.return;Ue=null}}function ma(n,i){var l=n.timeoutHandle;l!==Bi&&(n.timeoutHandle=Bi,T2(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Vc(),We=n,Ue=l=jn(n.current,null),Ve=i,Xe=0,sn=null,Ci=!1,La=x(n,i),bu=!1,Ga=gn=Su=Xi=xi=at=0,qt=zr=null,Cu=!1,(i&8)!==0&&(i|=i&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=i;0<d;){var m=31-nn(d),S=1<<m;i|=n[m],d&=~S}return Zn=i,io(),l}function Zf(n,i){ke=null,xe.H=Vo,i===Dr||i===zo?(i=mh(),Xe=3):i===pu?(i=mh(),Xe=4):Xe=i===Qp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,sn=i,Ue===null&&(at=1,mo(n,D(i,n.current)))}function Qf(){var n=mn.current;return n===null?!0:(Ve&4194048)===Ve?kn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?n===kn:!1}function Wf(){var n=xe.H;return xe.H=Vo,n===null?Vo:n}function Jf(){var n=xe.A;return xe.A=Kv,n}function Bc(){at=4,Ci||(Ve&4194048)!==Ve&&mn.current!==null||(La=!0),(xi&134217727)===0&&(Xi&134217727)===0||We===null||mi(We,Ve,gn,!1)}function jc(n,i,l){var d=Fe;Fe|=2;var m=Wf(),S=Jf();(We!==n||Ve!==i)&&(Yo=null,ma(n,i)),i=!1;var w=at;e:do try{if(Xe!==0&&Ue!==null){var B=Ue,W=sn;switch(Xe){case 8:Vc(),w=6;break e;case 3:case 2:case 9:case 6:mn.current===null&&(i=!0);var re=Xe;if(Xe=0,sn=null,ga(n,B,W,re),l&&La){w=0;break e}break;default:re=Xe,Xe=0,sn=null,ga(n,B,W,re)}}i2(),w=at;break}catch(ce){Zf(n,ce)}while(!0);return i&&n.shellSuspendCounter++,Kn=qi=null,Fe=d,xe.H=m,xe.A=S,Ue===null&&(We=null,Ve=0,io()),w}function i2(){for(;Ue!==null;)$f(Ue)}function a2(n,i){var l=Fe;Fe|=2;var d=Wf(),m=Jf();We!==n||Ve!==i?(Yo=null,Ur=Cn()+500,ma(n,i)):La=x(n,i);e:do try{if(Xe!==0&&Ue!==null){i=Ue;var S=sn;t:switch(Xe){case 1:Xe=0,sn=null,ga(n,i,S,1);break;case 2:case 9:if(fh(S)){Xe=0,sn=null,ep(i);break}i=function(){Xe!==2&&Xe!==9||We!==n||(Xe=7),mt(n)},S.then(i,i);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:fh(S)?(Xe=0,sn=null,ep(i)):(Xe=0,sn=null,ga(n,i,S,7));break;case 5:var w=null;switch(Ue.tag){case 26:w=Ue.memoizedState;case 5:case 27:var B=Ue,W=B.type,re=B.pendingProps;if(w?Gp(w):Cp(W,re)){Xe=0,sn=null;var ce=B.sibling;if(ce!==null)Ue=ce;else{var he=B.return;he!==null?(Ue=he,So(he)):Ue=null}break t}}Xe=0,sn=null,ga(n,i,S,5);break;case 6:Xe=0,sn=null,ga(n,i,S,6);break;case 8:Vc(),at=6;break e;default:throw Error(s(462))}}r2();break}catch(fe){Zf(n,fe)}while(!0);return Kn=qi=null,xe.H=d,xe.A=m,Fe=l,Ue!==null?0:(We=null,Ve=0,io(),at)}function r2(){for(;Ue!==null&&!zv();)$f(Ue)}function $f(n){var i=Cf(n.alternate,n,Zn);n.memoizedProps=n.pendingProps,i===null?So(n):Ue=i}function ep(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=gf(l,i,i.pendingProps,i.type,void 0,Ve);break;case 11:i=gf(l,i,i.pendingProps,i.type.render,i.ref,Ve);break;case 5:sc(i);default:Mf(l,i),i=Ue=up(i,Zn),i=Cf(l,i,Zn)}n.memoizedProps=n.pendingProps,i===null?So(n):Ue=i}function ga(n,i,l,d){Kn=qi=null,sc(i),wa=null,Pr=0;var m=i.return;try{if(Qy(n,m,i,l,Ve)){at=1,mo(n,D(l,n.current)),Ue=null;return}}catch(S){if(m!==null)throw Ue=m,S;at=1,mo(n,D(l,n.current)),Ue=null;return}i.flags&32768?(Ye||d===1?n=!0:La||(Ve&536870912)!==0?n=!1:(Ci=n=!0,(d===2||d===9||d===3||d===6)&&(d=mn.current,d!==null&&d.tag===13&&(d.flags|=16384))),tp(i,n)):So(i)}function So(n){var i=n;do{if((i.flags&32768)!==0){tp(i,Ci);return}n=i.return;var l=Jy(i.alternate,i,Zn);if(l!==null){Ue=l;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=n}while(i!==null);at===0&&(at=5)}function tp(n,i){do{var l=$y(n.alternate,n);if(l!==null){l.flags&=32767,Ue=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=l}while(n!==null);at=6,Ue=null}function np(n,i,l,d,m,S,w,B,W){n.cancelPendingCommit=null;do Er();while(Dt!==0);if((Fe&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(S=i.lanes|i.childLanes,S|=mu,R(n,l,S,w,B,W),n===We&&(Ue=We=null,Ve=0),Fa=i,Ti=n,Va=l,Eu=S,Tu=m,Jp=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,c2(ou,function(){return op(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=xe.T,xe.T=null,m=Hn(),St(2),w=Fe,Fe|=4;try{e2(n,i,l)}finally{Fe=w,St(m),xe.T=d}}Dt=1,ip(),ap(),rp()}}function ip(){if(Dt===1){Dt=0;var n=Ti,i=Fa,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=xe.T,xe.T=null;var d=Hn();St(2);var m=Fe;Fe|=4;try{Lf(i,n),C2(n.containerInfo)}finally{Fe=m,St(d),xe.T=l}}n.current=i,Dt=2}}function ap(){if(Dt===2){Dt=0;var n=Ti,i=Fa,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=xe.T,xe.T=null;var d=Hn();St(2);var m=Fe;Fe|=4;try{wf(n,i.alternate,i)}finally{Fe=m,St(d),xe.T=l}}Dt=3}}function rp(){if(Dt===4||Dt===3){Dt=0,Uv();var n=Ti,i=Fa,l=Va,d=Jp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Dt=5:(Dt=0,Fa=Ti=null,sp(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ei=null),j(l),i=i.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ar,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=xe.T,m=Hn(),St(2),xe.T=null;try{for(var S=n.onRecoverableError,w=0;w<d.length;w++){var B=d[w];S(B.value,{componentStack:B.stack})}}finally{xe.T=i,St(m)}}(Va&3)!==0&&Er(),mt(n),m=n.pendingLanes,(l&4194090)!==0&&(m&42)!==0?n===Ru?Lr++:(Lr=0,Ru=n):Lr=0,bt(0)}}function sp(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ut(i)))}function Er(n){return ip(),ap(),rp(),op()}function op(){if(Dt!==5)return!1;var n=Ti,i=Eu;Eu=0;var l=j(Va),d=32>l?32:l;l=xe.T;var m=Hn();try{St(d),xe.T=null,d=Tu,Tu=null;var S=Ti,w=Va;if(Dt=0,Fa=Ti=null,Va=0,(Fe&6)!==0)throw Error(s(331));var B=Fe;if(Fe|=4,jf(S.current),Ff(S,S.current,w,d),Fe=B,bt(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ar,S)}catch{}return!0}finally{St(m),xe.T=l,sp(n,i)}}function lp(n,i,l){i=D(l,i),i=vc(n.stateNode,i,2),n=ci(n,i,2),n!==null&&(G(n,2),mt(n))}function Ke(n,i,l){if(n.tag===3)lp(n,n,l);else for(;i!==null;){if(i.tag===3){lp(i,n,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ei===null||!Ei.has(d))){n=D(l,n),l=cf(2),d=ci(i,l,2),d!==null&&(uf(l,d,i,n),G(d,2),mt(d));break}}i=i.return}}function Ic(n,i,l){var d=n.pingCache;if(d===null){d=n.pingCache=new Xv;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(l)||(bu=!0,m.add(l),n=s2.bind(null,n,i,l),i.then(n,n))}function s2(n,i,l){var d=n.pingCache;d!==null&&d.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,We===n&&(Ve&l)===l&&(at===4||at===3&&(Ve&62914560)===Ve&&300>Cn()-xu?(Fe&2)===0&&ma(n,0):Su|=l,Ga===Ve&&(Ga=0)),mt(n)}function cp(n,i){i===0&&(i=M()),n=ha(n,i),n!==null&&(G(n,i),mt(n))}function o2(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),cp(n,l)}function l2(n,i){var l=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),cp(n,l)}function c2(n,i){return Ao(n,i)}function u2(n,i,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function jn(n,i){var l=n.alternate;return l===null?(l=a(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function up(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Co(n,i,l,d,m,S){var w=0;if(d=n,typeof n=="function")Hc(n)&&(w=1);else if(typeof n=="string")w=Sn&&gt?kp(n,l,Nt.current)?26:Bp(n)?27:5:Sn?kp(n,l,Nt.current)?26:5:gt&&Bp(n)?27:5;else e:switch(n){case eu:return n=a(31,l,i,m),n.elementType=eu,n.lanes=S,n;case va:return Vi(l.children,m,S,i);case gp:w=8,m|=24;break;case Zc:return n=a(12,l,i,m|2),n.elementType=Zc,n.lanes=S,n;case Wc:return n=a(13,l,i,m),n.elementType=Wc,n.lanes=S,n;case Jc:return n=a(19,l,i,m),n.elementType=Jc,n.lanes=S,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case p2:case gi:w=10;break e;case yp:w=9;break e;case Qc:w=11;break e;case $c:w=14;break e;case yi:w=16,d=null;break e}w=29,l=Error(s(130,n===null?"null":typeof n,"")),d=null}return i=a(w,l,i,m),i.elementType=n,i.type=d,i.lanes=S,i}function Vi(n,i,l,d){return n=a(7,n,d,i),n.lanes=l,n}function qc(n,i,l){return n=a(6,n,null,i),n.lanes=l,n}function Yc(n,i,l){return i=a(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function d2(n,i,l,d,m,S,w,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bi,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=k(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k(0),this.hiddenUpdates=k(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=S,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function dp(n,i,l,d,m,S,w,B,W,re,ce,he){return n=new d2(n,i,l,w,B,W,re,he),i=1,S===!0&&(i|=24),S=a(3,null,null,i),n.current=S,S.stateNode=n,i=_n(),i.refCount++,n.pooledCache=i,i.refCount++,S.memoizedState={element:d,isDehydrated:l,cache:i},Wl(S),n}function hp(n){return n?(n=Ca,n):Ca}function fp(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=u(i),n=n!==null?h(n):null,n===null?null:Tr(n.stateNode)}function pp(n,i,l,d,m,S){m=hp(m),d.context===null?d.context=m:d.pendingContext=m,d=li(i),d.payload={element:l},S=S===void 0?null:S,S!==null&&(d.callback=S),l=ci(n,d,i),l!==null&&(en(l,n,i),hr(l,n,i))}function mp(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Kc(n,i){mp(n,i),(n=n.alternate)&&mp(n,i)}var ze={},h2=t_(),tn=dg(),Xc=Object.assign,f2=Symbol.for("react.element"),xo=Symbol.for("react.transitional.element"),ya=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),Zc=Symbol.for("react.profiler"),p2=Symbol.for("react.provider"),yp=Symbol.for("react.consumer"),gi=Symbol.for("react.context"),Qc=Symbol.for("react.forward_ref"),Wc=Symbol.for("react.suspense"),Jc=Symbol.for("react.suspense_list"),$c=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),eu=Symbol.for("react.activity"),m2=Symbol.for("react.memo_cache_sentinel"),vp=Symbol.iterator,g2=Symbol.for("react.client.reference"),Eo=Array.isArray,xe=h2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,y2=e.rendererVersion,v2=e.rendererPackageName,_p=e.extraDevToolsConfig,Tr=e.getPublicInstance,_2=e.getRootHostContext,b2=e.getChildHostContext,S2=e.prepareForCommit,C2=e.resetAfterCommit,x2=e.createInstance;e.cloneMutableInstance;var tu=e.appendInitialChild,bp=e.finalizeInitialChildren,To=e.shouldSetTextContent,Sp=e.createTextInstance;e.cloneMutableTextInstance;var E2=e.scheduleTimeout,T2=e.cancelTimeout,Bi=e.noTimeout,In=e.isPrimaryRenderer;e.warnsIfNotActing;var Pt=e.supportsMutation,vi=e.supportsPersistence,dn=e.supportsHydration,R2=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var M2=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var St=e.setCurrentUpdatePriority,Hn=e.getCurrentUpdatePriority,A2=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var O2=e.shouldAttemptEagerTransition,N2=e.detachDeletedInstance;e.requestPostPaintCallback;var D2=e.maySuspendCommit,Cp=e.preloadInstance,k2=e.startSuspendingCommit,xp=e.suspendInstance;e.suspendOnActiveViewTransition;var P2=e.waitForCommitToBeReady,_a=e.NotPendingTransition,ji=e.HostTransitionContext,w2=e.resetFormInstance;e.bindToConsole;var z2=e.supportsMicrotasks,U2=e.scheduleMicrotask,Rr=e.supportsTestSelectors,L2=e.findFiberRoot,G2=e.getBoundingRect,F2=e.getTextContent,Mr=e.isHiddenSubtree,V2=e.matchAccessibilityRole,B2=e.setFocusIfFocusable,j2=e.setupIntersectionObserver,I2=e.appendChild,H2=e.appendChildToContainer,q2=e.commitTextUpdate,Y2=e.commitMount,K2=e.commitUpdate,X2=e.insertBefore,Z2=e.insertInContainerBefore,Q2=e.removeChild,W2=e.removeChildFromContainer,Ep=e.resetTextContent,J2=e.hideInstance,$2=e.hideTextInstance,ev=e.unhideInstance,tv=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopGestureTransition,e.getCurrentGestureOffset,e.subscribeToGestureDirection,e.createViewTransitionInstance;var nv=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var iv=e.cloneInstance,Tp=e.createContainerChildSet,Rp=e.appendChildToContainerChildSet,av=e.finalizeContainerChildren,Mp=e.replaceContainerChildren,Ap=e.cloneHiddenInstance,Op=e.cloneHiddenTextInstance,nu=e.isSuspenseInstancePending,iu=e.isSuspenseInstanceFallback,rv=e.getSuspenseInstanceFallbackErrorDetails,sv=e.registerSuspenseInstanceRetry,ov=e.canHydrateFormStateMarker,lv=e.isFormStateMarkerMatching,Np=e.getNextHydratableSibling,cv=e.getNextHydratableSiblingAfterSingleton,uv=e.getFirstHydratableChild,dv=e.getFirstHydratableChildWithinContainer,hv=e.getFirstHydratableChildWithinSuspenseInstance,fv=e.getFirstHydratableChildWithinSingleton,pv=e.canHydrateInstance,mv=e.canHydrateTextInstance,gv=e.canHydrateSuspenseInstance,yv=e.hydrateInstance,vv=e.hydrateTextInstance,_v=e.hydrateSuspenseInstance,bv=e.getNextHydratableInstanceAfterSuspenseInstance,Sv=e.commitHydratedContainer,Cv=e.commitHydratedSuspenseInstance,xv=e.clearSuspenseBoundary,Ev=e.clearSuspenseBoundaryFromContainer,Dp=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Tv=e.validateHydratableInstance,Rv=e.validateHydratableTextInstance,Sn=e.supportsResources,kp=e.isHostHoistableType,au=e.getHoistableRoot,Pp=e.getResource,wp=e.acquireResource,zp=e.releaseResource,Mv=e.hydrateHoistable,Up=e.mountHoistable,Lp=e.unmountHoistable,Av=e.createHoistableInstance,Ov=e.prepareToCommitHoistables,Nv=e.mayResourceSuspendCommit,Gp=e.preloadResource,Dv=e.suspendResource,gt=e.supportsSingletons,Fp=e.resolveSingletonInstance,kv=e.acquireSingletonInstance,Vp=e.releaseSingletonInstance,Bp=e.isHostSingletonType,ba=e.isSingletonScope,ru=[],Sa=-1,Ca={},nn=Math.clz32?Math.clz32:C,Pv=Math.log,wv=Math.LN2,Ro=256,Mo=4194304,Ao=tn.unstable_scheduleCallback,su=tn.unstable_cancelCallback,zv=tn.unstable_shouldYield,Uv=tn.unstable_requestPaint,Cn=tn.unstable_now,jp=tn.unstable_ImmediatePriority,Lv=tn.unstable_UserBlockingPriority,ou=tn.unstable_NormalPriority,Gv=tn.unstable_IdlePriority,Fv=tn.log,Vv=tn.unstable_setDisableYieldValue,Ar=null,an=null,lu,Ip,cu=!1,Hp=new WeakMap,xa=[],Ea=0,Oo=null,No=0,hn=[],fn=0,Ii=null,qn=1,Yn="",Nt=y(null),Or=y(null),_i=y(null),Do=y(null),Ft=null,yt=null,Ye=!1,Hi=null,Dn=!1,uu=Error(s(519)),rn=typeof Object.is=="function"?Object.is:He,ko=y(null),qi=null,Kn=null,Bv=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},jv=tn.unstable_scheduleCallback,Iv=tn.unstable_NormalPriority,it={$$typeof:gi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Po=null,Ta=null,du=!1,wo=!1,hu=!1,Ra=0,Nr=null,fu=0,Ma=0,Aa=null,qp=xe.S;xe.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Xl(n,i),qp!==null&&qp(n,i)};var Yi=y(null),Hv=Object.prototype.hasOwnProperty,Dr=Error(s(460)),pu=Error(s(474)),zo=Error(s(542)),Uo={then:function(){}},Oa=null,pn=[],Na=0,mu=0,bi=!1,gu=!1,Da=y(null),Lo=y(0),Si=0,ke=null,Ze=null,ht=null,Go=!1,ka=!1,Ki=!1,Fo=0,kr=0,Pa=null,qv=0,Vo={readContext:Oe,use:so,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st},Yp={readContext:Oe,use:so,useCallback:function(n,i){return jt().memoizedState=[n,i===void 0?null:i],n},useContext:Oe,useEffect:Vh,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,co(4194308,4,Hh.bind(null,i,n),l)},useLayoutEffect:function(n,i){return co(4194308,4,n,i)},useInsertionEffect:function(n,i){co(4,2,n,i)},useMemo:function(n,i){var l=jt();i=i===void 0?null:i;var d=n();if(Ki){Y(!0);try{n()}finally{Y(!1)}}return l.memoizedState=[d,i],d},useReducer:function(n,i,l){var d=jt();if(l!==void 0){var m=l(i);if(Ki){Y(!0);try{l(i)}finally{Y(!1)}}}else m=i;return d.memoizedState=d.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},d.queue=n,n=n.dispatch=Zy.bind(null,ke,n),[d.memoizedState,n]},useRef:function(n){var i=jt();return n={current:n},i.memoizedState=n},useState:function(n){n=dc(n);var i=n.queue,l=$h.bind(null,ke,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:fc,useDeferredValue:function(n,i){var l=jt();return pc(l,n,i)},useTransition:function(){var n=dc(!1);return n=Zh.bind(null,ke,n.queue,!0,!1),jt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var d=ke,m=jt();if(Ye){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),We===null)throw Error(s(349));(Ve&124)!==0||Eh(d,i,l)}m.memoizedState=l;var S={value:l,getSnapshot:i};return m.queue=S,Vh(Rh.bind(null,d,S,n),[n]),d.flags|=2048,fa(9,lo(),Th.bind(null,d,S,l,i),null),l},useId:function(){var n=jt(),i=We.identifierPrefix;if(Ye){var l=Yn,d=qn;l=(d&~(1<<32-nn(d)-1)).toString(32)+l,i=""+i+"R"+l,l=Fo++,0<l&&(i+="H"+l.toString(32)),i+=""}else l=qv++,i=""+i+"r"+l.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:mc,useFormState:zh,useActionState:zh,useOptimistic:function(n){var i=jt();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=gc.bind(null,ke,!0,l),l.dispatch=i,[n,i]},useMemoCache:lc,useCacheRefresh:function(){return jt().memoizedState=Xy.bind(null,ke)}},Kp={readContext:Oe,use:so,useCallback:Yh,useContext:Oe,useEffect:Bh,useImperativeHandle:qh,useInsertionEffect:jh,useLayoutEffect:Ih,useMemo:Kh,useReducer:oo,useRef:Fh,useState:function(){return oo(Fn)},useDebugValue:fc,useDeferredValue:function(n,i){var l=dt();return Xh(l,Ze.memoizedState,n,i)},useTransition:function(){var n=oo(Fn)[0],i=dt().memoizedState;return[typeof n=="boolean"?n:mr(n),i]},useSyncExternalStore:xh,useId:Wh,useHostTransitionStatus:mc,useFormState:Uh,useActionState:Uh,useOptimistic:function(n,i){var l=dt();return Oh(l,Ze,n,i)},useMemoCache:lc,useCacheRefresh:Jh},Yv={readContext:Oe,use:so,useCallback:Yh,useContext:Oe,useEffect:Bh,useImperativeHandle:qh,useInsertionEffect:jh,useLayoutEffect:Ih,useMemo:Kh,useReducer:uc,useRef:Fh,useState:function(){return uc(Fn)},useDebugValue:fc,useDeferredValue:function(n,i){var l=dt();return Ze===null?pc(l,n,i):Xh(l,Ze.memoizedState,n,i)},useTransition:function(){var n=uc(Fn)[0],i=dt().memoizedState;return[typeof n=="boolean"?n:mr(n),i]},useSyncExternalStore:xh,useId:Wh,useHostTransitionStatus:mc,useFormState:Gh,useActionState:Gh,useOptimistic:function(n,i){var l=dt();return Ze!==null?Oh(l,Ze,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:lc,useCacheRefresh:Jh},wa=null,Pr=0,za=af(!0),Xp=af(!1),mn=y(null),kn=null,vt=y(0),yu={enqueueSetState:function(n,i,l){n=n._reactInternals;var d=$t(),m=li(d);m.payload=i,l!=null&&(m.callback=l),i=ci(n,m,d),i!==null&&(en(i,n,d),hr(i,n,d))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var d=$t(),m=li(d);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=ci(n,m,d),i!==null&&(en(i,n,d),hr(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=$t(),d=li(l);d.tag=2,i!=null&&(d.callback=i),i=ci(n,d,l),i!==null&&(en(i,n,l),hr(i,n,l))}},Zp=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Qp=Error(s(461)),Ct=!1,vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Xn=!1,ot=!1,_u=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,xt=null,ft=null,Ht=!1,xn=null,Ua=8192,Kv={getCacheForType:function(n){var i=Oe(it),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l}},Bo=0,jo=1,Io=2,Ho=3,qo=4;if(typeof Symbol=="function"&&Symbol.for){var wr=Symbol.for;Bo=wr("selector.component"),jo=wr("selector.has_pseudo_class"),Io=wr("selector.role"),Ho=wr("selector.test_id"),qo=wr("selector.text")}var Xv=typeof WeakMap=="function"?WeakMap:Map,Fe=0,We=null,Ue=null,Ve=0,Xe=0,sn=null,Ci=!1,La=!1,bu=!1,Zn=0,at=0,xi=0,Xi=0,Su=0,gn=0,Ga=0,zr=null,qt=null,Cu=!1,xu=0,Ur=1/0,Yo=null,Ei=null,Dt=0,Ti=null,Fa=null,Va=0,Eu=0,Tu=null,Jp=null,Lr=0,Ru=null;return ze.attemptContinuousHydration=function(n){if(n.tag===13){var i=ha(n,67108864);i!==null&&en(i,n,67108864),Kc(n,67108864)}},ze.attemptHydrationAtCurrentPriority=function(n){if(n.tag===13){var i=$t();i=F(i);var l=ha(n,i);l!==null&&en(l,n,i),Kc(n,i)}},ze.attemptSynchronousHydration=function(n){switch(n.tag){case 3:if(n=n.stateNode,n.current.memoizedState.isDehydrated){var i=E(n.pendingLanes);if(i!==0){for(n.pendingLanes|=2,n.entangledLanes|=2;i;){var l=1<<31-nn(i);n.entanglements[1]|=l,i&=~l}mt(n),(Fe&6)===0&&(Ur=Cn()+500,bt(0))}}break;case 13:i=ha(n,2),i!==null&&en(i,n,2),Xf(),Kc(n,2)}},ze.batchedUpdates=function(n,i){return n(i)},ze.createComponentSelector=function(n){return{$$typeof:Bo,value:n}},ze.createContainer=function(n,i,l,d,m,S,w,B,W,re){return dp(n,i,!1,null,l,d,S,w,B,W,re,null)},ze.createHasPseudoClassSelector=function(n){return{$$typeof:jo,value:n}},ze.createHydrationContainer=function(n,i,l,d,m,S,w,B,W,re,ce,he,fe){return n=dp(l,d,!0,n,m,S,B,W,re,ce,he,fe),n.context=hp(null),l=n.current,d=$t(),d=F(d),m=li(d),m.callback=i??null,ci(l,m,d),i=d,n.current.lanes=i,G(n,i),mt(n),n},ze.createPortal=function(n,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ya,key:d==null?null:""+d,children:n,containerInfo:i,implementation:l}},ze.createRoleSelector=function(n){return{$$typeof:Io,value:n}},ze.createTestNameSelector=function(n){return{$$typeof:Ho,value:n}},ze.createTextSelector=function(n){return{$$typeof:qo,value:n}},ze.defaultOnCaughtError=function(n){console.error(n)},ze.defaultOnRecoverableError=function(n){Zp(n)},ze.defaultOnUncaughtError=function(n){Zp(n)},ze.deferredUpdates=function(n){var i=xe.T,l=Hn();try{return St(32),xe.T=null,n()}finally{St(l),xe.T=i}},ze.discreteUpdates=function(n,i,l,d,m){var S=xe.T,w=Hn();try{return St(2),xe.T=null,n(i,l,d,m)}finally{St(w),xe.T=S,Fe===0&&(Ur=Cn()+500)}},ze.findAllNodes=Fc,ze.findBoundingRects=function(n,i){if(!Rr)throw Error(s(363));i=Fc(n,i),n=[];for(var l=0;l<i.length;l++)n.push(G2(i[l]));for(i=n.length-1;0<i;i--){l=n[i];for(var d=l.x,m=d+l.width,S=l.y,w=S+l.height,B=i-1;0<=B;B--)if(i!==B){var W=n[B],re=W.x,ce=re+W.width,he=W.y,fe=he+W.height;if(d>=re&&S>=he&&m<=ce&&w<=fe){n.splice(i,1);break}else if(d!==re||l.width!==W.width||fe<S||he>w){if(!(S!==he||l.height!==W.height||ce<d||re>m)){re>d&&(W.width+=re-d,W.x=d),ce<m&&(W.width=m-re),n.splice(i,1);break}}else{he>S&&(W.height+=he-S,W.y=S),fe<w&&(W.height=w-he),n.splice(i,1);break}}}return n},ze.findHostInstance=fp,ze.findHostInstanceWithNoPortals=function(n){return n=u(n),n=n!==null?f(n):null,n===null?null:Tr(n.stateNode)},ze.findHostInstanceWithWarning=function(n){return fp(n)},ze.flushPassiveEffects=Er,ze.flushSyncFromReconciler=function(n){var i=Fe;Fe|=1;var l=xe.T,d=Hn();try{if(St(2),xe.T=null,n)return n()}finally{St(d),xe.T=l,Fe=i,(Fe&6)===0&&bt(0)}},ze.flushSyncWork=Xf,ze.focusWithin=function(n,i){if(!Rr)throw Error(s(363));for(n=Uc(n),i=Hf(n,i),i=Array.from(i),n=0;n<i.length;){var l=i[n++],d=l.tag;if(!Mr(l)){if((d===5||d===26||d===27)&&B2(l.stateNode))return!0;for(l=l.child;l!==null;)i.push(l),l=l.sibling}}return!1},ze.getFindAllNodesFailureDescription=function(n,i){if(!Rr)throw Error(s(363));var l=0,d=[];n=[Uc(n),0];for(var m=0;m<n.length;){var S=n[m++],w=S.tag,B=n[m++],W=i[B];if((w!==5&&w!==26&&w!==27||!Mr(S))&&(Lc(S,W)&&(d.push(Gc(W)),B++,B>l&&(l=B)),B<i.length))for(S=S.child;S!==null;)n.push(S,B),S=S.sibling}if(l<i.length){for(n=[];l<i.length;l++)n.push(Gc(i[l]));return`findAllNodes was able to match part of the selector:
  `+(d.join(" > ")+`

No matching component was found for:
  `)+n.join(" > ")}return null},ze.getPublicRootInstance=function(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 27:case 5:return Tr(n.child.stateNode);default:return n.child.stateNode}},ze.injectIntoDevTools=function(){var n={bundleType:0,version:y2,rendererPackageName:v2,currentDispatcherRef:xe,reconcilerVersion:"19.1.0"};if(_p!==null&&(n.rendererConfig=_p),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")n=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)n=!0;else{try{Ar=i.inject(n),an=i}catch{}n=!!i.checkDCE}}return n},ze.isAlreadyRendering=function(){return(Fe&6)!==0},ze.observeVisibleRects=function(n,i,l,d){if(!Rr)throw Error(s(363));n=Fc(n,i);var m=j2(n,l,d).disconnect;return{disconnect:function(){m()}}},ze.shouldError=function(){return null},ze.shouldSuspend=function(){return!1},ze.startHostTransition=function(n,i,l,d){if(n.tag!==5)throw Error(s(476));var m=Qh(n).queue;Zh(n,m,i,_a,l===null?r:function(){var S=Qh(n).next.queue;return yr(n,S,{},$t()),l(d)})},ze.updateContainer=function(n,i,l,d){var m=i.current,S=$t();return pp(m,S,n,i,l,d),S},ze.updateContainerSync=function(n,i,l,d){return pp(i.current,2,n,i,l,d),2},ze},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})}(Ju)),Ju.exports}var Ym;function Yb(){return Ym||(Ym=1,Wu.exports=qb()),Wu.exports}var Kb=Yb();const Xb=Hd(Kb);var $u={exports:{}},$n={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function Zb(){return Km||(Km=1,$n.ConcurrentRoot=1,$n.ContinuousEventPriority=8,$n.DefaultEventPriority=32,$n.DiscreteEventPriority=2,$n.IdleEventPriority=268435456,$n.LegacyRoot=0,$n.NoEventPriority=0),$n}var Xm;function Qb(){return Xm||(Xm=1,$u.exports=Zb()),$u.exports}var Hl=Qb(),Wb=we();const Zm={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Qm=!1,Wm=!1;const Tl=".react-konva-event",Jb=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,$b=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,e6={};function ql(t,e,a=e6){if(!Qm&&"zIndex"in e&&(console.warn($b),Qm=!0),!Wm&&e.draggable){var r=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;r&&!s&&(console.warn(Jb),Wm=!0)}for(var o in a)if(!Zm[o]){var c=o.slice(0,2)==="on",u=a[o]!==e[o];if(c&&u){var h=o.substr(2).toLowerCase();h.substr(0,7)==="content"&&(h="content"+h.substr(7,1).toUpperCase()+h.substr(8)),t.off(h,a[o])}var f=!e.hasOwnProperty(o);f&&t.setAttr(o,void 0)}var p=e._useStrictMode,b={},y=!1;const g={};for(var o in e)if(!Zm[o]){var c=o.slice(0,2)==="on",v=a[o]!==e[o];if(c&&v){var h=o.substr(2).toLowerCase();h.substr(0,7)==="content"&&(h="content"+h.substr(7,1).toUpperCase()+h.substr(8)),e[o]&&(g[h]=e[o])}!c&&(e[o]!==a[o]||p&&e[o]!==t.getAttr(o))&&(y=!0,b[o]=e[o])}y&&(t.setAttrs(b),Ui(t));for(var h in g)t.off(h+Tl),t.on(h+Tl,g[h])}function Ui(t){if(!Wb.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}var ed=dg();const xy={},t6={};El.Node.prototype._applyProps=ql;let Ey=Hl.DefaultEventPriority;function n6(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Ui(t)}function i6(t,e,a){let r=El[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=El.Group);const s={},o={};for(var c in e)if(c!=="ref"){var u=c.slice(0,2)==="on";u?o[c]=e[c]:s[c]=e[c]}const h=new r(s);return ql(h,o),h}function a6(t,e,a){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function r6(t,e,a){return!1}function s6(t){return t}function o6(){return null}function l6(){return null}function c6(t,e,a,r){return t6}function u6(){}function d6(t){}function h6(t,e){return!1}function f6(){return xy}function p6(){return xy}const m6=setTimeout,g6=clearTimeout,y6=!0,v6=t=>{t()},_6=-1;function b6(t,e){return!1}const S6=!1,C6=!1,x6=!0,E6=!1,T6=!1;function R6(t,e){e.parent===t?e.moveToTop():t.add(e),Ui(t)}function M6(t,e){e.parent===t?e.moveToTop():t.add(e),Ui(t)}function Ty(t,e,a){e._remove(),t.add(e),e.setZIndex(a.getZIndex()),Ui(t)}function A6(t,e,a){Ty(t,e,a)}function O6(t,e){e.destroy(),e.off(Tl),Ui(t)}function N6(t,e){e.destroy(),e.off(Tl),Ui(t)}function D6(t,e,a){console.error(`Text components are not yet supported in ReactKonva. You text is: "${a}"`)}function k6(t,e,a){}function P6(t,e,a,r){ql(t,r,a)}function w6(t){t.hide(),Ui(t)}function z6(t){}function U6(t,e){(e.visible==null||e.visible)&&t.show()}function L6(t,e){}function G6(t){}function F6(){}function V6(){return Hl.DefaultEventPriority}function B6(){}function j6(){return null}function I6(t){Ey=t}function H6(){return Ey}function q6(){return Hl.DiscreteEventPriority}function Y6(){return!1}function K6(){}function X6(){return!1}function Z6(){return!0}function Q6(){}function W6(){}function J6(){return null}const $6=null;function e8(){}const t8=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:$6,appendChild:R6,appendChildToContainer:M6,appendInitialChild:n6,cancelTimeout:g6,clearContainer:G6,commitMount:k6,commitTextUpdate:D6,commitUpdate:P6,createInstance:i6,createTextInstance:a6,detachDeletedInstance:F6,finalizeInitialChildren:r6,getChildHostContext:p6,getCurrentEventPriority:V6,getCurrentUpdatePriority:H6,getInstanceFromScope:j6,getPublicInstance:s6,getRootHostContext:f6,hideInstance:w6,hideTextInstance:z6,idlePriority:ed.unstable_IdlePriority,insertBefore:Ty,insertInContainerBefore:A6,isPrimaryRenderer:S6,maySuspendCommit:X6,noTimeout:_6,now:ed.unstable_now,preloadInstance:Z6,prepareForCommit:o6,preparePortalMount:l6,prepareScopeUpdate:B6,prepareUpdate:c6,removeChild:O6,removeChildFromContainer:N6,requestPostPaintCallback:K6,resetAfterCommit:u6,resetFormInstance:e8,resetTextContent:d6,resolveUpdatePriority:q6,run:ed.unstable_runWithPriority,scheduleMicrotask:v6,scheduleTimeout:m6,setCurrentUpdatePriority:I6,shouldAttemptEagerTransition:Y6,shouldDeprioritizeSubtree:h6,shouldSetTextContent:b6,startSuspendingCommit:Q6,supportsHydration:T6,supportsMicrotasks:y6,supportsMutation:x6,supportsPersistence:E6,suspendInstance:W6,unhideInstance:U6,unhideTextInstance:L6,waitForCommitToBeReady:J6,warnsIfNotActing:C6},Symbol.toStringTag,{value:"Module"}));function Ry(t,e,a){if(!t)return;if(a(t)===!0)return t;let r=t.child;for(;r;){const s=Ry(r,e,a);if(s)return s;r=r.sibling}}function My(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const oh=My(q.createContext(null));class Ay extends q.Component{render(){return q.createElement(oh.Provider,{value:this._reactInternals},this.props.children)}}function n8(){const t=q.useContext(oh);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=q.useId();return q.useMemo(()=>{for(const a of[t,t==null?void 0:t.alternate]){if(!a)continue;const r=Ry(a,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[t,e])}const i8=Symbol.for("react.context"),a8=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===i8;function r8(){const t=n8(),[e]=q.useState(()=>new Map);e.clear();let a=t;for(;a;){const r=a.type;a8(r)&&r!==oh&&!e.has(r)&&e.set(r,q.use(My(r))),a=a.return}return e}function s8(){const t=r8();return q.useMemo(()=>Array.from(t.keys()).reduce((e,a)=>r=>q.createElement(e,null,q.createElement(a.Provider,{...r,value:t.get(a)})),e=>q.createElement(Ay,{...e})),[t])}if(et.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function o8(t){const e=et.useRef({});return et.useLayoutEffect(()=>{e.current=t}),et.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const l8=()=>{const t=et.useRef(0);return et.useMemo(()=>{t.current++},[]),t.current>1},c8=t=>{const e=et.useRef(null),a=et.useRef(null),r=et.useRef(null),s=o8(t),o=s8(),c=et.useRef(!1),u=f=>{const{forwardedRef:p}=t;p&&(typeof p=="function"?p(f):p.current=f)},h=l8();return et.useLayoutEffect(()=>c.current&&h?()=>{c.current=!1,u(null),Ka.updateContainer(null,r.current,null),a.current.destroy()}:(c.current=!0,a.current=new El.Stage({width:t.width,height:t.height,container:e.current}),u(a.current),r.current=Ka.createContainer(a.current,Hl.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Ka.updateContainer(et.createElement(o,{},t.children),r.current,null,()=>{}),()=>{h||(u(null),Ka.updateContainer(null,r.current,null),a.current.destroy())}),[]),et.useLayoutEffect(()=>{u(a.current),ql(a.current,t,s),Ka.updateContainer(et.createElement(o,{},t.children),r.current,null)}),et.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},u8="Layer",d8="Group",h8="Rect",Jm="Circle",f8="Image",Ka=Xb(t8);Ka.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:et.version,rendererPackageName:"react-konva"});const p8=et.forwardRef((t,e)=>et.createElement(Ay,{},et.createElement(c8,{...t,forwardedRef:e}))),m8=()=>{const t=(s,o)=>s>o?o*.9:s*.9,[e,a]=q.useState(t(window.innerHeight,window.innerWidth)),r=()=>{const{innerHeight:s,innerWidth:o}=window;a(t(s,o))};return q.useEffect(()=>(window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)),[]),Math.round(e)};function Ad(t){const r=t/14/2,s=(t-r*2)/14,o=s*14;return{line:15,blockCount:14,padding:r,blockWidth:s,boardWidth:o}}function g8(t,e){const{line:a,padding:r,blockWidth:s,boardWidth:o}=Ad(e);for(let c=0;c<a;c++){const u=t.getContext("2d");u==null||u.beginPath(),u==null||u.moveTo(r+c*s,r),u==null||u.lineTo(r+c*s,r+o),u==null||u.stroke(),u==null||u.restore(),u==null||u.beginPath(),u==null||u.moveTo(r,r+c*s),u==null||u.lineTo(r+o,r+c*s),u==null||u.stroke(),u==null||u.restore(),u==null||u.beginPath(),u==null||u.arc(e/2,e/2,r/4,0,2*Math.PI),u==null||u.fill(),u==null||u.stroke(),u==null||u.restore()}}function y8({sendPiece:t,restart:e}){const a=m8(),r=q.useRef(null),s=hg(),o=()=>s({to:"/"}),[c,u,h,f,p]=ea(yg(g=>[g.piecePos,g.board,g.isMyTurn,g.isWon,g.placePiece])),b=q.useMemo(()=>{const g=document.createElement("canvas");return g.width=a,g.height=a,g8(g,a),g},[a]),y=()=>{var g;h&&Q3(ib((g=r.current)==null?void 0:g.getPointerPosition()),V0(v=>typeof v.x=="number"||typeof v.y=="number"?Rd(v):xl),V0(v=>{const{padding:C,blockWidth:E}=Ad(a),O=Math.round((v.x+C)/E)-1,x=Math.round((v.y+C)/E)-1;return u[O][x]?xl:Rd({indexX:O,indexY:x})}),nb(()=>{},({indexX:v,indexY:C})=>{p(v,C,"me"),t(v,C)}))};return ne.jsxs("div",{className:"bg-black bg-cover aspect-auto w-screen h-screen",children:[h&&ne.jsx("h1",{className:"absolute top-8 right-8 z-10  text-white",children:"Your Turn"}),ne.jsxs("div",{className:"mx-auto w-screen h-full flex items-center justify-center",children:[f&&ne.jsxs("div",{className:"flex justify-start absolute top-8 left-8 z-10",children:[ne.jsx("button",{className:`m-2 bg-white hover:bg-gray-300 text-black\r
               font-bold py-2 px-4 border border-gray-300 rounded top-8 left-8`,onClick:o,children:"back"}),ne.jsx("button",{className:`m-2 bg-green-500 hover:bg-green-700 text-white\r
               font-bold py-2 px-4 border border-green-700 rounded  top-8 left-8`,onClick:e,children:"Restart"})]}),ne.jsx(p8,{width:a,height:a,ref:r,children:ne.jsxs(u8,{children:[ne.jsx(h8,{width:a,height:a,fill:"#A1662F"}),ne.jsx(f8,{onTap:y,onClick:y,width:a,height:a,image:b}),c.map((g,v)=>{const{padding:C,blockWidth:E}=Ad(a),O=C+g.x*E,x=C+g.y*E;return ne.jsxs(d8,{children:[ne.jsx(Jm,{x:O,y:x,radius:C*.9,fill:g.player==="black"?"black":"white"}),v===c.length-1&&ne.jsx(Jm,{x:O,y:x,radius:C*.2,fill:"red"})]},v)})]})})]})]})}function Yl(t,e){return typeof t=="function"?t(e):t}function Ds(t,e){return lh(e).reduce((r,s)=>{if(r===null)return null;if(typeof r<"u")return r[s]},t)}function nl(t,e,a){const r=lh(e);function s(o){if(!r.length)return Yl(a,o);const c=r.shift();if(typeof c=="string"||typeof c=="number"&&!Array.isArray(o))return typeof o=="object"?(o===null&&(o={}),{...o,[c]:s(o[c])}):{[c]:s()};if(Array.isArray(o)&&typeof c=="number"){const u=o.slice(0,c);return[...u.length?u:new Array(c),s(o[c]),...o.slice(c+1)]}return[...new Array(c),s()]}return s(t)}function v8(t,e){const a=lh(e);function r(s){if(!s)return;if(a.length===1){const c=a[0];if(Array.isArray(s)&&typeof c=="number")return s.filter((f,p)=>p!==c);const{[c]:u,...h}=s;return h}const o=a.shift();if(typeof o=="string"&&typeof s=="object")return{...s,[o]:r(s[o])};if(typeof o=="number"&&Array.isArray(s)){if(o>=s.length)return s;const c=s.slice(0,o);return[...c.length?c:new Array(o),r(s[o]),...s.slice(o+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return r(t)}const _8=/^(\d+)$/gm,b8=/\.(\d+)(?=\.)/gm,S8=/^(\d+)\./gm,C8=/\.(\d+$)/gm,x8=/\.{2,}/gm,Od="__int__",il=`${Od}$1`;function lh(t){if(Array.isArray(t))return[...t];if(typeof t!="string")throw new Error("Path must be a string.");return t.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(_8,il).replace(b8,`.${il}.`).replace(S8,`${il}.`).replace(C8,`.${il}`).replace(x8,".").split(".").map(e=>{if(e.startsWith(Od)){const a=e.substring(Od.length),r=parseInt(a,10);return String(r)===a?r:a}return e})}function E8(t){return!(Array.isArray(t)&&t.length===0)}function Nd(t,e){const a=r=>r.validators.filter(Boolean).map(s=>({cause:s.cause,validate:s.fn}));return e.validationLogic({form:e.form,validators:e.validators,event:{type:t,async:!1},runValidation:a})}function Dd(t,e){const{asyncDebounceMs:a}=e,{onBlurAsyncDebounceMs:r,onChangeAsyncDebounceMs:s,onDynamicAsyncDebounceMs:o}=e.validators||{},c=a??0,u=h=>h.validators.filter(Boolean).map(f=>{const p=(f==null?void 0:f.cause)||t;let b=c;switch(p){case"change":b=s??c;break;case"blur":b=r??c;break;case"dynamic":b=o??c;break;case"submit":b=0;break}return t==="submit"&&(b=0),{cause:p,validate:f.fn,debounceMs:b}});return e.validationLogic({form:e.form,validators:e.validators,event:{type:t,async:!0},runValidation:u})}const kd=t=>!!t&&typeof t=="object"&&"fields"in t;function Xa(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[s,o]of t)if(!e.has(s)||!Object.is(o,e.get(s)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0}const a=Object.keys(t),r=Object.keys(e);if(a.length!==r.length)return!1;for(const s of a)if(!r.includes(s)||!Xa(t[s],e[s]))return!1;return!0}const $m=({newFormValidatorError:t,isPreviousErrorFromFormValidator:e,previousErrorValue:a})=>t?{newErrorValue:t,newSource:"form"}:e?{newErrorValue:void 0,newSource:void 0}:a?{newErrorValue:a,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},eg=({formLevelError:t,fieldLevelError:e})=>e?{newErrorValue:e,newSource:"field"}:t?{newErrorValue:t,newSource:"form"}:{newErrorValue:void 0,newSource:void 0},Qa=t=>{if(!t.validators)return t.runValidation({validators:[],form:t.form});const e=t.event.async,a=e?void 0:{fn:t.validators.onMount,cause:"mount"},r={fn:e?t.validators.onChangeAsync:t.validators.onChange,cause:"change"},s={fn:e?t.validators.onBlurAsync:t.validators.onBlur,cause:"blur"},o={fn:e?t.validators.onSubmitAsync:t.validators.onSubmit,cause:"submit"},c=e?void 0:{fn:()=>{},cause:"server"};switch(t.event.type){case"mount":return t.runValidation({validators:[a],form:t.form});case"submit":return t.runValidation({validators:[r,s,o,c],form:t.form});case"server":return t.runValidation({validators:[],form:t.form});case"blur":return t.runValidation({validators:[s,c],form:t.form});case"change":return t.runValidation({validators:[r,c],form:t.form});default:throw new Error(`Unknown validation event type: ${t.event.type}`)}};function T8(t){const e=new Map;for(const a of t){const r=[...a.path??[]].map(s=>{const o=typeof s=="object"?s.key:s;return typeof o=="number"?`[${o}]`:o}).join(".").replace(/\.\[/g,"[");e.set(r,(e.get(r)??[]).concat(a))}return Object.fromEntries(e)}const tg=t=>{const e=T8(t);return{form:e,fields:e}},tr={validate({value:t,validationSource:e},a){const r=a["~standard"].validate(t);if(r instanceof Promise)throw new Error("async function passed to sync validator");if(r.issues)return e==="field"?r.issues:tg(r.issues)},async validateAsync({value:t,validationSource:e},a){const r=await a["~standard"].validate(t);if(r.issues)return e==="field"?r.issues:tg(r.issues)}},Oy=t=>!!t&&"~standard"in t,Rl={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function al(t){function e(b,y,g,v){const C=r(b,y,g,v);({insert:()=>u(C,b,y),remove:()=>h(C),swap:()=>v!==void 0&&p(C,b,y,v),move:()=>v!==void 0&&f(C,b,y,v)})[g]()}function a(b,y){return`${b}[${y}]`}function r(b,y,g,v){const C=[a(b,y)];if(g==="swap")C.push(a(b,v));else if(g==="move"){const[E,O]=[Math.min(y,v),Math.max(y,v)];for(let x=E;x<=O;x++)C.push(a(b,x))}else{const E=t.getFieldValue(b),O=Array.isArray(E)?E.length:0;for(let x=y+1;x<O;x++)C.push(a(b,x))}return Object.keys(t.fieldInfo).filter(E=>C.some(O=>E.startsWith(O)))}function s(b,y){return b.replace(/\[(\d+)\]/,(g,v)=>{const C=parseInt(v,10);return`[${y==="up"?C+1:Math.max(0,C-1)}]`})}function o(b,y){(y==="up"?b:[...b].reverse()).forEach(v=>{const C=s(v.toString(),y),E=t.getFieldMeta(C);E?t.setFieldMeta(v,E):t.setFieldMeta(v,c())})}const c=()=>Rl,u=(b,y,g)=>{o(b,"down"),b.forEach(v=>{v.toString().startsWith(a(y,g))&&t.setFieldMeta(v,c())})},h=b=>{o(b,"up")},f=(b,y,g,v)=>{const C=new Map(Object.keys(t.fieldInfo).filter(E=>E.startsWith(a(y,g))).map(E=>[E,t.getFieldMeta(E)]));o(b,g<v?"up":"down"),Object.keys(t.fieldInfo).filter(E=>E.startsWith(a(y,v))).forEach(E=>{const O=E.replace(a(y,v),a(y,g)),x=C.get(O);x&&t.setFieldMeta(E,x)})},p=(b,y,g,v)=>{b.forEach(C=>{if(!C.toString().startsWith(a(y,g)))return;const E=C.toString().replace(a(y,g),a(y,v)),[O,x]=[t.getFieldMeta(C),t.getFieldMeta(E)];O&&t.setFieldMeta(E,O),x&&t.setFieldMeta(C,x)})};return{handleArrayFieldMetaShift:e}}function td(t){return{values:t.values??{},errorMap:t.errorMap??{},fieldMetaBase:t.fieldMetaBase??{},isSubmitted:t.isSubmitted??!1,isSubmitting:t.isSubmitting??!1,isValidating:t.isValidating??!1,submissionAttempts:t.submissionAttempts??0,isSubmitSuccessful:t.isSubmitSuccessful??!1,validationMetaMap:t.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class R8{constructor(e){var a;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{var u,h;const r=this.fieldMetaDerived.mount(),s=this.store.mount(),o=()=>{r(),s()};(h=(u=this.options.listeners)==null?void 0:u.onMount)==null||h.call(u,{formApi:this});const{onMount:c}=this.options.validators||{};return c&&this.validateSync("mount"),o},this.update=r=>{var h,f;if(!r)return;const s=this.options;this.options=r;const o=!!((f=(h=r.transform)==null?void 0:h.deps)!=null&&f.some((p,b)=>p!==this.prevTransformArray[b])),c=r.defaultValues&&!Xa(r.defaultValues,s.defaultValues)&&!this.state.isTouched,u=!Xa(r.defaultState,s.defaultState)&&!this.state.isTouched;!c&&!u&&!o||Pn(()=>{this.baseStore.setState(()=>td(Object.assign({},this.state,u?r.defaultState:{},c?{values:r.defaultValues}:{},o?{_force_re_eval:!this.state._force_re_eval}:{})))})},this.reset=(r,s)=>{const{fieldMeta:o}=this.state,c=this.resetFieldMeta(o);r&&!(s!=null&&s.keepDefaultValues)&&(this.options={...this.options,defaultValues:r}),this.baseStore.setState(()=>{var u;return td({...this.options.defaultState,values:r??this.options.defaultValues??((u=this.options.defaultState)==null?void 0:u.values),fieldMetaBase:c})})},this.validateAllFields=async r=>{const s=[];return Pn(()=>{Object.values(this.fieldInfo).forEach(c=>{if(!c.instance)return;const u=c.instance;s.push(Promise.resolve().then(()=>u.validate(r,{skipFormValidation:!0}))),c.instance.state.meta.isTouched||c.instance.setMeta(h=>({...h,isTouched:!0}))})}),(await Promise.all(s)).flat()},this.validateArrayFieldsStartingFrom=async(r,s,o)=>{const c=this.getFieldValue(r),u=Array.isArray(c)?Math.max(c.length-1,0):null,h=[`${r}[${s}]`];for(let y=s+1;y<=(u??0);y++)h.push(`${r}[${y}]`);const f=Object.keys(this.fieldInfo).filter(y=>h.some(g=>y.startsWith(g))),p=[];return Pn(()=>{f.forEach(y=>{p.push(Promise.resolve().then(()=>this.validateField(y,o)))})}),(await Promise.all(p)).flat()},this.validateField=(r,s)=>{var c;const o=(c=this.fieldInfo[r])==null?void 0:c.instance;return o?(o.state.meta.isTouched||o.setMeta(u=>({...u,isTouched:!0})),o.validate(s)):[]},this.validateSync=r=>{const s=Nd(r,{...this.options,form:this,validationLogic:this.options.validationLogic||Qa});let o=!1;const c={};return Pn(()=>{var f,p,b;for(const y of s){if(!y.validate)continue;const g=this.runValidator({validate:y.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:v,fieldErrors:C}=ml(g),E=Os(y.cause);for(const O of Object.keys(this.state.fieldMeta)){const x=this.getFieldMeta(O);if(!x)continue;const{errorMap:_,errorSourceMap:T}=x,M=C==null?void 0:C[O],{newErrorValue:k,newSource:G}=$m({newFormValidatorError:M,isPreviousErrorFromFormValidator:(T==null?void 0:T[E])==="form",previousErrorValue:_==null?void 0:_[E]});G==="form"&&(c[O]={...c[O],[E]:M}),(_==null?void 0:_[E])!==k&&this.setFieldMeta(O,R=>({...R,errorMap:{...R.errorMap,[E]:k},errorSourceMap:{...R.errorSourceMap,[E]:G}}))}((f=this.state.errorMap)==null?void 0:f[E])!==v&&this.baseStore.setState(O=>({...O,errorMap:{...O.errorMap,[E]:v}})),(v||C)&&(o=!0)}const u=Os("submit");(p=this.state.errorMap)!=null&&p[u]&&r!=="submit"&&!o&&this.baseStore.setState(y=>({...y,errorMap:{...y.errorMap,[u]:void 0}}));const h=Os("server");(b=this.state.errorMap)!=null&&b[h]&&r!=="server"&&!o&&this.baseStore.setState(y=>({...y,errorMap:{...y.errorMap,[h]:void 0}}))}),{hasErrored:o,fieldsErrorMap:c}},this.validateAsync=async r=>{const s=Dd(r,{...this.options,form:this,validationLogic:this.options.validationLogic||Qa});this.state.isFormValidating||this.baseStore.setState(f=>({...f,isFormValidating:!0}));const o=[];let c;for(const f of s){if(!f.validate)continue;const p=Os(f.cause),b=this.state.validationMetaMap[p];b==null||b.lastAbortController.abort();const y=new AbortController;this.state.validationMetaMap[p]={lastAbortController:y},o.push(new Promise(async g=>{let v;try{v=await new Promise((x,_)=>{setTimeout(async()=>{if(y.signal.aborted)return x(void 0);try{x(await this.runValidator({validate:f.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:y.signal},type:"validateAsync"}))}catch(T){_(T)}},f.debounceMs)})}catch(x){v=x}const{formError:C,fieldErrors:E}=ml(v);E&&(c=c?{...c,...E}:E);const O=Os(f.cause);for(const x of Object.keys(this.state.fieldMeta)){const _=this.getFieldMeta(x);if(!_)continue;const{errorMap:T,errorSourceMap:M}=_,k=c==null?void 0:c[x],{newErrorValue:G,newSource:R}=$m({newFormValidatorError:k,isPreviousErrorFromFormValidator:(M==null?void 0:M[O])==="form",previousErrorValue:T==null?void 0:T[O]});(T==null?void 0:T[O])!==G&&this.setFieldMeta(x,N=>({...N,errorMap:{...N.errorMap,[O]:G},errorSourceMap:{...N.errorSourceMap,[O]:R}}))}this.baseStore.setState(x=>({...x,errorMap:{...x.errorMap,[O]:C}})),g(c?{fieldErrors:c,errorMapKey:O}:void 0)}))}let u=[];const h={};if(o.length){u=await Promise.all(o);for(const f of u)if(f!=null&&f.fieldErrors){const{errorMapKey:p}=f;for(const[b,y]of Object.entries(f.fieldErrors)){const v={...h[b]||{},[p]:y};h[b]=v}}}return this.baseStore.setState(f=>({...f,isFormValidating:!1})),h},this.validate=r=>{const{hasErrored:s,fieldsErrorMap:o}=this.validateSync(r);return s&&!this.options.asyncAlways?o:this.validateAsync(r)},this.getFieldValue=r=>Ds(this.state.values,r),this.getFieldMeta=r=>this.state.fieldMeta[r],this.getFieldInfo=r=>{var s;return(s=this.fieldInfo)[r]||(s[r]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}})},this.setFieldMeta=(r,s)=>{this.baseStore.setState(o=>({...o,fieldMetaBase:{...o.fieldMetaBase,[r]:Yl(s,o.fieldMetaBase[r])}}))},this.resetFieldMeta=r=>Object.keys(r).reduce((s,o)=>{const c=o;return s[c]=Rl,s},{}),this.setFieldValue=(r,s,o)=>{const c=(o==null?void 0:o.dontUpdateMeta)??!1;Pn(()=>{c||this.setFieldMeta(r,u=>({...u,isTouched:!0,isDirty:!0,errorMap:{...u==null?void 0:u.errorMap,onMount:void 0}})),this.baseStore.setState(u=>({...u,values:nl(u.values,r,s)}))})},this.deleteField=r=>{const o=[...Object.keys(this.fieldInfo).filter(c=>{const u=r.toString();return c!==u&&c.startsWith(u)}),r];this.baseStore.setState(c=>{const u={...c};return o.forEach(h=>{u.values=v8(u.values,h),delete this.fieldInfo[h],delete u.fieldMetaBase[h]}),u})},this.pushFieldValue=(r,s,o)=>{this.setFieldValue(r,c=>[...Array.isArray(c)?c:[],s],o),this.validateField(r,"change")},this.insertFieldValue=async(r,s,o,c)=>{this.setFieldValue(r,u=>[...u.slice(0,s),o,...u.slice(s)],c),await this.validateField(r,"change"),al(this).handleArrayFieldMetaShift(r,s,"insert"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.replaceFieldValue=async(r,s,o,c)=>{this.setFieldValue(r,u=>u.map((h,f)=>f===s?o:h),c),await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.removeFieldValue=async(r,s,o)=>{const c=this.getFieldValue(r),u=Array.isArray(c)?Math.max(c.length-1,0):null;if(this.setFieldValue(r,h=>h.filter((f,p)=>p!==s),o),al(this).handleArrayFieldMetaShift(r,s,"remove"),u!==null){const h=`${r}[${u}]`;this.deleteField(h)}await this.validateField(r,"change"),await this.validateArrayFieldsStartingFrom(r,s,"change")},this.swapFieldValues=(r,s,o,c)=>{this.setFieldValue(r,u=>{const h=u[s],f=u[o];return nl(nl(u,`${s}`,f),`${o}`,h)},c),al(this).handleArrayFieldMetaShift(r,s,"swap",o),this.validateField(r,"change"),this.validateField(`${r}[${s}]`,"change"),this.validateField(`${r}[${o}]`,"change")},this.moveFieldValues=(r,s,o,c)=>{this.setFieldValue(r,u=>{const h=[...u];return h.splice(o,0,h.splice(s,1)[0]),h},c),al(this).handleArrayFieldMetaShift(r,s,"move",o),this.validateField(r,"change"),this.validateField(`${r}[${s}]`,"change"),this.validateField(`${r}[${o}]`,"change")},this.clearFieldValues=(r,s)=>{const o=this.getFieldValue(r),c=Array.isArray(o)?Math.max(o.length-1,0):null;if(this.setFieldValue(r,[],s),c!==null)for(let u=0;u<=c;u++){const h=`${r}[${u}]`;this.deleteField(h)}this.validateField(r,"change")},this.resetField=r=>{this.baseStore.setState(s=>({...s,fieldMetaBase:{...s.fieldMetaBase,[r]:Rl},values:this.options.defaultValues?nl(s.values,r,Ds(this.options.defaultValues,r)):s.values}))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce((r,[s,o])=>(Object.keys(o).length&&o.errors.length&&(r[s]={errors:o.errors,errorMap:o.errorMap}),r),{})}),this.parseValuesWithSchema=r=>tr.validate({value:this.state.values,validationSource:"form"},r),this.parseValuesWithSchemaAsync=r=>tr.validateAsync({value:this.state.values,validationSource:"form"},r),this.baseStore=new n_(td({...e==null?void 0:e.defaultState,values:(e==null?void 0:e.defaultValues)??((a=e==null?void 0:e.defaultState)==null?void 0:a.values)})),this.fieldMetaDerived=new sd({deps:[this.baseStore],fn:({prevDepVals:r,currDepVals:s,prevVal:o})=>{var b,y,g;const c=o,u=r==null?void 0:r[0],h=s[0];let f=0;const p={};for(const v of Object.keys(h.fieldMetaBase)){const C=h.fieldMetaBase[v],E=u==null?void 0:u.fieldMetaBase[v],O=c==null?void 0:c[v],x=Ds(h.values,v);let _=O==null?void 0:O.errors;if(!E||C.errorMap!==E.errorMap){_=Object.values(C.errorMap??{}).filter(R=>R!==void 0);const G=(b=this.getFieldInfo(v))==null?void 0:b.instance;G&&!G.options.disableErrorFlat&&(_=_==null?void 0:_.flat(1))}const T=!E8(_??[]),M=!C.isDirty,k=Xa(x,Ds(this.options.defaultValues,v))||Xa(x,(g=(y=this.getFieldInfo(v))==null?void 0:y.instance)==null?void 0:g.options.defaultValue);if(O&&O.isPristine===M&&O.isValid===T&&O.isDefaultValue===k&&O.errors===_&&C===E){p[v]=O,f++;continue}p[v]={...C,errors:_,isPristine:M,isValid:T,isDefaultValue:k}}return Object.keys(h.fieldMetaBase).length&&c&&f===Object.keys(h.fieldMetaBase).length?c:p}}),this.store=new sd({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:r,currDepVals:s,prevVal:o})=>{var K,I,ie,A;const c=o,u=r==null?void 0:r[0],h=s[0],f=s[1],p=Object.values(f).filter(Boolean),b=p.some(D=>D.isValidating),y=p.every(D=>D.isValid),g=p.some(D=>D.isTouched),v=p.some(D=>D.isBlurred),C=p.every(D=>D.isDefaultValue),E=g&&((K=h.errorMap)==null?void 0:K.onMount),O=p.some(D=>D.isDirty),x=!O,_=!!((I=h.errorMap)!=null&&I.onMount||p.some(D=>{var U;return(U=D==null?void 0:D.errorMap)==null?void 0:U.onMount})),T=!!b;let M=(c==null?void 0:c.errors)??[];(!u||h.errorMap!==u.errorMap)&&(M=Object.values(h.errorMap).reduce((D,U)=>U===void 0?D:U&&kd(U)?(D.push(U.form),D):(D.push(U),D),[]));const k=M.length===0,G=y&&k,R=this.options.canSubmitWhenInvalid??!1,N=h.submissionAttempts===0&&!g&&!_||!T&&!h.isSubmitting&&G||R;let P=h.errorMap;if(E&&(M=M.filter(D=>D!==h.errorMap.onMount),P=Object.assign(P,{onMount:void 0})),c&&u&&c.errorMap===P&&c.fieldMeta===this.fieldMetaDerived.state&&c.errors===M&&c.isFieldsValidating===b&&c.isFieldsValid===y&&c.isFormValid===k&&c.isValid===G&&c.canSubmit===N&&c.isTouched===g&&c.isBlurred===v&&c.isPristine===x&&c.isDefaultValue===C&&c.isDirty===O&&Xa(u,h))return c;let F={...h,errorMap:P,fieldMeta:this.fieldMetaDerived.state,errors:M,isFieldsValidating:b,isFieldsValid:y,isFormValid:k,isValid:G,canSubmit:N,isTouched:g,isBlurred:v,isPristine:x,isDefaultValue:C,isDirty:O};const j=((ie=this.options.transform)==null?void 0:ie.deps)??[];if(j.length!==this.prevTransformArray.length||j.some((D,U)=>D!==this.prevTransformArray[U])){const D=Object.assign({},this,{state:F});(A=this.options.transform)==null||A.fn(D),F=D.state,this.prevTransformArray=j}return F}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(e||{})}get state(){return this.store.state}get formId(){return this.options.formId}runValidator(e){return Oy(e.validate)?tr[e.type](e.value,e.validate):e.validate(e.value)}async handleSubmit(e){var s,o,c,u,h,f,p,b;if(this.baseStore.setState(y=>({...y,isSubmitted:!1,submissionAttempts:y.submissionAttempts+1,isSubmitSuccessful:!1})),Pn(()=>{Object.values(this.fieldInfo).forEach(y=>{y.instance&&(y.instance.state.meta.isTouched||y.instance.setMeta(g=>({...g,isTouched:!0})))})}),!this.state.canSubmit)return;const a=e??this.options.onSubmitMeta;this.baseStore.setState(y=>({...y,isSubmitting:!0}));const r=()=>{this.baseStore.setState(y=>({...y,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid){r(),(o=(s=this.options).onSubmitInvalid)==null||o.call(s,{value:this.state.values,formApi:this,meta:a});return}if(await this.validate("submit"),!this.state.isValid){r(),(u=(c=this.options).onSubmitInvalid)==null||u.call(c,{value:this.state.values,formApi:this,meta:a});return}Pn(()=>{Object.values(this.fieldInfo).forEach(y=>{var g,v,C;(C=(v=(g=y.instance)==null?void 0:g.options.listeners)==null?void 0:v.onSubmit)==null||C.call(v,{value:y.instance.state.value,fieldApi:y.instance})})}),(f=(h=this.options.listeners)==null?void 0:h.onSubmit)==null||f.call(h,{formApi:this,meta:a});try{await((b=(p=this.options).onSubmit)==null?void 0:b.call(p,{value:this.state.values,formApi:this,meta:a})),Pn(()=>{this.baseStore.setState(y=>({...y,isSubmitted:!0,isSubmitSuccessful:!0})),r()})}catch(y){throw this.baseStore.setState(g=>({...g,isSubmitSuccessful:!1})),r(),y}}setErrorMap(e){Pn(()=>{Object.entries(e).forEach(([a,r])=>{const s=a;if(kd(r)){const{formError:o,fieldErrors:c}=ml(r);for(const u of Object.keys(this.fieldInfo))this.getFieldMeta(u)&&this.setFieldMeta(u,f=>({...f,errorMap:{...f.errorMap,[s]:c==null?void 0:c[u]},errorSourceMap:{...f.errorSourceMap,[s]:"form"}}));this.baseStore.setState(u=>({...u,errorMap:{...u.errorMap,[s]:o}}))}else this.baseStore.setState(o=>({...o,errorMap:{...o.errorMap,[s]:r}}))})})}}function ml(t){if(t){if(kd(t)){const e=ml(t.form).formError,a=t.fields;return{formError:e,fieldErrors:a}}return{formError:t}}return{formError:void 0}}function Os(t){switch(t){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";case"change":default:return"onChange"}}class M8{constructor(e){this.options={},this.mount=()=>{var o,c;const a=this.store.mount();this.options.defaultValue!==void 0&&this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0});const r=this.getInfo();r.instance=this,this.update(this.options);const{onMount:s}=this.options.validators||{};if(s){const u=this.runValidator({validate:s,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});u&&this.setMeta(h=>({...h,errorMap:{...h==null?void 0:h.errorMap,onMount:u},errorSourceMap:{...h==null?void 0:h.errorSourceMap,onMount:"field"}}))}return(c=(o=this.options.listeners)==null?void 0:o.onMount)==null||c.call(o,{value:this.state.value,fieldApi:this}),a},this.update=a=>{this.options=a;const r=this.name!==a.name;if(this.name=a.name,this.state.value===void 0){const s=Ds(a.form.options.defaultValues,a.name),o=a.defaultValue??s;r?this.setValue(c=>c||o,{dontUpdateMeta:!0}):o!==void 0&&this.setValue(o,{dontUpdateMeta:!0})}this.form.getFieldMeta(this.name)===void 0&&this.setMeta(this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(a,r)=>{this.form.setFieldValue(this.name,a,r),this.triggerOnChangeListener(),this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=a=>this.form.setFieldMeta(this.name,a),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(a,r)=>{this.form.pushFieldValue(this.name,a,r),this.triggerOnChangeListener()},this.insertValue=(a,r,s)=>{this.form.insertFieldValue(this.name,a,r,s),this.triggerOnChangeListener()},this.replaceValue=(a,r,s)=>{this.form.replaceFieldValue(this.name,a,r,s),this.triggerOnChangeListener()},this.removeValue=(a,r)=>{this.form.removeFieldValue(this.name,a,r),this.triggerOnChangeListener()},this.swapValues=(a,r,s)=>{this.form.swapFieldValues(this.name,a,r,s),this.triggerOnChangeListener()},this.moveValue=(a,r,s)=>{this.form.moveFieldValues(this.name,a,r,s),this.triggerOnChangeListener()},this.clearValues=a=>{this.form.clearFieldValues(this.name,a),this.triggerOnChangeListener()},this.getLinkedFields=a=>{const r=Object.values(this.form.fieldInfo),s=[];for(const o of r){if(!o.instance)continue;const{onChangeListenTo:c,onBlurListenTo:u}=o.instance.options.validators||{};a==="change"&&(c!=null&&c.includes(this.name))&&s.push(o.instance),a==="blur"&&(u!=null&&u.includes(this.name))&&s.push(o.instance)}return s},this.validateSync=(a,r)=>{var f;const s=Nd(a,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||Qa}),c=this.getLinkedFields(a).reduce((p,b)=>{const y=Nd(a,{...b.options,form:b.form,validationLogic:b.form.options.validationLogic||Qa});return y.forEach(g=>{g.field=b}),p.concat(y)},[]);let u=!1;Pn(()=>{const p=(b,y)=>{var x;const g=rl(y.cause),v=y.validate?ng(b.runValidator({validate:y.validate,value:{value:b.store.state.value,validationSource:"field",fieldApi:b},type:"validate"})):void 0,C=r[g],{newErrorValue:E,newSource:O}=eg({formLevelError:C,fieldLevelError:v});((x=b.state.meta.errorMap)==null?void 0:x[g])!==E&&b.setMeta(_=>({..._,errorMap:{..._.errorMap,[g]:E},errorSourceMap:{..._.errorSourceMap,[g]:O}})),E&&(u=!0)};for(const b of s)p(this,b);for(const b of c)b.validate&&p(b.field,b)});const h=rl("submit");return(f=this.state.meta.errorMap)!=null&&f[h]&&a!=="submit"&&!u&&this.setMeta(p=>({...p,errorMap:{...p.errorMap,[h]:void 0},errorSourceMap:{...p.errorSourceMap,[h]:void 0}})),{hasErrored:u}},this.validateAsync=async(a,r)=>{const s=Dd(a,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||Qa}),o=await r,c=this.getLinkedFields(a),u=c.reduce((y,g)=>{const v=Dd(a,{...g.options,form:g.form,validationLogic:g.form.options.validationLogic||Qa});return v.forEach(C=>{C.field=g}),y.concat(v)},[]);this.state.meta.isValidating||this.setMeta(y=>({...y,isValidating:!0}));for(const y of c)y.setMeta(g=>({...g,isValidating:!0}));const h=[],f=[],p=(y,g,v)=>{const C=rl(g.cause),E=y.getInfo().validationMetaMap[C];E==null||E.lastAbortController.abort();const O=new AbortController;this.getInfo().validationMetaMap[C]={lastAbortController:O},v.push(new Promise(async x=>{var R;let _;try{_=await new Promise((N,P)=>{this.timeoutIds.validations[g.cause]&&clearTimeout(this.timeoutIds.validations[g.cause]),this.timeoutIds.validations[g.cause]=setTimeout(async()=>{if(O.signal.aborted)return N(void 0);try{N(await this.runValidator({validate:g.validate,value:{value:y.store.state.value,fieldApi:y,signal:O.signal,validationSource:"field"},type:"validateAsync"}))}catch(F){P(F)}},g.debounceMs)})}catch(N){_=N}if(O.signal.aborted)return x(void 0);const T=ng(_),M=(R=o[this.name])==null?void 0:R[C],{newErrorValue:k,newSource:G}=eg({formLevelError:M,fieldLevelError:T});y.setMeta(N=>({...N,errorMap:{...N==null?void 0:N.errorMap,[C]:k},errorSourceMap:{...N.errorSourceMap,[C]:G}})),x(k)}))};for(const y of s)y.validate&&p(this,y,h);for(const y of u)y.validate&&p(y.field,y,f);let b=[];(h.length||f.length)&&(b=await Promise.all(h),await Promise.all(f)),this.setMeta(y=>({...y,isValidating:!1}));for(const y of c)y.setMeta(g=>({...g,isValidating:!1}));return b.filter(Boolean)},this.validate=(a,r)=>{var u;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=r!=null&&r.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(a),{hasErrored:o}=this.validateSync(a,s[this.name]??{});if(o&&!this.options.asyncAlways)return(u=this.getInfo().validationMetaMap[rl(a)])==null||u.lastAbortController.abort(),this.state.meta.errors;const c=r!=null&&r.skipFormValidation?Promise.resolve({}):this.form.validateAsync(a);return this.validateAsync(a,c)},this.handleChange=a=>{this.setValue(a)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta(r=>({...r,isTouched:!0})),this.state.meta.isBlurred||this.setMeta(r=>({...r,isBlurred:!0})),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=a=>tr.validate({value:this.state.value,validationSource:"field"},a),this.parseValueWithSchemaAsync=a=>tr.validateAsync({value:this.state.value,validationSource:"field"},a),this.form=e.form,this.name=e.name,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new sd({deps:[this.form.store],fn:()=>{const a=this.form.getFieldValue(this.name),r=this.form.getFieldMeta(this.name)??{...Rl,...e.defaultMeta};return{value:a,meta:r}}}),this.options=e}get state(){return this.store.state}runValidator(e){return Oy(e.validate)?tr[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.setMeta(a=>({...a,errorMap:{...a.errorMap,...e}}))}triggerOnBlurListener(){var r,s,o,c,u,h;const e=(r=this.form.options.listeners)==null?void 0:r.onBlurDebounceMs;e&&e>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout(()=>{var f,p;(p=(f=this.form.options.listeners)==null?void 0:f.onBlur)==null||p.call(f,{formApi:this.form,fieldApi:this})},e)):(o=(s=this.form.options.listeners)==null?void 0:s.onBlur)==null||o.call(s,{formApi:this.form,fieldApi:this});const a=(c=this.options.listeners)==null?void 0:c.onBlurDebounceMs;a&&a>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout(()=>{var f,p;(p=(f=this.options.listeners)==null?void 0:f.onBlur)==null||p.call(f,{value:this.state.value,fieldApi:this})},a)):(h=(u=this.options.listeners)==null?void 0:u.onBlur)==null||h.call(u,{value:this.state.value,fieldApi:this})}triggerOnChangeListener(){var r,s,o,c,u,h;const e=(r=this.form.options.listeners)==null?void 0:r.onChangeDebounceMs;e&&e>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout(()=>{var f,p;(p=(f=this.form.options.listeners)==null?void 0:f.onChange)==null||p.call(f,{formApi:this.form,fieldApi:this})},e)):(o=(s=this.form.options.listeners)==null?void 0:s.onChange)==null||o.call(s,{formApi:this.form,fieldApi:this});const a=(c=this.options.listeners)==null?void 0:c.onChangeDebounceMs;a&&a>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout(()=>{var f,p;(p=(f=this.options.listeners)==null?void 0:f.onChange)==null||p.call(f,{value:this.state.value,fieldApi:this})},a)):(h=(u=this.options.listeners)==null?void 0:u.onChange)==null||h.call(u,{value:this.state.value,fieldApi:this})}}function ng(t){if(t)return t}function rl(t){switch(t){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";case"change":default:return"onChange"}}const Ml=typeof window<"u"?q.useLayoutEffect:q.useEffect;function A8(t){const[e]=q.useState(()=>{const r=new M8({...t,form:t.form,name:t.name});return r.Field=Ny,r});return Ml(e.mount,[e]),Ml(()=>{e.update(t)}),fg(e.store,t.mode==="array"?a=>[a.meta,Object.keys(a.value??[]).length]:void 0),e}const Ny=({children:t,...e})=>{const a=A8(e),r=q.useMemo(()=>Yl(t,a),[t,a,a.state.value,a.state.meta]);return ne.jsx(ne.Fragment,{children:r})};function O8({form:t,selector:e,children:a}){const r=fg(t.store,e);return Yl(a,r)}function N8(t){const[e]=q.useState(()=>{const a=new R8(t),r=a;return r.Field=function(o){return ne.jsx(Ny,{...o,form:a})},r.Subscribe=function(o){return ne.jsx(O8,{form:a,selector:o.selector,children:o.children})},r});return Ml(e.mount,[]),Ml(()=>{e.update(t)}),e}var Be;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function a(s){throw new Error}t.assertNever=a,t.arrayToEnum=s=>{const o={};for(const c of s)o[c]=c;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),c={};for(const u of o)c[u]=s[u];return t.objectValues(c)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&o.push(c);return o},t.find=(s,o)=>{for(const c of s)if(o(c))return c},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(Be||(Be={}));var Pd;(function(t){t.mergeShapes=(e,a)=>({...e,...a})})(Pd||(Pd={}));const pe=Be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ti=t=>{switch(typeof t){case"undefined":return pe.undefined;case"string":return pe.string;case"number":return Number.isNaN(t)?pe.nan:pe.number;case"boolean":return pe.boolean;case"function":return pe.function;case"bigint":return pe.bigint;case"symbol":return pe.symbol;case"object":return Array.isArray(t)?pe.array:t===null?pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pe.promise:typeof Map<"u"&&t instanceof Map?pe.map:typeof Set<"u"&&t instanceof Set?pe.set:typeof Date<"u"&&t instanceof Date?pe.date:pe.object;default:return pe.unknown}},oe=Be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),D8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class on extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=e}format(e){const a=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)r._errors.push(a(c));else{let u=r,h=0;for(;h<c.path.length;){const f=c.path[h];h===c.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(a(c))):u[f]=u[f]||{_errors:[]},u=u[f],h++}}};return s(this),r}static assert(e){if(!(e instanceof on))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=a=>a.message){const a={},r=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];a[o]=a[o]||[],a[o].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}on.create=t=>new on(t);const rr=(t,e)=>{let a;switch(t.code){case oe.invalid_type:t.received===pe.undefined?a="Required":a=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(t.expected,Be.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:a=`Unrecognized key(s) in object: ${Be.joinValues(t.keys,", ")}`;break;case oe.invalid_union:a="Invalid input";break;case oe.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${Be.joinValues(t.options)}`;break;case oe.invalid_enum_value:a=`Invalid enum value. Expected ${Be.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:a="Invalid function arguments";break;case oe.invalid_return_type:a="Invalid function return type";break;case oe.invalid_date:a="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(a=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?a=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?a=`Invalid input: must end with "${t.validation.endsWith}"`:Be.assertNever(t.validation):t.validation!=="regex"?a=`Invalid ${t.validation}`:a="Invalid";break;case oe.too_small:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?a=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:a="Invalid input";break;case oe.too_big:t.type==="array"?a=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?a=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?a=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?a=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?a=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:a="Invalid input";break;case oe.custom:a="Invalid input";break;case oe.invalid_intersection_types:a="Intersection results could not be merged";break;case oe.not_multiple_of:a=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:a="Number must be finite";break;default:a=e.defaultError,Be.assertNever(t)}return{message:a}};let Dy=rr;function k8(t){Dy=t}function Al(){return Dy}const Ol=t=>{const{data:e,path:a,errorMaps:r,issueData:s}=t,o=[...a,...s.path||[]],c={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let u="";const h=r.filter(f=>!!f).slice().reverse();for(const f of h)u=f(c,{data:e,defaultError:u}).message;return{...s,path:o,message:u}},P8=[];function de(t,e){const a=Al(),r=Ol({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a,a===rr?void 0:rr].filter(s=>!!s)});t.common.issues.push(r)}class Lt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,a){const r=[];for(const s of a){if(s.status==="aborted")return Ee;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,a){const r=[];for(const s of a){const o=await s.key,c=await s.value;r.push({key:o,value:c})}return Lt.mergeObjectSync(e,r)}static mergeObjectSync(e,a){const r={};for(const s of a){const{key:o,value:c}=s;if(o.status==="aborted"||c.status==="aborted")return Ee;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const Ee=Object.freeze({status:"aborted"}),Wa=t=>({status:"dirty",value:t}),Bt=t=>({status:"valid",value:t}),wd=t=>t.status==="aborted",zd=t=>t.status==="dirty",ra=t=>t.status==="valid",Vs=t=>typeof Promise<"u"&&t instanceof Promise;var _e;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_e||(_e={}));class Un{constructor(e,a,r,s){this._cachedPath=[],this.parent=e,this.data=a,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ig=(t,e)=>{if(ra(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new on(t.common.issues);return this._error=a,this._error}}};function Ae(t){if(!t)return{};const{errorMap:e,invalid_type_error:a,required_error:r,description:s}=t;if(e&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(c,u)=>{const{message:h}=t;return c.code==="invalid_enum_value"?{message:h??u.defaultError}:typeof u.data>"u"?{message:h??r??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:h??a??u.defaultError}},description:s}}class De{get description(){return this._def.description}_getType(e){return ti(e.data)}_getOrReturnCtx(e,a){return a||{common:e.parent.common,data:e.data,parsedType:ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Lt,ctx:{common:e.parent.common,data:e.data,parsedType:ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const a=this._parse(e);if(Vs(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(e){const a=this._parse(e);return Promise.resolve(a)}parse(e,a){const r=this.safeParse(e,a);if(r.success)return r.data;throw r.error}safeParse(e,a){const r={common:{issues:[],async:(a==null?void 0:a.async)??!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ti(e)},s=this._parseSync({data:e,path:r.path,parent:r});return ig(r,s)}"~validate"(e){var r,s;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ti(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:a});return ra(o)?{value:o.value}:{issues:a.common.issues}}catch(o){(s=(r=o==null?void 0:o.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(o=>ra(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(e,a){const r=await this.safeParseAsync(e,a);if(r.success)return r.data;throw r.error}async safeParseAsync(e,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ti(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(Vs(s)?s:Promise.resolve(s));return ig(r,o)}refine(e,a){const r=s=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(s):a;return this._refinement((s,o)=>{const c=e(s),u=()=>o.addIssue({code:oe.custom,...r(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(h=>h?!0:(u(),!1)):c?!0:(u(),!1)})}refinement(e,a){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof a=="function"?a(r,s):a),!1))}_refinement(e){return new Mn({schema:this,typeName:Te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return zn.create(this,this._def)}nullable(){return zi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rn.create(this)}promise(){return or.create(this,this._def)}or(e){return Hs.create([this,e],this._def)}and(e){return qs.create(this,e,this._def)}transform(e){return new Mn({...Ae(this._def),schema:this,typeName:Te.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const a=typeof e=="function"?e:()=>e;return new Qs({...Ae(this._def),innerType:this,defaultValue:a,typeName:Te.ZodDefault})}brand(){return new ch({typeName:Te.ZodBranded,type:this,...Ae(this._def)})}catch(e){const a=typeof e=="function"?e:()=>e;return new Ws({...Ae(this._def),innerType:this,catchValue:a,typeName:Te.ZodCatch})}describe(e){const a=this.constructor;return new a({...this._def,description:e})}pipe(e){return $s.create(this,e)}readonly(){return Js.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const w8=/^c[^\s-]{8,}$/i,z8=/^[0-9a-z]+$/,U8=/^[0-9A-HJKMNP-TV-Z]{26}$/i,L8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,G8=/^[a-z0-9_-]{21}$/i,F8=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,V8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,B8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,j8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nd;const I8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,H8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,q8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Y8=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,K8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,X8=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ky="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Z8=new RegExp(`^${ky}$`);function Py(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const a=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${a}`}function Q8(t){return new RegExp(`^${Py(t)}$`)}function wy(t){let e=`${ky}T${Py(t)}`;const a=[];return a.push(t.local?"Z?":"Z"),t.offset&&a.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${a.join("|")})`,new RegExp(`^${e}$`)}function W8(t,e){return!!((e==="v4"||!e)&&I8.test(t)||(e==="v6"||!e)&&q8.test(t))}function J8(t,e){if(!F8.test(t))return!1;try{const[a]=t.split(".");if(!a)return!1;const r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function $8(t,e){return!!((e==="v4"||!e)&&H8.test(t)||(e==="v6"||!e)&&Y8.test(t))}class Tn extends De{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pe.string){const o=this._getOrReturnCtx(e);return de(o,{code:oe.invalid_type,expected:pe.string,received:o.parsedType}),Ee}const r=new Lt;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),de(s,{code:oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),de(s,{code:oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,u=e.data.length<o.value;(c||u)&&(s=this._getOrReturnCtx(e,s),c?de(s,{code:oe.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&de(s,{code:oe.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")B8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"email",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")nd||(nd=new RegExp(j8,"u")),nd.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"emoji",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")L8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"uuid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")G8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"nanoid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")w8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"cuid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")z8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"cuid2",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")U8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"ulid",code:oe.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),de(s,{validation:"url",code:oe.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"regex",code:oe.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),de(s,{code:oe.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),de(s,{code:oe.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),de(s,{code:oe.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?wy(o).test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{code:oe.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Z8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{code:oe.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?Q8(o).test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{code:oe.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?V8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"duration",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?W8(e.data,o.version)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"ip",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?J8(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"jwt",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?$8(e.data,o.version)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"cidr",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?K8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"base64",code:oe.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?X8.test(e.data)||(s=this._getOrReturnCtx(e,s),de(s,{validation:"base64url",code:oe.invalid_string,message:o.message}),r.dirty()):Be.assertNever(o);return{status:r.value,value:e.data}}_regex(e,a,r){return this.refinement(s=>e.test(s),{validation:a,code:oe.invalid_string,..._e.errToObj(r)})}_addCheck(e){return new Tn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._e.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._e.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._e.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._e.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._e.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._e.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._e.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._e.errToObj(e)})}regex(e,a){return this._addCheck({kind:"regex",regex:e,..._e.errToObj(a)})}includes(e,a){return this._addCheck({kind:"includes",value:e,position:a==null?void 0:a.position,..._e.errToObj(a==null?void 0:a.message)})}startsWith(e,a){return this._addCheck({kind:"startsWith",value:e,..._e.errToObj(a)})}endsWith(e,a){return this._addCheck({kind:"endsWith",value:e,..._e.errToObj(a)})}min(e,a){return this._addCheck({kind:"min",value:e,..._e.errToObj(a)})}max(e,a){return this._addCheck({kind:"max",value:e,..._e.errToObj(a)})}length(e,a){return this._addCheck({kind:"length",value:e,..._e.errToObj(a)})}nonempty(e){return this.min(1,_e.errToObj(e))}trim(){return new Tn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Tn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Tn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxLength(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}Tn.create=t=>new Tn({checks:[],typeName:Te.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ae(t)});function eS(t,e){const a=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=a>r?a:r,o=Number.parseInt(t.toFixed(s).replace(".","")),c=Number.parseInt(e.toFixed(s).replace(".",""));return o%c/10**s}class ki extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pe.number){const o=this._getOrReturnCtx(e);return de(o,{code:oe.invalid_type,expected:pe.number,received:o.parsedType}),Ee}let r;const s=new Lt;for(const o of this._def.checks)o.kind==="int"?Be.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?eS(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),de(r,{code:oe.not_finite,message:o.message}),s.dirty()):Be.assertNever(o);return{status:s.value,value:e.data}}gte(e,a){return this.setLimit("min",e,!0,_e.toString(a))}gt(e,a){return this.setLimit("min",e,!1,_e.toString(a))}lte(e,a){return this.setLimit("max",e,!0,_e.toString(a))}lt(e,a){return this.setLimit("max",e,!1,_e.toString(a))}setLimit(e,a,r,s){return new ki({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:r,message:_e.toString(s)}]})}_addCheck(e){return new ki({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_e.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(a)})}finite(e){return this._addCheck({kind:"finite",message:_e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_e.toString(e)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Be.isInteger(e.value))}get isFinite(){let e=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(a)&&Number.isFinite(e)}}ki.create=t=>new ki({checks:[],typeName:Te.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ae(t)});class Pi extends De{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pe.bigint)return this._getInvalidInput(e);let r;const s=new Lt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),de(r,{code:oe.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):Be.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const a=this._getOrReturnCtx(e);return de(a,{code:oe.invalid_type,expected:pe.bigint,received:a.parsedType}),Ee}gte(e,a){return this.setLimit("min",e,!0,_e.toString(a))}gt(e,a){return this.setLimit("min",e,!1,_e.toString(a))}lte(e,a){return this.setLimit("max",e,!0,_e.toString(a))}lt(e,a){return this.setLimit("max",e,!1,_e.toString(a))}setLimit(e,a,r,s){return new Pi({...this._def,checks:[...this._def.checks,{kind:e,value:a,inclusive:r,message:_e.toString(s)}]})}_addCheck(e){return new Pi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_e.toString(e)})}multipleOf(e,a){return this._addCheck({kind:"multipleOf",value:e,message:_e.toString(a)})}get minValue(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e}get maxValue(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e}}Pi.create=t=>new Pi({checks:[],typeName:Te.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ae(t)});class Bs extends De{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pe.boolean){const r=this._getOrReturnCtx(e);return de(r,{code:oe.invalid_type,expected:pe.boolean,received:r.parsedType}),Ee}return Bt(e.data)}}Bs.create=t=>new Bs({typeName:Te.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ae(t)});class sa extends De{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pe.date){const o=this._getOrReturnCtx(e);return de(o,{code:oe.invalid_type,expected:pe.date,received:o.parsedType}),Ee}if(Number.isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return de(o,{code:oe.invalid_date}),Ee}const r=new Lt;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),de(s,{code:oe.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),de(s,{code:oe.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Be.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new sa({...this._def,checks:[...this._def.checks,e]})}min(e,a){return this._addCheck({kind:"min",value:e.getTime(),message:_e.toString(a)})}max(e,a){return this._addCheck({kind:"max",value:e.getTime(),message:_e.toString(a)})}get minDate(){let e=null;for(const a of this._def.checks)a.kind==="min"&&(e===null||a.value>e)&&(e=a.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const a of this._def.checks)a.kind==="max"&&(e===null||a.value<e)&&(e=a.value);return e!=null?new Date(e):null}}sa.create=t=>new sa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Te.ZodDate,...Ae(t)});class Nl extends De{_parse(e){if(this._getType(e)!==pe.symbol){const r=this._getOrReturnCtx(e);return de(r,{code:oe.invalid_type,expected:pe.symbol,received:r.parsedType}),Ee}return Bt(e.data)}}Nl.create=t=>new Nl({typeName:Te.ZodSymbol,...Ae(t)});class js extends De{_parse(e){if(this._getType(e)!==pe.undefined){const r=this._getOrReturnCtx(e);return de(r,{code:oe.invalid_type,expected:pe.undefined,received:r.parsedType}),Ee}return Bt(e.data)}}js.create=t=>new js({typeName:Te.ZodUndefined,...Ae(t)});class Is extends De{_parse(e){if(this._getType(e)!==pe.null){const r=this._getOrReturnCtx(e);return de(r,{code:oe.invalid_type,expected:pe.null,received:r.parsedType}),Ee}return Bt(e.data)}}Is.create=t=>new Is({typeName:Te.ZodNull,...Ae(t)});class sr extends De{constructor(){super(...arguments),this._any=!0}_parse(e){return Bt(e.data)}}sr.create=t=>new sr({typeName:Te.ZodAny,...Ae(t)});class ta extends De{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bt(e.data)}}ta.create=t=>new ta({typeName:Te.ZodUnknown,...Ae(t)});class ii extends De{_parse(e){const a=this._getOrReturnCtx(e);return de(a,{code:oe.invalid_type,expected:pe.never,received:a.parsedType}),Ee}}ii.create=t=>new ii({typeName:Te.ZodNever,...Ae(t)});class Dl extends De{_parse(e){if(this._getType(e)!==pe.undefined){const r=this._getOrReturnCtx(e);return de(r,{code:oe.invalid_type,expected:pe.void,received:r.parsedType}),Ee}return Bt(e.data)}}Dl.create=t=>new Dl({typeName:Te.ZodVoid,...Ae(t)});class Rn extends De{_parse(e){const{ctx:a,status:r}=this._processInputParams(e),s=this._def;if(a.parsedType!==pe.array)return de(a,{code:oe.invalid_type,expected:pe.array,received:a.parsedType}),Ee;if(s.exactLength!==null){const c=a.data.length>s.exactLength.value,u=a.data.length<s.exactLength.value;(c||u)&&(de(a,{code:c?oe.too_big:oe.too_small,minimum:u?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&a.data.length<s.minLength.value&&(de(a,{code:oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&a.data.length>s.maxLength.value&&(de(a,{code:oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((c,u)=>s.type._parseAsync(new Un(a,c,a.path,u)))).then(c=>Lt.mergeArray(r,c));const o=[...a.data].map((c,u)=>s.type._parseSync(new Un(a,c,a.path,u)));return Lt.mergeArray(r,o)}get element(){return this._def.type}min(e,a){return new Rn({...this._def,minLength:{value:e,message:_e.toString(a)}})}max(e,a){return new Rn({...this._def,maxLength:{value:e,message:_e.toString(a)}})}length(e,a){return new Rn({...this._def,exactLength:{value:e,message:_e.toString(a)}})}nonempty(e){return this.min(1,e)}}Rn.create=(t,e)=>new Rn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Te.ZodArray,...Ae(e)});function Za(t){if(t instanceof nt){const e={};for(const a in t.shape){const r=t.shape[a];e[a]=zn.create(Za(r))}return new nt({...t._def,shape:()=>e})}else return t instanceof Rn?new Rn({...t._def,type:Za(t.element)}):t instanceof zn?zn.create(Za(t.unwrap())):t instanceof zi?zi.create(Za(t.unwrap())):t instanceof Ln?Ln.create(t.items.map(e=>Za(e))):t}class nt extends De{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),a=Be.objectKeys(e);return this._cached={shape:e,keys:a},this._cached}_parse(e){if(this._getType(e)!==pe.object){const f=this._getOrReturnCtx(e);return de(f,{code:oe.invalid_type,expected:pe.object,received:f.parsedType}),Ee}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof ii&&this._def.unknownKeys==="strip"))for(const f in s.data)c.includes(f)||u.push(f);const h=[];for(const f of c){const p=o[f],b=s.data[f];h.push({key:{status:"valid",value:f},value:p._parse(new Un(s,b,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof ii){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of u)h.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(f==="strict")u.length>0&&(de(s,{code:oe.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of u){const b=s.data[p];h.push({key:{status:"valid",value:p},value:f._parse(new Un(s,b,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of h){const b=await p.key,y=await p.value;f.push({key:b,value:y,alwaysSet:p.alwaysSet})}return f}).then(f=>Lt.mergeObjectSync(r,f)):Lt.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return _e.errToObj,new nt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(a,r)=>{var o,c;const s=((c=(o=this._def).errorMap)==null?void 0:c.call(o,a,r).message)??r.defaultError;return a.code==="unrecognized_keys"?{message:_e.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new nt({...this._def,unknownKeys:"strip"})}passthrough(){return new nt({...this._def,unknownKeys:"passthrough"})}extend(e){return new nt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Te.ZodObject})}setKey(e,a){return this.augment({[e]:a})}catchall(e){return new nt({...this._def,catchall:e})}pick(e){const a={};for(const r of Be.objectKeys(e))e[r]&&this.shape[r]&&(a[r]=this.shape[r]);return new nt({...this._def,shape:()=>a})}omit(e){const a={};for(const r of Be.objectKeys(this.shape))e[r]||(a[r]=this.shape[r]);return new nt({...this._def,shape:()=>a})}deepPartial(){return Za(this)}partial(e){const a={};for(const r of Be.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?a[r]=s:a[r]=s.optional()}return new nt({...this._def,shape:()=>a})}required(e){const a={};for(const r of Be.objectKeys(this.shape))if(e&&!e[r])a[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof zn;)o=o._def.innerType;a[r]=o}return new nt({...this._def,shape:()=>a})}keyof(){return zy(Be.objectKeys(this.shape))}}nt.create=(t,e)=>new nt({shape:()=>t,unknownKeys:"strip",catchall:ii.create(),typeName:Te.ZodObject,...Ae(e)});nt.strictCreate=(t,e)=>new nt({shape:()=>t,unknownKeys:"strict",catchall:ii.create(),typeName:Te.ZodObject,...Ae(e)});nt.lazycreate=(t,e)=>new nt({shape:t,unknownKeys:"strip",catchall:ii.create(),typeName:Te.ZodObject,...Ae(e)});class Hs extends De{_parse(e){const{ctx:a}=this._processInputParams(e),r=this._def.options;function s(o){for(const u of o)if(u.result.status==="valid")return u.result;for(const u of o)if(u.result.status==="dirty")return a.common.issues.push(...u.ctx.common.issues),u.result;const c=o.map(u=>new on(u.ctx.common.issues));return de(a,{code:oe.invalid_union,unionErrors:c}),Ee}if(a.common.async)return Promise.all(r.map(async o=>{const c={...a,common:{...a.common,issues:[]},parent:null};return{result:await o._parseAsync({data:a.data,path:a.path,parent:c}),ctx:c}})).then(s);{let o;const c=[];for(const h of r){const f={...a,common:{...a.common,issues:[]},parent:null},p=h._parseSync({data:a.data,path:a.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!o&&(o={result:p,ctx:f}),f.common.issues.length&&c.push(f.common.issues)}if(o)return a.common.issues.push(...o.ctx.common.issues),o.result;const u=c.map(h=>new on(h));return de(a,{code:oe.invalid_union,unionErrors:u}),Ee}}get options(){return this._def.options}}Hs.create=(t,e)=>new Hs({options:t,typeName:Te.ZodUnion,...Ae(e)});const ei=t=>t instanceof Ks?ei(t.schema):t instanceof Mn?ei(t.innerType()):t instanceof Xs?[t.value]:t instanceof wi?t.options:t instanceof Zs?Be.objectValues(t.enum):t instanceof Qs?ei(t._def.innerType):t instanceof js?[void 0]:t instanceof Is?[null]:t instanceof zn?[void 0,...ei(t.unwrap())]:t instanceof zi?[null,...ei(t.unwrap())]:t instanceof ch||t instanceof Js?ei(t.unwrap()):t instanceof Ws?ei(t._def.innerType):[];class Kl extends De{_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==pe.object)return de(a,{code:oe.invalid_type,expected:pe.object,received:a.parsedType}),Ee;const r=this.discriminator,s=a.data[r],o=this.optionsMap.get(s);return o?a.common.async?o._parseAsync({data:a.data,path:a.path,parent:a}):o._parseSync({data:a.data,path:a.path,parent:a}):(de(a,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ee)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,a,r){const s=new Map;for(const o of a){const c=ei(o.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of c){if(s.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);s.set(u,o)}}return new Kl({typeName:Te.ZodDiscriminatedUnion,discriminator:e,options:a,optionsMap:s,...Ae(r)})}}function Ud(t,e){const a=ti(t),r=ti(e);if(t===e)return{valid:!0,data:t};if(a===pe.object&&r===pe.object){const s=Be.objectKeys(e),o=Be.objectKeys(t).filter(u=>s.indexOf(u)!==-1),c={...t,...e};for(const u of o){const h=Ud(t[u],e[u]);if(!h.valid)return{valid:!1};c[u]=h.data}return{valid:!0,data:c}}else if(a===pe.array&&r===pe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const c=t[o],u=e[o],h=Ud(c,u);if(!h.valid)return{valid:!1};s.push(h.data)}return{valid:!0,data:s}}else return a===pe.date&&r===pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qs extends De{_parse(e){const{status:a,ctx:r}=this._processInputParams(e),s=(o,c)=>{if(wd(o)||wd(c))return Ee;const u=Ud(o.value,c.value);return u.valid?((zd(o)||zd(c))&&a.dirty(),{status:a.value,value:u.data}):(de(r,{code:oe.invalid_intersection_types}),Ee)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>s(o,c)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qs.create=(t,e,a)=>new qs({left:t,right:e,typeName:Te.ZodIntersection,...Ae(a)});class Ln extends De{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.array)return de(r,{code:oe.invalid_type,expected:pe.array,received:r.parsedType}),Ee;if(r.data.length<this._def.items.length)return de(r,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ee;!this._def.rest&&r.data.length>this._def.items.length&&(de(r,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const o=[...r.data].map((c,u)=>{const h=this._def.items[u]||this._def.rest;return h?h._parse(new Un(r,c,r.path,u)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>Lt.mergeArray(a,c)):Lt.mergeArray(a,o)}get items(){return this._def.items}rest(e){return new Ln({...this._def,rest:e})}}Ln.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ln({items:t,typeName:Te.ZodTuple,rest:null,...Ae(e)})};class Ys extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.object)return de(r,{code:oe.invalid_type,expected:pe.object,received:r.parsedType}),Ee;const s=[],o=this._def.keyType,c=this._def.valueType;for(const u in r.data)s.push({key:o._parse(new Un(r,u,r.path,u)),value:c._parse(new Un(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Lt.mergeObjectAsync(a,s):Lt.mergeObjectSync(a,s)}get element(){return this._def.valueType}static create(e,a,r){return a instanceof De?new Ys({keyType:e,valueType:a,typeName:Te.ZodRecord,...Ae(r)}):new Ys({keyType:Tn.create(),valueType:e,typeName:Te.ZodRecord,...Ae(a)})}}class kl extends De{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.map)return de(r,{code:oe.invalid_type,expected:pe.map,received:r.parsedType}),Ee;const s=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([u,h],f)=>({key:s._parse(new Un(r,u,r.path,[f,"key"])),value:o._parse(new Un(r,h,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const h of c){const f=await h.key,p=await h.value;if(f.status==="aborted"||p.status==="aborted")return Ee;(f.status==="dirty"||p.status==="dirty")&&a.dirty(),u.set(f.value,p.value)}return{status:a.value,value:u}})}else{const u=new Map;for(const h of c){const f=h.key,p=h.value;if(f.status==="aborted"||p.status==="aborted")return Ee;(f.status==="dirty"||p.status==="dirty")&&a.dirty(),u.set(f.value,p.value)}return{status:a.value,value:u}}}}kl.create=(t,e,a)=>new kl({valueType:e,keyType:t,typeName:Te.ZodMap,...Ae(a)});class oa extends De{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.set)return de(r,{code:oe.invalid_type,expected:pe.set,received:r.parsedType}),Ee;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(de(r,{code:oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),a.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(de(r,{code:oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),a.dirty());const o=this._def.valueType;function c(h){const f=new Set;for(const p of h){if(p.status==="aborted")return Ee;p.status==="dirty"&&a.dirty(),f.add(p.value)}return{status:a.value,value:f}}const u=[...r.data.values()].map((h,f)=>o._parse(new Un(r,h,r.path,f)));return r.common.async?Promise.all(u).then(h=>c(h)):c(u)}min(e,a){return new oa({...this._def,minSize:{value:e,message:_e.toString(a)}})}max(e,a){return new oa({...this._def,maxSize:{value:e,message:_e.toString(a)}})}size(e,a){return this.min(e,a).max(e,a)}nonempty(e){return this.min(1,e)}}oa.create=(t,e)=>new oa({valueType:t,minSize:null,maxSize:null,typeName:Te.ZodSet,...Ae(e)});class nr extends De{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==pe.function)return de(a,{code:oe.invalid_type,expected:pe.function,received:a.parsedType}),Ee;function r(u,h){return Ol({data:u,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Al(),rr].filter(f=>!!f),issueData:{code:oe.invalid_arguments,argumentsError:h}})}function s(u,h){return Ol({data:u,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,Al(),rr].filter(f=>!!f),issueData:{code:oe.invalid_return_type,returnTypeError:h}})}const o={errorMap:a.common.contextualErrorMap},c=a.data;if(this._def.returns instanceof or){const u=this;return Bt(async function(...h){const f=new on([]),p=await u._def.args.parseAsync(h,o).catch(g=>{throw f.addIssue(r(h,g)),f}),b=await Reflect.apply(c,this,p);return await u._def.returns._def.type.parseAsync(b,o).catch(g=>{throw f.addIssue(s(b,g)),f})})}else{const u=this;return Bt(function(...h){const f=u._def.args.safeParse(h,o);if(!f.success)throw new on([r(h,f.error)]);const p=Reflect.apply(c,this,f.data),b=u._def.returns.safeParse(p,o);if(!b.success)throw new on([s(p,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new nr({...this._def,args:Ln.create(e).rest(ta.create())})}returns(e){return new nr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,a,r){return new nr({args:e||Ln.create([]).rest(ta.create()),returns:a||ta.create(),typeName:Te.ZodFunction,...Ae(r)})}}class Ks extends De{get schema(){return this._def.getter()}_parse(e){const{ctx:a}=this._processInputParams(e);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Ks.create=(t,e)=>new Ks({getter:t,typeName:Te.ZodLazy,...Ae(e)});class Xs extends De{_parse(e){if(e.data!==this._def.value){const a=this._getOrReturnCtx(e);return de(a,{received:a.data,code:oe.invalid_literal,expected:this._def.value}),Ee}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xs.create=(t,e)=>new Xs({value:t,typeName:Te.ZodLiteral,...Ae(e)});function zy(t,e){return new wi({values:t,typeName:Te.ZodEnum,...Ae(e)})}class wi extends De{_parse(e){if(typeof e.data!="string"){const a=this._getOrReturnCtx(e),r=this._def.values;return de(a,{expected:Be.joinValues(r),received:a.parsedType,code:oe.invalid_type}),Ee}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const a=this._getOrReturnCtx(e),r=this._def.values;return de(a,{received:a.data,code:oe.invalid_enum_value,options:r}),Ee}return Bt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const a of this._def.values)e[a]=a;return e}get Values(){const e={};for(const a of this._def.values)e[a]=a;return e}get Enum(){const e={};for(const a of this._def.values)e[a]=a;return e}extract(e,a=this._def){return wi.create(e,{...this._def,...a})}exclude(e,a=this._def){return wi.create(this.options.filter(r=>!e.includes(r)),{...this._def,...a})}}wi.create=zy;class Zs extends De{_parse(e){const a=Be.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==pe.string&&r.parsedType!==pe.number){const s=Be.objectValues(a);return de(r,{expected:Be.joinValues(s),received:r.parsedType,code:oe.invalid_type}),Ee}if(this._cache||(this._cache=new Set(Be.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Be.objectValues(a);return de(r,{received:r.data,code:oe.invalid_enum_value,options:s}),Ee}return Bt(e.data)}get enum(){return this._def.values}}Zs.create=(t,e)=>new Zs({values:t,typeName:Te.ZodNativeEnum,...Ae(e)});class or extends De{unwrap(){return this._def.type}_parse(e){const{ctx:a}=this._processInputParams(e);if(a.parsedType!==pe.promise&&a.common.async===!1)return de(a,{code:oe.invalid_type,expected:pe.promise,received:a.parsedType}),Ee;const r=a.parsedType===pe.promise?a.data:Promise.resolve(a.data);return Bt(r.then(s=>this._def.type.parseAsync(s,{path:a.path,errorMap:a.common.contextualErrorMap})))}}or.create=(t,e)=>new or({type:t,typeName:Te.ZodPromise,...Ae(e)});class Mn extends De{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:a,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:c=>{de(r,c),c.fatal?a.abort():a.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const c=s.transform(r.data,o);if(r.common.async)return Promise.resolve(c).then(async u=>{if(a.value==="aborted")return Ee;const h=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return h.status==="aborted"?Ee:h.status==="dirty"||a.value==="dirty"?Wa(h.value):h});{if(a.value==="aborted")return Ee;const u=this._def.schema._parseSync({data:c,path:r.path,parent:r});return u.status==="aborted"?Ee:u.status==="dirty"||a.value==="dirty"?Wa(u.value):u}}if(s.type==="refinement"){const c=u=>{const h=s.refinement(u,o);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?Ee:(u.status==="dirty"&&a.dirty(),c(u.value),{status:a.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?Ee:(u.status==="dirty"&&a.dirty(),c(u.value).then(()=>({status:a.value,value:u.value}))))}if(s.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ra(c))return Ee;const u=s.transform(c.value,o);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>ra(c)?Promise.resolve(s.transform(c.value,o)).then(u=>({status:a.value,value:u})):Ee);Be.assertNever(s)}}Mn.create=(t,e,a)=>new Mn({schema:t,typeName:Te.ZodEffects,effect:e,...Ae(a)});Mn.createWithPreprocess=(t,e,a)=>new Mn({schema:e,effect:{type:"preprocess",transform:t},typeName:Te.ZodEffects,...Ae(a)});class zn extends De{_parse(e){return this._getType(e)===pe.undefined?Bt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zn.create=(t,e)=>new zn({innerType:t,typeName:Te.ZodOptional,...Ae(e)});class zi extends De{_parse(e){return this._getType(e)===pe.null?Bt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zi.create=(t,e)=>new zi({innerType:t,typeName:Te.ZodNullable,...Ae(e)});class Qs extends De{_parse(e){const{ctx:a}=this._processInputParams(e);let r=a.data;return a.parsedType===pe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Qs.create=(t,e)=>new Qs({innerType:t,typeName:Te.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});class Ws extends De{_parse(e){const{ctx:a}=this._processInputParams(e),r={...a,common:{...a.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Vs(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new on(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new on(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ws.create=(t,e)=>new Ws({innerType:t,typeName:Te.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});class Pl extends De{_parse(e){if(this._getType(e)!==pe.nan){const r=this._getOrReturnCtx(e);return de(r,{code:oe.invalid_type,expected:pe.nan,received:r.parsedType}),Ee}return{status:"valid",value:e.data}}}Pl.create=t=>new Pl({typeName:Te.ZodNaN,...Ae(t)});const tS=Symbol("zod_brand");class ch extends De{_parse(e){const{ctx:a}=this._processInputParams(e),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class $s extends De{_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Ee:o.status==="dirty"?(a.dirty(),Wa(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ee:s.status==="dirty"?(a.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,a){return new $s({in:e,out:a,typeName:Te.ZodPipeline})}}class Js extends De{_parse(e){const a=this._def.innerType._parse(e),r=s=>(ra(s)&&(s.value=Object.freeze(s.value)),s);return Vs(a)?a.then(s=>r(s)):r(a)}unwrap(){return this._def.innerType}}Js.create=(t,e)=>new Js({innerType:t,typeName:Te.ZodReadonly,...Ae(e)});function ag(t,e){const a=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof a=="string"?{message:a}:a}function Uy(t,e={},a){return t?sr.create().superRefine((r,s)=>{const o=t(r);if(o instanceof Promise)return o.then(c=>{if(!c){const u=ag(e,r),h=u.fatal??a??!0;s.addIssue({code:"custom",...u,fatal:h})}});if(!o){const c=ag(e,r),u=c.fatal??a??!0;s.addIssue({code:"custom",...c,fatal:u})}}):sr.create()}const nS={object:nt.lazycreate};var Te;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Te||(Te={}));const iS=(t,e={message:`Input not instance of ${t.name}`})=>Uy(a=>a instanceof t,e),Ly=Tn.create,Gy=ki.create,aS=Pl.create,rS=Pi.create,Fy=Bs.create,sS=sa.create,oS=Nl.create,lS=js.create,cS=Is.create,uS=sr.create,dS=ta.create,hS=ii.create,fS=Dl.create,pS=Rn.create,mS=nt.create,gS=nt.strictCreate,yS=Hs.create,vS=Kl.create,_S=qs.create,bS=Ln.create,SS=Ys.create,CS=kl.create,xS=oa.create,ES=nr.create,TS=Ks.create,RS=Xs.create,MS=wi.create,AS=Zs.create,OS=or.create,rg=Mn.create,NS=zn.create,DS=zi.create,kS=Mn.createWithPreprocess,PS=$s.create,wS=()=>Ly().optional(),zS=()=>Gy().optional(),US=()=>Fy().optional(),LS={string:t=>Tn.create({...t,coerce:!0}),number:t=>ki.create({...t,coerce:!0}),boolean:t=>Bs.create({...t,coerce:!0}),bigint:t=>Pi.create({...t,coerce:!0}),date:t=>sa.create({...t,coerce:!0})},GS=Ee,sg=Object.freeze(Object.defineProperty({__proto__:null,BRAND:tS,DIRTY:Wa,EMPTY_PATH:P8,INVALID:Ee,NEVER:GS,OK:Bt,ParseStatus:Lt,Schema:De,ZodAny:sr,ZodArray:Rn,ZodBigInt:Pi,ZodBoolean:Bs,ZodBranded:ch,ZodCatch:Ws,ZodDate:sa,ZodDefault:Qs,ZodDiscriminatedUnion:Kl,ZodEffects:Mn,ZodEnum:wi,ZodError:on,get ZodFirstPartyTypeKind(){return Te},ZodFunction:nr,ZodIntersection:qs,ZodIssueCode:oe,ZodLazy:Ks,ZodLiteral:Xs,ZodMap:kl,ZodNaN:Pl,ZodNativeEnum:Zs,ZodNever:ii,ZodNull:Is,ZodNullable:zi,ZodNumber:ki,ZodObject:nt,ZodOptional:zn,ZodParsedType:pe,ZodPipeline:$s,ZodPromise:or,ZodReadonly:Js,ZodRecord:Ys,ZodSchema:De,ZodSet:oa,ZodString:Tn,ZodSymbol:Nl,ZodTransformer:Mn,ZodTuple:Ln,ZodType:De,ZodUndefined:js,ZodUnion:Hs,ZodUnknown:ta,ZodVoid:Dl,addIssueToContext:de,any:uS,array:pS,bigint:rS,boolean:Fy,coerce:LS,custom:Uy,date:sS,datetimeRegex:wy,defaultErrorMap:rr,discriminatedUnion:vS,effect:rg,enum:MS,function:ES,getErrorMap:Al,getParsedType:ti,instanceof:iS,intersection:_S,isAborted:wd,isAsync:Vs,isDirty:zd,isValid:ra,late:nS,lazy:TS,literal:RS,makeIssue:Ol,map:CS,nan:aS,nativeEnum:AS,never:hS,null:cS,nullable:DS,number:Gy,object:mS,get objectUtil(){return Pd},oboolean:US,onumber:zS,optional:NS,ostring:wS,pipeline:PS,preprocess:kS,promise:OS,quotelessJson:D8,record:SS,set:xS,setErrorMap:k8,strictObject:gS,string:Ly,symbol:oS,transformer:rg,tuple:bS,undefined:lS,union:yS,unknown:dS,get util(){return Be},void:fS},Symbol.toStringTag,{value:"Module"}));function og({className:t,type:e,...a}){return ne.jsx("input",{type:e,"data-slot":"input",className:vn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var FS="Label",Vy=q.forwardRef((t,e)=>ne.jsx(Gn.label,{...t,ref:e,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));Vy.displayName=FS;var VS=Vy;function BS({className:t,...e}){return ne.jsx(VS,{"data-slot":"label",className:vn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function jS({className:t,...e}){return ne.jsx("div",{"data-slot":"skeleton",className:vn("bg-accent animate-pulse rounded-md",t),...e})}function IS(){var t;if(typeof window>"u"||!window.GestureEvent)return 50;try{const e=(t=navigator.userAgent)==null?void 0:t.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}function HS(t){return{method:"throttle",timeMs:t}}const ks=HS(IS());function qS(t){return t===null||Array.isArray(t)&&t.length===0}function YS(t,e,a){if(typeof t=="string")a.set(e,t);else{a.delete(e);for(const r of t)a.append(e,r);a.has(e)||a.set(e,"")}return a}function By(){const t=new Map;return{on(e,a){const r=t.get(e)||[];return r.push(a),t.set(e,r),()=>this.off(e,a)},off(e,a){const r=t.get(e);r&&t.set(e,r.filter(s=>s!==a))},emit(e,a){var r;(r=t.get(e))==null||r.forEach(s=>s(a))}}}function Ld(t,e,a){function r(){t(),a.removeEventListener("abort",o)}const s=setTimeout(r,e);function o(){clearTimeout(s),a.removeEventListener("abort",o)}a.addEventListener("abort",o)}function Gd(){const t=Promise;if(Promise.hasOwnProperty("withResolvers"))return Promise.withResolvers();let e=()=>{},a=()=>{};return{promise:new t((r,s)=>{e=r,a=s}),resolve:e,reject:a}}function KS(t,e){let a=e;for(let r=t.length-1;r>=0;r--){const s=t[r];if(!s)continue;const o=a;a=()=>s(o)}a()}function Fd(){return new URLSearchParams(location.search)}var jy=class{constructor(){wt(this,"updateMap",new Map);wt(this,"options",{history:"replace",scroll:!1,shallow:!0});wt(this,"timeMs",ks.timeMs);wt(this,"transitions",new Set);wt(this,"resolvers",null);wt(this,"controller",null);wt(this,"lastFlushedAt",0);wt(this,"resetQueueOnNextPush",!1)}push({key:t,query:e,options:a},r=ks.timeMs){this.resetQueueOnNextPush&&(this.reset(),this.resetQueueOnNextPush=!1),lt("[nuqs gtq] Enqueueing %s=%s %O",t,e,a),this.updateMap.set(t,e),a.history==="push"&&(this.options.history="push"),a.scroll&&(this.options.scroll=!0),a.shallow===!1&&(this.options.shallow=!1),a.startTransition&&this.transitions.add(a.startTransition),(!Number.isFinite(this.timeMs)||r>this.timeMs)&&(this.timeMs=r)}getQueuedQuery(t){return this.updateMap.get(t)}getPendingPromise({getSearchParamsSnapshot:t=Fd}){var e;return((e=this.resolvers)==null?void 0:e.promise)??Promise.resolve(t())}flush({getSearchParamsSnapshot:t=Fd,rateLimitFactor:e=1,...a},r){if(this.controller??(this.controller=new AbortController),!Number.isFinite(this.timeMs))return lt("[nuqs gtq] Skipping flush due to throttleMs=Infinity"),Promise.resolve(t());if(this.resolvers)return this.resolvers.promise;this.resolvers=Gd();const s=()=>{this.lastFlushedAt=performance.now();const[c,u]=this.applyPendingUpdates({...a,autoResetQueueOnUpdate:a.autoResetQueueOnUpdate??!0,getSearchParamsSnapshot:t},r);u===null?(this.resolvers.resolve(c),this.resetQueueOnNextPush=!0):this.resolvers.reject(c),this.resolvers=null};return Ld(()=>{const c=performance.now()-this.lastFlushedAt,u=this.timeMs,h=e*Math.max(0,u-c);lt("[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)",h,u,e),h===0?s():Ld(s,h,this.controller.signal)},0,this.controller.signal),this.resolvers.promise}abort(){var t,e;return(t=this.controller)==null||t.abort(),this.controller=new AbortController,(e=this.resolvers)==null||e.resolve(new URLSearchParams),this.resolvers=null,this.reset()}reset(){const t=Array.from(this.updateMap.keys());return lt("[nuqs gtq] Resetting queue %s",JSON.stringify(Object.fromEntries(this.updateMap))),this.updateMap.clear(),this.transitions.clear(),this.options={history:"replace",scroll:!1,shallow:!0},this.timeMs=ks.timeMs,t}applyPendingUpdates(t,e){const{updateUrl:a,getSearchParamsSnapshot:r}=t;let s=r();if(lt("[nuqs gtq] Applying %d pending update(s) on top of %s",this.updateMap.size,s.toString()),this.updateMap.size===0)return[s,null];const o=Array.from(this.updateMap.entries()),c={...this.options},u=Array.from(this.transitions);t.autoResetQueueOnUpdate&&this.reset(),lt("[nuqs gtq] Flushing queue %O with options %O",o,c);for(const[h,f]of o)f===null?s.delete(h):s=YS(f,h,s);e&&(s=e(s));try{return KS(u,()=>{a(s,c)}),[s,null]}catch(h){return console.error(pg(429),o.map(([f])=>f).join(),h),[s,h]}}};const gl=new jy;function XS(t,e,a){const r=q.useCallback(()=>{const o=Object.fromEntries(t.map(c=>[c,a(c)]));return[JSON.stringify(o),o]},[t.join(","),a]),s=q.useRef(null);return s.current===null&&(s.current=r()),q.useSyncExternalStore(q.useCallback(o=>{const c=t.map(u=>e(u,o));return()=>c.forEach(u=>u())},[t.join(","),e]),()=>{const[o,c]=r();return s.current[0]===o?s.current[1]:(s.current=[o,c],c)},()=>s.current[1])}var ZS=class{constructor(t){wt(this,"callback");wt(this,"resolvers",Gd());wt(this,"controller",new AbortController);wt(this,"queuedValue");this.callback=t}abort(){this.controller.abort(),this.queuedValue=void 0}push(t,e){return this.queuedValue=t,this.controller.abort(),this.controller=new AbortController,Ld(()=>{const a=this.resolvers;try{lt("[nuqs dq] Flushing debounce queue",t);const r=this.callback(t);lt("[nuqs dq] Reset debounce queue %O",this.queuedValue),this.queuedValue=void 0,this.resolvers=Gd(),r.then(s=>a.resolve(s)).catch(s=>a.reject(s))}catch(r){this.queuedValue=void 0,a.reject(r)}},e,this.controller.signal),this.resolvers.promise}},QS=class{constructor(t=new jy){wt(this,"throttleQueue");wt(this,"queues",new Map);wt(this,"queuedQuerySync",By());this.throttleQueue=t}useQueuedQueries(t){return XS(t,(e,a)=>this.queuedQuerySync.on(e,a),e=>this.getQueuedQuery(e))}push(t,e,a,r){if(!Number.isFinite(e)){const c=a.getSearchParamsSnapshot??Fd;return Promise.resolve(c())}const s=t.key;if(!this.queues.has(s)){lt("[nuqs dqc] Creating debounce queue for `%s`",s);const c=new ZS(u=>(this.throttleQueue.push(u),this.throttleQueue.flush(a,r).finally(()=>{var h;((h=this.queues.get(u.key))==null?void 0:h.queuedValue)===void 0&&(lt("[nuqs dqc] Cleaning up empty queue for `%s`",u.key),this.queues.delete(u.key)),this.queuedQuerySync.emit(u.key)})));this.queues.set(s,c)}lt("[nuqs dqc] Enqueueing debounce update %O",t);const o=this.queues.get(s).push(t,e);return this.queuedQuerySync.emit(s),o}abort(t){var a;const e=this.queues.get(t);return e?(lt("[nuqs dqc] Aborting debounce queue %s=%s",t,(a=e.queuedValue)==null?void 0:a.query),this.queues.delete(t),e.abort(),this.queuedQuerySync.emit(t),r=>(r.then(e.resolvers.resolve,e.resolvers.reject),r)):r=>r}abortAll(){var t;for(const[e,a]of this.queues.entries())lt("[nuqs dqc] Aborting debounce queue %s=%s",e,(t=a.queuedValue)==null?void 0:t.query),a.abort(),a.resolvers.resolve(new URLSearchParams),this.queuedQuerySync.emit(e);this.queues.clear()}getQueuedQuery(t){var a,r;const e=(r=(a=this.queues.get(t))==null?void 0:a.queuedValue)==null?void 0:r.query;return e!==void 0?e:this.throttleQueue.getQueuedQuery(t)}};const id=new QS(gl);function WS(t,e){return t===e?!0:t===null||e===null||typeof t=="string"||typeof e=="string"||t.length!==e.length?!1:t.every((a,r)=>a===e[r])}function Iy(t,e,a){try{return t(e)}catch(r){return s_("[nuqs] Error while parsing value `%s`: %O"+(a?" (for key `%s`)":""),e,r,a),null}}function si(t){function e(a){if(typeof a>"u")return null;let r="";if(Array.isArray(a)){if(a[0]===void 0)return null;r=a[0]}return typeof a=="string"&&(r=a),Iy(t.parse,r)}return{type:"single",eq:(a,r)=>a===r,...t,parseServerSide:e,withDefault(a){return{...this,defaultValue:a,parseServerSide(r){return e(r)??a}}},withOptions(a){return{...this,...a}}}}si({parse:t=>t,serialize:String});si({parse:t=>{const e=parseInt(t);return e==e?e:null},serialize:t=>""+Math.round(t)});si({parse:t=>{const e=parseInt(t);return e==e?e-1:null},serialize:t=>""+Math.round(t+1)});si({parse:t=>{const e=parseInt(t,16);return e==e?e:null},serialize:t=>{const e=Math.round(t).toString(16);return(e.length&1?"0":"")+e}});si({parse:t=>{const e=parseFloat(t);return e==e?e:null},serialize:String});si({parse:t=>t.toLowerCase()==="true",serialize:String});function uh(t,e){return t.valueOf()===e.valueOf()}si({parse:t=>{const e=parseInt(t);return e==e?new Date(e):null},serialize:t=>""+t.valueOf(),eq:uh});si({parse:t=>{const e=new Date(t);return e.valueOf()==e.valueOf()?e:null},serialize:t=>t.toISOString(),eq:uh});si({parse:t=>{const e=new Date(t.slice(0,10));return e.valueOf()==e.valueOf()?e:null},serialize:t=>t.toISOString().slice(0,10),eq:uh});const ad=By(),JS={};function $S(t,e={}){const a=q.useId(),r=i_(),s=a_(),{history:o="replace",scroll:c=(r==null?void 0:r.scroll)??!1,shallow:u=(r==null?void 0:r.shallow)??!0,throttleMs:h=ks.timeMs,limitUrlUpdates:f=r==null?void 0:r.limitUrlUpdates,clearOnDefault:p=(r==null?void 0:r.clearOnDefault)??!0,startTransition:b,urlKeys:y=JS}=e,g=Object.keys(t).join(","),v=q.useMemo(()=>Object.fromEntries(Object.keys(t).map(R=>[R,y[R]??R])),[g,JSON.stringify(y)]),C=r_(Object.values(v)),E=C.searchParams,O=q.useRef({}),x=q.useMemo(()=>Object.fromEntries(Object.keys(t).map(R=>[R,t[R].defaultValue??null])),[Object.values(t).map(({defaultValue:R})=>R).join(",")]),_=id.useQueuedQueries(Object.values(v)),[T,M]=q.useState(()=>rd(t,y,E??new URLSearchParams,_).state),k=q.useRef(T);if(lt("[nuq+ %s `%s`] render - state: %O, iSP: %s",a,g,T,E),Object.keys(O.current).join("&")!==Object.values(v).join("&")){const{state:R,hasChanged:N}=rd(t,y,E,_,O.current,k.current);N&&(lt("[nuq+ %s `%s`] State changed: %O",a,g,{state:R,initialSearchParams:E,queuedQueries:_,queryRef:O.current,stateRef:k.current}),k.current=R,M(R)),O.current=Object.fromEntries(Object.entries(v).map(([P,F])=>{var j;return[F,((j=t[P])==null?void 0:j.type)==="multi"?E==null?void 0:E.getAll(F):(E==null?void 0:E.get(F))??null]}))}q.useEffect(()=>{const{state:R,hasChanged:N}=rd(t,y,E,_,O.current,k.current);N&&(lt("[nuq+ %s `%s`] State changed: %O",a,g,{state:R,initialSearchParams:E,queuedQueries:_,queryRef:O.current,stateRef:k.current}),k.current=R,M(R))},[Object.values(v).map(R=>`${R}=${E==null?void 0:E.getAll(R)}`).join("&"),JSON.stringify(_)]),q.useEffect(()=>{const R=Object.keys(t).reduce((N,P)=>(N[P]=({state:F,query:j})=>{M(Y=>{const{defaultValue:K}=t[P],I=v[P],ie=F??K??null,A=Y[P]??K??null;return Object.is(A,ie)?(lt("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O",a,g,I,F,K,k.current),Y):(k.current={...k.current,[P]:ie},O.current[I]=j,lt("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O",a,g,I,F,K,k.current),k.current)})},N),{});for(const N of Object.keys(t)){const P=v[N];lt("[nuq+ %s `%s`] Subscribing to sync for `%s`",a,P,g),ad.on(P,R[N])}return()=>{for(const N of Object.keys(t)){const P=v[N];lt("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",a,P,g),ad.off(P,R[N])}}},[g,v]);const G=q.useCallback((R,N={})=>{var A,D,U,L,V,ee;const P=Object.fromEntries(Object.keys(t).map(H=>[H,null])),F=typeof R=="function"?R(lg(k.current,x))??P:R??P;lt("[nuq+ %s `%s`] setState: %O",a,g,F);let j,Y=0,K=!1;const I=[];for(let[H,te]of Object.entries(F)){const ae=t[H],J=v[H];if(!ae)continue;(N.clearOnDefault??ae.clearOnDefault??p)&&te!==null&&ae.defaultValue!==void 0&&(ae.eq??((se,ue)=>se===ue))(te,ae.defaultValue)&&(te=null);const z=te===null?null:(ae.serialize??String)(te);ad.emit(J,{state:te,query:z});const Z={key:J,query:z,options:{history:N.history??ae.history??o,shallow:N.shallow??ae.shallow??u,scroll:N.scroll??ae.scroll??c,startTransition:N.startTransition??ae.startTransition??b}};if(((A=N==null?void 0:N.limitUrlUpdates)==null?void 0:A.method)==="debounce"||(f==null?void 0:f.method)==="debounce"||((D=ae.limitUrlUpdates)==null?void 0:D.method)==="debounce"){Z.options.shallow===!0&&console.warn(pg(422));const se=((U=N==null?void 0:N.limitUrlUpdates)==null?void 0:U.timeMs)??(f==null?void 0:f.timeMs)??((L=ae.limitUrlUpdates)==null?void 0:L.timeMs)??ks.timeMs,ue=id.push(Z,se,C,s);Y<se&&(j=ue,Y=se)}else{const se=((V=N==null?void 0:N.limitUrlUpdates)==null?void 0:V.timeMs)??((ee=ae==null?void 0:ae.limitUrlUpdates)==null?void 0:ee.timeMs)??(f==null?void 0:f.timeMs)??N.throttleMs??ae.throttleMs??h;I.push(id.abort(J)),gl.push(Z,se),K=!0}}const ie=I.reduce((H,te)=>te(H),K?gl.flush(C,s):gl.getPendingPromise(C));return j??ie},[g,o,u,c,h,f==null?void 0:f.method,f==null?void 0:f.timeMs,b,v,C.updateUrl,C.getSearchParamsSnapshot,C.rateLimitFactor,s,x]);return[q.useMemo(()=>lg(T,x),[T,x]),G]}function rd(t,e,a,r,s,o){let c=!1;const u=Object.entries(t).reduce((h,[f,p])=>{const b=(e==null?void 0:e[f])??f,y=r[b],g=p.type==="multi"?[]:null,v=y===void 0?(p.type==="multi"?a==null?void 0:a.getAll(b):a==null?void 0:a.get(b))??g:y;return s&&o&&WS(s[b]??g,v)?(h[f]=o[f]??null,h):(c=!0,h[f]=(qS(v)?null:Iy(p.parse,v,b))??null,s&&(s[b]=v),h)},{});if(!c){const h=Object.keys(t),f=Object.keys(o??{});c=h.length!==f.length||h.some(p=>!f.includes(p))}return{state:u,hasChanged:c}}function lg(t,e){return Object.fromEntries(Object.keys(t).map(a=>[a,t[a]??e[a]??null]))}function e9(t,e={}){const{parse:a,type:r,serialize:s,eq:o,defaultValue:c,...u}=e,[{[t]:h},f]=$S({[t]:{parse:a??(p=>p),type:r,serialize:s,eq:o,defaultValue:c}},u);return[h,q.useCallback((p,b={})=>f(y=>({[t]:typeof p=="function"?p(y[t]):p}),b),[t,f])]}const cg=sg.object({peerId:sg.string().min(1,"Peer ID is required")});function t9({connect:t,id:e,isPeerOpen:a}){const r=hg(),s=()=>r({to:"/"}),[o]=e9("inviteID");q.useEffect(()=>{o&&t&&a&&t(o)},[o,t,a]);const c=N8({defaultValues:{peerId:""},validators:{onBlur:cg,onSubmit:cg},onSubmit:({value:h})=>{const f=h.peerId.trim();t(f)}}),u=()=>e?ne.jsx(og,{onClick:()=>{navigator.clipboard.writeText(e),e0.success("Copied to clipboard")},type:"text",placeholder:"id",readOnly:!0,value:e,className:"text-white bg-black text-white md:w-1/3 sm:w-1/2"}):ne.jsx(jS,{className:"w-96 h-12"});return ne.jsxs("div",{className:"bg-bg bg-cover bg-center aspect-auto w-screen h-screen bg-[image:var(--bg-home)]",children:[ne.jsx(el,{className:"bg-white text-black m-4",onClick:s,children:"back"}),ne.jsxs("div",{className:"flex flex-col gap-8 justify-center m-auto h-3/4",children:[ne.jsxs("div",{className:"flex justify-center items-center gap-x-4 mx-4",children:[ne.jsx(BS,{htmlFor:"id",className:"text-white text-4xl",children:"ID"}),ne.jsx(u,{}),ne.jsx(el,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/#/game?inviteID=${e}`),e0.success("Copied to clipboard")},children:"Copy URL"})]}),ne.jsx("div",{className:"flex justify-center items-center mx-4 ",children:ne.jsxs("form",{className:"flex flex-col justify-center items-center gap-y-4 text-white",onSubmit:h=>{h.preventDefault(),h.stopPropagation(),c.handleSubmit()},children:[ne.jsx(c.Field,{name:"peerId",children:h=>ne.jsxs(ne.Fragment,{children:[ne.jsx("label",{className:"text-white",htmlFor:h.name,children:"Peer ID:"}),ne.jsx(og,{id:h.name,name:h.name,value:h.state.value,onBlur:h.handleBlur,onChange:f=>h.handleChange(f.target.value),className:"md:min-w-[400px] sm:min-w-[300px] bg-black text-white"}),ne.jsx(n9,{field:h})]})}),ne.jsx(c.Subscribe,{selector:h=>[h.canSubmit,h.isSubmitting],children:([h,f])=>ne.jsxs("div",{className:"flex gap-x-4",children:[ne.jsx(el,{className:"bg-red-500 w-1/2 text-white",type:"reset",onClick:p=>{p.preventDefault(),c.reset()},children:"Reset"}),ne.jsx(el,{className:"bg-white text-black w-1/2",type:"submit",disabled:!h,children:f?"...":"Submit"})]})})]})})]})]})}function n9({field:t}){return ne.jsxs(ne.Fragment,{children:[t.state.meta.isTouched&&!t.state.meta.isValid?ne.jsx("em",{className:"text-red-500",children:t.state.meta.errors.map(e=>e.message)}):null,t.state.meta.isValidating?"Validating...":null]})}const C9=function(){const[e,a,r,s]=ea(yg(g=>[g.isWon,g.winner,g.player,g.reset])),[o,c]=q.useState(!1),{id:u,connect:h,isConnected:f,sendPiece:p,restart:b,isPeerOpen:y}=X3();return q.useEffect(()=>{s()},[]),q.useEffect(()=>{c(!!e)},[e]),f?ne.jsxs("div",{children:[ne.jsx(X5,{open:o,onOpenChange:c,children:ne.jsxs(W5,{children:[ne.jsxs(J5,{children:[ne.jsx(e3,{children:`You ${a===r.me?"win":"lose"}`}),ne.jsx(t3,{children:"Do you want to play again?"})]}),ne.jsxs($5,{children:[ne.jsx(i3,{onClick:()=>c(!1),children:"Cancel"}),ne.jsx(n3,{className:"bg-green-600",onClick:b,children:"Restart"})]})]})}),ne.jsx(y8,{sendPiece:p,restart:b})]}):ne.jsx(t9,{id:u,connect:h,isPeerOpen:y})};export{C9 as component};
